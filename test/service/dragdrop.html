<!DOCTYPE html>
<html>
<head>
  <base href="../..">
  <title>DragDrop Unit Tests</title>
  <link rel="import" href="test/testbase.html">
  <link rel="import" href="src/service/dragdrop.html">
</head>
<body>
  <script>
    'use strict';

    var DragDrop = pb.DragDrop;
    var expect = chai.expect;
    var Spies = spies.Spies;

    describe('DragDrop', function() {
      describe('#dragStart', function() {
        it('should set the lastDraggedEl and trigger an event', function() {
          var draggedEl = {};
          var o = {
            handler: function() {}
          };

          Spies.spy(o, 'handler');

          $(DragDrop).on(DragDrop.EventType.DRAGGED, o.handler);
          DragDrop.dragStart(draggedEl);

          expect(o.handler).called().at.least(1);
          expect(DragDrop.lastDraggedEl).to.be.equal(draggedEl);
        });
      });
    });
  </script>
</body>