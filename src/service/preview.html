<base href="..">

<link rel="import" href="utils.html">

<script>

DI
    .prefix('pb')
    .bind('service.Preview', ['=', (Utils) => {
  /**
   * Service that lets the user preview an element on mouse hover.
   *
   * @class service.Preview
   * @static
   */

  // Private symbols
  const __previewedEl__ = Symbol();

  let Preview = {

    [__previewedEl__]: null,

    /**
     * Element that is being previewed, if any. If null, no element is being previewed.
     *
     * @property previewedEl
     * @type Element|null
     */
    get previewedEl() {
      return this[__previewedEl__];
    },
    set previewedEl(el) {
      let changed = this[__previewedEl__] !== el;
      this[__previewedEl__] = el;
      if (changed) {
        $(this).trigger(Preview.Events.ELEMENT_CHANGED);
      }
    },

    Events: {
      /**
       * Fired when the previewed element has been changed.
       *
       * @event element-changed
       */
      ELEMENT_CHANGED: 'element-changed'
    }
  };

  return Preview;
}]);
</script>