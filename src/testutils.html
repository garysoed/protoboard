<base href=".">

<link rel="import" href="third_party/di.html">
<link rel="import" href="trigger/click.html">
<link rel="import" href="utils.html">

<script>
DI.bind('pb.t', { _: '=' }, $i => {
  let TestUtil = {
    createFakeAbility(name, trigger = this.createFakeTrigger(`${name}-trigger`)) {
      return {
        attrName: `attr${name}`,
        attrTrigger: `attr${name}Trigger`,
        defaultTrigger: trigger,
        getTrigger: () => trigger,
        init: $i._.spiedFunction(),
        isEnabled: $i._.spiedFunction(),
        updateConfig: $i._.spiedFunction(),
        trigger: $i._.spiedFunction()
      };
    },

    createFakeEvents() {
      let fake = {};
      fake.of = $i._.spiedFunction().overrideReturn(fake);
      fake.on = $i._.spiedFunction().overrideReturn(fake);
      fake.off = $i._.spiedFunction().overrideReturn(fake);
      return fake;
    },

    createFakeTrigger(name) {
      return {
        toString() { return name; },
        on: $i._.spiedFunction(),
        off: $i._.spiedFunction()
      };
    },

    getSymbol(obj, name) {
      return Object.getOwnPropertySymbols(obj).find(symbol => {
        return `Symbol(${name})` === symbol.toString();
      });
    }
  };

  return TestUtil;
});
</script>
