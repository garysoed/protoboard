<html><head><base href="..">

<link rel="import" href="check.html">
<link rel="import" href="service/state.html">
<link rel="import" href="third_party/di.html">
<link rel="import" href="utils.html">

<script>"use strict";var _slicedToArray=function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t)){for(var e,n=[],a=t[Symbol.iterator]();!(e=a.next()).done&&(n.push(e.value),!r||n.length!==r););return n}throw new TypeError("Invalid attempt to destructure non-iterable instance")},_createComputedClass=function(){function t(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.configurable=!0,n.value&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(r,e,n){return e&&t(r.prototype,e),n&&t(r,n),r}}(),_createClass=function(){function t(t,r){for(var e in r){var n=r[e];n.configurable=!0,n.value&&(n.writable=!0)}Object.defineProperties(t,r)}return function(r,e,n){return e&&t(r.prototype,e),n&&t(r,n),r}}(),_classCallCheck=function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")};DIJS.bind("pb.service.Acl.__group__",function(t){var r=Symbol(),e=Symbol(),n=function(){function t(n){_classCallCheck(this,t),this[e]=n,this[r]=new Set}return _createClass(t,{contains:{value:function(n){if(n===this[e])return!0;var a=!0,i=!1,o=void 0;try{for(var l,u=this[r][Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var s=l.value,c=s instanceof t?s.contains(n):s===n;if(c)return!0}}catch(f){i=!0,o=f}finally{try{!a&&u["return"]&&u["return"]()}finally{if(i)throw o}}return!1}},add:{value:function(t){this[r].add(t)}}}),t}();return n}).bind("pb.service.Acl.__ctor__",function(t){var r=t("pb.Check"),e=t("pb.service.Acl.__group__"),n=t("MutationObserver"),a=t("pb.service.State"),i=t("pb.Utils"),o="pb-acl-",l="currentPlayer",u=Symbol("enabledMap"),s=Symbol("groups"),c=Symbol(),f=(Symbol(),Symbol()),v=Symbol(),y=Symbol(),h=Symbol("update"),b=function(){function t(){_classCallCheck(this,t),this[s]=new Map,this[f]=new Set}return _createComputedClass(t,[{key:y,value:function(t){t[u]&&t[u].clear()}},{key:h,value:function(t){var e=this;t[u]||(t[u]=new Map);var n=!0,a=!1,l=void 0;try{for(var c,f=i.toMap(t.attributes)[Symbol.iterator]();!(n=(c=f.next()).done);n=!0){var v;(function(){v=_slicedToArray(c.value,2);var n=v[0],a=v[1];if(!n.startsWith(o))return"continue";var i=n.substring(o.length),l=r(a.value).isList().orUse(null),f=null===l||0===l.length||l.some(function(t){return e[s].has(t)?e[s].get(t).contains(e.currentPlayer):t===e.currentPlayer});t[u].set(i,f),e.isActionEnabled(t,i).then(function(r){t.classList.toggle("pb-acl-"+i,r)})})()}}catch(y){a=!0,l=y}finally{try{!n&&f["return"]&&f["return"]()}finally{if(a)throw l}}}},{key:v,value:function(t){var r=!0,e=!1,n=void 0;try{for(var a,i=t[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var l=a.value,u=l.attributeName;u.startsWith(o)&&(this[y](l.target),this[h](l.target))}}catch(s){e=!0,n=s}finally{try{!r&&i["return"]&&i["return"]()}finally{if(e)throw n}}}},{key:"registerElement",value:function(t){return this[f].add(t),t[c]||(t[c]=new n(this[v].bind(this)),t[c].observe(t,{attributes:!0})),this[h](t),this}},{key:"isActionEnabled",value:function(t,r){var e=t.parentElement?this.isActionEnabled(t.parentElement,r):Promise.resolve(!0);t[u]||(t[u]=new Map,this[h](t));var n=!t[u].has(r)||t[u].get(r);return Promise.all([e,n]).then(function(t){var r=_slicedToArray(t,2),e=r[0],n=r[1];return e&&n})}},{key:"addGroup",value:function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),a=1;r>a;a++)n[a-1]=arguments[a];var i=new e(t),o=!0,l=!1,u=void 0;try{for(var c,f=n[Symbol.iterator]();!(o=(c=f.next()).done);o=!0){var v=c.value;i.add(this[s].has(v)?this[s].get(v):v)}}catch(y){l=!0,u=y}finally{try{!o&&f["return"]&&f["return"]()}finally{if(l)throw u}}return this[s].set(t,i),this}},{key:"currentPlayer",get:function(){return a.get(l)},set:function(t){a.put(l,t);var r=!0,e=!1,n=void 0;try{for(var i,o=this[f][Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var u=i.value;this[y](u)}}catch(s){e=!0,n=s}finally{try{!r&&o["return"]&&o["return"]()}finally{if(e)throw n}}var c=!0,v=!1,b=void 0;try{for(var d,p=this[f][Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var u=d.value;this[h](u)}}catch(s){v=!0,b=s}finally{try{!c&&p["return"]&&p["return"]()}finally{if(v)throw b}}}}]),t}();return b}).bind("pb.service.Acl",function(t){var r=t("pb.service.Acl.__ctor__");return new r});</script>
</head><body></body></html>