<html><head><base href="..">

<link rel="import" href="service/move.html">
<link rel="import" href="third_party/di.html">
<link rel="import" href="third_party/events.html">
<link rel="import" href="trigger/trigger.html">
<link rel="import" href="trigger/triggers.html">

<style>.pb-key:hover::shadow #root {
  outline: 6px dashed #6B62A4;
  outline-offset: -6px;
}</style>

<script>"use strict";var _slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var r,n=[],o=e[Symbol.iterator]();!(r=o.next()).done&&(n.push(r.value),!t||n.length!==t););return n}throw new TypeError("Invalid attempt to destructure non-iterable instance")},_defineProperty=function(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0})},_createComputedClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.configurable=!0,n.value&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},_classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};DIJS.prefix("pb").bind("trigger.Key",function(e){var t=e("Events"),r=e("service.Move"),n=e("trigger.Trigger"),o=e("trigger.Triggers"),i=e("$registry"),a=(Symbol(),Symbol("key")),u=Symbol(),s=Symbol("onMouseLeave"),l=function(e){function r(e){_classCallCheck(this,r),this[a]=e}return _inherits(r,e),_createComputedClass(r,[{key:u,value:function(e,t){y.add(t,this[a],e)}},{key:s,value:function(e){y.remove(e)}},{key:"on",value:function(e,r){t.of(e,this).on("dom","mouseenter",this[u].bind(this,r,e)).on("dom","mouseleave",this[s].bind(this,e)),e.classList.add("pb-key")}},{key:"off",value:function(e){t.of(e,this).off(),e.classList.remove("pb-key")}},{key:"toString",value:function(){return"key-"+this[a]}},{key:"helpText",get:function(){return this[a]}}]),r}(n);o.register(function(e){return"key-"===e.substring(0,"key-".length)?new l(e.substring("key-".length)):void 0});var f=Symbol("hoveredEls"),c=Symbol("onKeyPress"),y=Object.defineProperties(function(){var e={};return _defineProperty(e,f,new Map),_defineProperty(e,c,function(e){var t=String.fromCharCode(e.keyCode),n=null,o=!0,i=!1,a=void 0;try{for(var u,s=this[f][Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var l=_slicedToArray(u.value,2),c=l[0],y=l[1];!y.has(t)||n&&!n.contains(c)||(n=c)}}catch(d){i=!0,a=d}finally{try{!o&&s["return"]&&s["return"]()}finally{if(i)throw a}}if(n){var h=this[f].get(n).get(t),v=!0,b=!1,g=void 0;try{for(var p,m=h[Symbol.iterator]();!(v=(p=m.next()).done);v=!0){var k=p.value;k.trigger(n);break}}catch(d){b=!0,g=d}finally{try{!v&&m["return"]&&m["return"]()}finally{if(b)throw g}}var _=n.getBoundingClientRect();(r.movedElements.has(n)||_.left>r.mouseX||_.right<r.mouseX||_.top>r.mouseY||_.bottom<r.mouseY)&&this[f]["delete"](n)}}),_defineProperty(e,"init",function(e){t.of(e.body,y).on("dom","keypress",this[c].bind(y))}),_defineProperty(e,"add",function(e,t,r){this[f].has(e)||this[f].set(e,new Map);var n=this[f].get(e);n.get(t)||n.set(t,new Set),n.get(t).add(r)}),_defineProperty(e,"remove",function(e){this[f]["delete"](e)}),_defineProperty(e,"clear",function(){this[f].clear()}),e}(),{hoveredEls:{get:function(){return this[f]},configurable:!0,enumerable:!0}});return i.runAtRegister(function(e){y.init(e)}),l.Service=y,l});</script>
</head><body></body></html>