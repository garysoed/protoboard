<html><head><base href="..">

<link rel="import" href="service/move.html">
<link rel="import" href="third_party/di.html">
<link rel="import" href="third_party/events.html">
<link rel="import" href="trigger/trigger.html">
<link rel="import" href="trigger/triggers.html">

<style>.pb-key:hover::shadow #root {
  outline: 6px dashed #6B62A4;
  outline-offset: -6px;
}</style>

<script>"use strict";var _slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var r,n=[],o=e[Symbol.iterator]();!(r=o.next()).done&&(n.push(r.value),!t||n.length!==t););return n}throw new TypeError("Invalid attempt to destructure non-iterable instance")},_defineProperty=function(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0})},_createComputedClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.configurable=!0,n.value&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},_classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};DI.prefix("pb").bind("trigger.Key",{Events:"=",Move:"service.=",Trigger:"trigger.=",Triggers:"trigger.=",$registry:"="},function(e){var t=(Symbol(),Symbol("key")),r=Symbol(),n=Symbol("onMouseLeave"),o=function(o){function i(e){_classCallCheck(this,i),this[t]=e}return _inherits(i,o),_createComputedClass(i,[{key:r,value:function(e,r){s.add(r,this[t],e)}},{key:n,value:function(e){s.remove(e)}},{key:"on",value:function(t,o){e.Events.of(t,this).on("dom","mouseenter",this[r].bind(this,o,t)).on("dom","mouseleave",this[n].bind(this,t)),t.classList.add("pb-key")}},{key:"off",value:function(t){e.Events.of(t,this).off(),t.classList.remove("pb-key")}},{key:"toString",value:function(){return"key-"+this[t]}},{key:"helpText",get:function(){return this[t]}}]),i}(e.Trigger);e.Triggers.register(function(e){return"key-"===e.substring(0,"key-".length)?new o(e.substring("key-".length)):void 0});var i=Symbol("hoveredEls"),a=Symbol("onKeyPress"),s=Object.defineProperties(function(){var t={};return _defineProperty(t,i,new Map),_defineProperty(t,a,function(t){var r=String.fromCharCode(t.keyCode),n=null,o=!0,a=!1,s=void 0;try{for(var u,l=this[i][Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var f=_slicedToArray(u.value,2),c=f[0],y=f[1];!y.has(r)||n&&!n.contains(c)||(n=c)}}catch(v){a=!0,s=v}finally{try{!o&&l["return"]&&l["return"]()}finally{if(a)throw s}}if(n){var d=this[i].get(n).get(r),h=!0,g=!1,b=void 0;try{for(var p,m=d[Symbol.iterator]();!(h=(p=m.next()).done);h=!0){var k=p.value;k.trigger(n);break}}catch(v){g=!0,b=v}finally{try{!h&&m["return"]&&m["return"]()}finally{if(g)throw b}}var _=n.getBoundingClientRect();(e.Move.movedElements.has(n)||_.left>e.Move.mouseX||_.right<e.Move.mouseX||_.top>e.Move.mouseY||_.bottom<e.Move.mouseY)&&this[i]["delete"](n)}}),_defineProperty(t,"init",function(t){e.Events.of(t.body,s).on("dom","keypress",this[a].bind(s))}),_defineProperty(t,"add",function(e,t,r){this[i].has(e)||this[i].set(e,new Map);var n=this[i].get(e);n.get(t)||n.set(t,new Set),n.get(t).add(r)}),_defineProperty(t,"remove",function(e){this[i]["delete"](e)}),_defineProperty(t,"clear",function(){this[i].clear()}),t}(),{hoveredEls:{get:function(){return this[i]},configurable:!0,enumerable:!0}});return e.$registry.runAtRegister(function(e){s.init(e)}),o.Service=s,o});</script>
</head><body></body></html>