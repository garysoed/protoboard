<html><head><base href="..">

<link rel="import" href="service/move.html">
<link rel="import" href="third_party/di.html">
<link rel="import" href="third_party/events.html">
<link rel="import" href="trigger/trigger.html">
<link rel="import" href="trigger/triggers.html">

<style>/*.pb-key:hover::shadow #root {
    outline: 6px dashed var(--color-highlight);
    outline-offset: -6px;
  }*/</style>

<script>"use strict";var _slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var r,n=[],i=e[Symbol.iterator]();!(r=i.next()).done&&(n.push(r.value),!t||n.length!==t););return n}throw new TypeError("Invalid attempt to destructure non-iterable instance")},_inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},_createComputedClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.configurable=!0,n.value&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};DIJS.bind("pb.trigger.Key.__service__.__ctor__",function(e){var t=e("pb.Events"),r=e("pb.service.Move"),n=Symbol("hoveredEls"),i=Symbol("onKeyPress"),o=function(){function e(){_classCallCheck(this,e),this[n]=new Map}return _createComputedClass(e,[{key:i,value:function(e){var t=String.fromCharCode(e.keyCode),i=null,o=!0,s=!1,a=void 0;try{for(var u,l=this[n][Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var c=_slicedToArray(u.value,2),y=c[0],f=c[1];!f.has(t)||i&&!i.contains(y)||(i=y)}}catch(v){s=!0,a=v}finally{try{!o&&l["return"]&&l["return"]()}finally{if(s)throw a}}if(i){var h=this[n].get(i).get(t),b=!0,g=!1,d=void 0;try{for(var p,_=h[Symbol.iterator]();!(b=(p=_.next()).done);b=!0){var m=p.value;m.trigger(i);break}}catch(v){g=!0,d=v}finally{try{!b&&_["return"]&&_["return"]()}finally{if(g)throw d}}var k=i.getBoundingClientRect();(r.movedElements.has(i)||k.left>r.mouseX||k.right<r.mouseX||k.top>r.mouseY||k.bottom<r.mouseY)&&this[n]["delete"](i)}}},{key:"init",value:function(e){t.of(e.body,this).on("dom","keypress",this[i].bind(this))}},{key:"add",value:function(e,t,r){this[n].has(e)||this[n].set(e,new Map);var i=this[n].get(e);i.get(t)||i.set(t,new Set),i.get(t).add(r)}},{key:"remove",value:function(e){this[n]["delete"](e)}},{key:"clear",value:function(){this[n].clear()}},{key:"hoveredEls",get:function(){return this[n]}}]),e}();return o}).bind("pb.trigger.Key.__service__",function(e){var t=e("pb.trigger.Key.__service__.__ctor__");return new t}).bind("pb.trigger.Key",function(e){var t=e("pb.$registry"),r=e("pb.Events"),n=(e("pb.service.Move"),e("pb.trigger.Key.__service__")),i=e("pb.trigger.Trigger"),o=e("pb.trigger.Triggers"),s=(Symbol(),Symbol("key")),a=Symbol(),u=Symbol("onMouseLeave"),l=function(e){function t(e){_classCallCheck(this,t),this[s]=e}return _inherits(t,e),_createComputedClass(t,[{key:a,value:function(e,t){n.add(t,this[s],e)}},{key:u,value:function(e){n.remove(e)}},{key:"on",value:function(e,t){r.of(e,this).on("dom","mouseenter",this[a].bind(this,t,e)).on("dom","mouseleave",this[u].bind(this,e)),e.classList.add("pb-key")}},{key:"off",value:function(e){r.of(e,this).off(),e.classList.remove("pb-key")}},{key:"toString",value:function(){return"key-"+this[s]}},{key:"helpText",get:function(){return this[s]}}]),t}(i);return o.register(function(e){return"key-"===e.substring(0,"key-".length)?new l(e.substring("key-".length)):void 0}),t.runAtRegister(function(e){n.init(e)}),l});</script>
</head><body></body></html>