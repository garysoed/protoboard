<html><head><base href="..">

<link rel="import" href="check.html">
<link rel="import" href="service/log.html">
<link rel="import" href="third_party/di.html">
<link rel="import" href="third_party/jquery.html">
<link rel="import" href="trigger/triggers.html">
<link rel="import" href="utils.html">

<script>"use strict";var _createClass=function(){function t(t,r){for(var i in r){var e=r[i];e.configurable=!0,e.value&&(e.writable=!0)}Object.defineProperties(t,r)}return function(r,i,e){return i&&t(r.prototype,i),e&&t(r,e),r}}(),_classCallCheck=function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")};DIJS.bind("CustomEvent",function(){return CustomEvent}).bind("pb.ability.Ability",function(t){var r=t("pb.$"),i=t("pb.Check"),e=t("CustomEvent"),n=t("pb.service.Log"),a=t("pb.trigger.Triggers"),s=Symbol(),o=Symbol("defaultTrigger"),u=Symbol("triggerMap"),g=function(){function t(r,i){_classCallCheck(this,t),this[s]=r,this[o]=i||null}return _createClass(t,{init:{value:function(t){void 0===r(t).attr(this.attrTrigger)&&this[o]&&r(t).attr(this.attrTrigger,this[o].toString()),this.updateConfig(t)}},updateConfig:{value:function(t){t[u]||(t[u]=new Map);var i=r(t).attr(this.attrTrigger);if(i&&(!t[u].has(this)||i!==t[u].get(this).toString())){t[u].has(this)&&t[u].get(this).off(t);var e=a.parse(r(t).attr(this.attrTrigger));e&&e.on(t,this),t[u].set(this,e)}}},trigger:{value:function(t){this.isEnabled(t)&&(n.log(this.attrName,r(t).attr("pb-id"),{phase:"before"}),this.doTrigger(t),t.dispatchEvent(new e(this.attrName,{detail:{ability:this}})),n.log(this.attrName,r(t).attr("pb-id"),{phase:"after"}))}},doTrigger:{value:function(t){throw new Error("Unimplemented")}},getTrigger:{value:function(t){return t[u]?t[u].get(this):null}},isEnabled:{value:function(t){return i(r(t).attr(this.attrName)).isBoolean().orUse(!1)}},attrName:{get:function(){return this[s]}},attrTrigger:{get:function(){return""+this[s]+"-on"}},defaultTrigger:{get:function(){return this[o]},set:function(t){this[o]=t}}}),t}();return g});</script>
</head><body></body></html>