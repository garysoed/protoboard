{"version":3,"file":"/Users/gsoed/proj/protoboard/main.js","sources":["@traceur/generated/TemplateParser/3","/Users/gsoed/proj/protoboard/src/utils.js","@traceur/generated/TemplateParser/4","@traceur/generated/TemplateParser/0","@traceur/generated/TemplateParser/2","@traceur/generated/TemplateParser/1","/Users/gsoed/proj/protoboard/src/ability/abilities.js","@traceur/generated/TemplateParser/5","/Users/gsoed/proj/protoboard/src/ability/ability.js","/Users/gsoed/proj/protoboard/src/as.js","/Users/gsoed/proj/protoboard/src/service/dragdrop.js","/Users/gsoed/proj/protoboard/src/ability/draggable.js","/Users/gsoed/proj/protoboard/src/pbelement.js","@traceur/generated/TemplateParser/8","@traceur/generated/TemplateParser/7","@traceur/generated/TemplateParser/10","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/6","/Users/gsoed/proj/protoboard/src/component/component.js","@traceur/generated/TemplateParser/11","/Users/gsoed/proj/protoboard/src/component/card.js","/Users/gsoed/proj/protoboard/src/component/token.js","/Users/gsoed/proj/protoboard/src/service/distribute.js","/Users/gsoed/proj/protoboard/src/region/region.js","/Users/gsoed/proj/protoboard/src/region/bank.js","/Users/gsoed/proj/protoboard/src/region/deck.js","/Users/gsoed/proj/protoboard/src/region/rect.js","/Users/gsoed/proj/protoboard/src/service/context.js","/Users/gsoed/proj/protoboard/src/service/preview.js","/Users/gsoed/proj/protoboard/src/service/modules.js","/Users/gsoed/proj/protoboard/src/surface/rectgrid.js","/Users/gsoed/proj/protoboard/src/ui/context.js","/Users/gsoed/proj/protoboard/src/ui/preview.js","/Users/gsoed/proj/protoboard/src/ui/previewer.js","/Users/gsoed/proj/protoboard/src/ui/template.js","@traceur/generated/TemplateParser/12"],"names":[],"mappings":";;AAAA,AAAI,IAAA,CAAA,YAAW,cAAoB,CAAC;ACMpC,AAAI,IAAA,CAAA,KAAI,EAAI;AASV,kBAAc,CAAd,UAAgB,aAAY,CAAG,CAAA,GAAE,CAAG;AAClC,WAAO,CAAA,IAAG,iBAAiB,AAAC,CAAC,GAAE,cAAc,AAAC,CAAC,aAAY,CAAC,CAAG,IAAE,CAAC,CAAC;IACrE;AAEA,mBAAe,CAAf,UAAiB,QAAO,CAAG,CAAA,GAAE,CAAG;AAC9B,WAAO,CAAA,GAAE,WAAW,AAAC,CAAC,QAAO,QAAQ,CAAG,KAAG,CAAC,CAAC;IAC/C;AAWA,YAAQ,CAAR,UAAU,KAAI,CAAG,CAAA,IAAG;AAClB,WAAO,CAAA,KAAI,CCjCG,eAAc,WAAW,AAAC,CDiC3B,IAAG,CCjC0C,CAAC,GDiCrC,GAAC,SAAA,AAAC,CAAK,GAAC,EAAC,CAAC;IAClC;AAcA,UAAM,CAAN,UAAQ,MAAK,CAAG,CAAA,QAAO,CAAG,CAAA,OAAM;AAC9B,AAAI,QAAA,CAAA,UAAS,EAAI,UAAS,OAAM;AAC9B,cAAM,QAAQ,AAAC,EAAC,SAAA,MAAK,CAAK;AACxB,aAAI,CAAC,QAAO,CAAA,EAAK,CAAA,MAAK,KAAK,IAAM,SAAO,CAAG;AACzC,kBAAM,AAAC,CAAC,MAAK,KAAK,CAAG,CAAA,MAAK,KAAK,CAAG,CAAA,MAAK,SAAS,CAAC,CAAC;UACpD;AAAA,QACF,EAAC,CAAC;MACJ,CAAC;AACD,WAAK,QAAQ,AAAC,CAAC,MAAK,CAAG,WAAS,CAAC,CAAC;AAClC,WAAO,QAAM,CAAC;IAChB;AAaA,UAAM,CAAN,UAAQ,MAAK,CAAG,CAAA,QAAO,CAAG,CAAA,SAAQ;AAChC,AAAI,QAAA,CAAA,OAAM,EAAI,IAAI,QAAM,AAAC,EAAC,SAAC,OAAM,CAAG,CAAA,MAAK;AACvC,AAAI,UAAA,CAAA,OAAM,EAAI,CAAA,CAAC,MAAO,UAAQ,CAAA,GAAM,WAAS,CAAC,EAC1C,UAAQ,IAAI,SAAA,CAAA;eAAK,CAAA,CAAA,IAAM,UAAQ;QAAA,CAAA,CAAC;AACpC,WAAI,OAAM,AAAC,CAAC,AC3ElB,MD2EuB,CC3EL,eAAc,WAAW,AAAC,CD2EnB,QAAO,CC3E8B,CAAC,CD2E7B,CAAG;AAC7B,gBAAM,AAAC,CAAC,MAAK,CAAG,SAAO,CAAC,CAAC;QAC3B,KAAO;AACL,AAAI,YAAA,CAAA,QAAO,IAAI,SAAC,OAAM;AACpB,eAAI,OAAM,AAAC,CAAC,AC/EtB,MD+E2B,CC/ET,eAAc,WAAW,AAAC,CD+Ef,QAAO,CC/E0B,CAAC,CD+EzB,CAAG;AAC7B,mBAAK,UAAU,AAAC,CAAC,MAAK,CAAG,SAAO,CAAC,CAAC;AAClC,oBAAM,AAAC,CAAC,MAAK,CAAG,SAAO,CAAC,CAAC;YAC3B;AAAA,UACF,CAAA,CAAC;AACD,eAAK,QAAQ,AAAC,CAAC,MAAK,CAAG,SAAO,CAAC,CAAC;QAClC;AAAA,MACF,EAAC,CAAC;AAEF,WAAO,QAAM,CAAC;IAChB;AAEA,UAAM,CAAN,UAAQ,CAAA,CAAG,CAAA,CAAA;AACT,SAAI,MAAO,EAAA,CAAA,GAAM,SAAO,CAAA,EAAK,CAAA,MAAO,EAAA,CAAA,GAAM,SAAO,CAAG;AAClD,WAAI,CAAA,EAAI,EAAA,CAAG;AACT,eAAO,EAAC,CAAA,CAAC;QACX,KAAO,KAAI,CAAA,EAAI,EAAA,CAAG;AAChB,eAAO,EAAA,CAAC;QACV,KAAO;AACL,eAAO,EAAA,CAAC;QACV;AAAA,MACF;AAAA,AAEA,WAAO,UAAQ,CAAC;IAClB;AAEA,UAAM,CAAN,UAAQ,GAAE;AACR,AAAI,QAAA,CAAA,KAAI,EAAI,GAAC,CAAC;AACd,iBAAa,EAAA,CAAG,CAAA,CAAA,EAAI,CAAA,GAAE,OAAO,CAAG,CAAA,CAAA,EAAE,CAAG;AACnC,YAAI,CC5GQ,eAAc,WAAW,AAAC,CD4GhC,CAAA,CC5GkD,CAAC,EAA/D,CD4GiB,GAAE,CC5GD,eAAc,WAAW,AAAC,CD4GvB,CAAA,CC5GyC,CD4GxC,AC5GyC,CD4GxC;MACnB;AAAA,AACA,WAAO,MAAI,CAAC;IACd;AASA,aAAS,CAAT,UAAW,SAAQ,CAAG,CAAA,MAAK;AACzB,AAAI,QAAA,CAAA,YAAW,EAAI,OAAK,CAAC;AACzB,AAAI,QAAA,CAAA,OAAM,EAAI,CAAA,SAAQ,MAAM,AAAC,CAAC,GAAE,CAAC,CAAC;AAClC,YAAM,QAAQ,AAAC,EAAC,SAAC,IAAG,CAAG,CAAA,CAAA;AACrB,WAAI,CAAA,IAAM,EAAC,OAAM,OAAO,EAAI,EAAA,CAAC,CAAG;AAC9B,aAAI,CAAC,AC7Hb,YD6HwB,CC7HN,eAAc,WAAW,AAAC,CD6HlB,IAAG,CC7HiC,CD6HhC,AC7HiC,CD6H9B;AACvB,uBAAW,CC9HH,eAAc,WAAW,AAAC,CD8HrB,IAAG,CC9HoC,CAAC,ED8HhC,OAAK,CAAC;UAC7B,KAAO;AACL,kBAAS,SAAQ,EAAC,kBAAgB,EAAC;UACrC;AAAA,QACF,KAAO;AACL,aAAI,CAAC,ACnIb,YDmIwB,CCnIN,eAAc,WAAW,AAAC,CDmIlB,IAAG,CCnIiC,CDmIhC,ACnIiC,CDmI9B;AACvB,uBAAW,CCpIH,eAAc,WAAW,AAAC,CDoIrB,IAAG,CCpIoC,CAAC,EDoIhC,GAAC,CAAC;UACzB;AAAA,QACF;AAAA,AACA,mBAAW,ECvIjB,CDuIqB,YAAW,CCvId,eAAc,WAAW,AAAC,CDuIV,IAAG,CCvIyB,CDuIxB,ACvIyB,CDuIxB;MACnC,EAAC,CAAC;IACJ;AAcA,WAAO,CAAP,UAAS,KAAI,CAAG,CAAA,IAAG,CAAG,CAAA,EAAC,CAAG,CAAA,UAAS;AACjC,AAAI,QAAA,CAAA,KAAI,ECxJZ,CDwJgB,KAAI,CCxJF,eAAc,WAAW,AAAC,CDwJtB,IAAG,CCxJqC,CDwJpC,ACxJqC,CDwJpC;AACvB,UAAI,CCzJU,eAAc,WAAW,AAAC,CDyJlC,IAAG,CCzJiD,CAAC,EDyJ7C,UAAQ,AAAC,CAAE;AACvB,WAAI,UAAS,CAAG;AACd,AAAI,YAAA,CAAA,EAAC,EAAI,CAAA,EAAC,MAAM,AAAC,CAAC,IAAG,CAAG,UAAQ,CAAC,CAAC;AAClC,aAAI,CAAC,KAAI,CAAG;AACV,iBAAO,GAAC,CAAC;UACX;AAAA,QACF;AAAA,AAEA,WAAI,KAAI,CAAG;AACT,AAAI,YAAA,CAAA,MAAC,EAAI,CAAA,KAAI,MAAM,AAAC,CAAC,IAAG,CAAG,UAAQ,CAAC,CAAC;AACrC,aAAI,UAAS,CAAG;AACd,yBAAS;UACX;AAAA,QACF;AAAA,AAEA,WAAI,CAAC,UAAS,CAAG;AACf,eAAO,CAAA,EAAC,MAAM,AAAC,CAAC,IAAG,CAAG,UAAQ,CAAC,CAAC;QAClC;AAAA,MACF,CAAC;IACH;AASA,QAAI,CAAJ,UAAM,EAAC,CAAG;AACR,WAAO,UAAQ,AAAC,CAAE;AAChB,WAAI,SAAQ,OAAO,GAAK,CAAA,EAAC,OAAO,CAAG;AACjC,eAAO,CAAA,EAAC,MAAM,AAAC,CAAC,IAAG,CAAG,UAAQ,CAAC,CAAC;QAClC,KAAO;AACL,AAAI,YAAA,CAAA,QAAO,EAAI,CAAA,KAAI,QAAQ,AAAC,CAAC,SAAQ,CAAC,CAAC;AACvC,eAAO,CAAA,KAAI,MAAM,AAAC,CAAC,EAAC,KAAK,MAAM,AAAC,CAAC,EAAC,CAAG,CAAA,CAAC,IAAG,CAAC,OAAO,AAAC,CAAC,QAAO,CAAC,CAAC,CAAC,CAAC;QAChE;AAAA,MACF,CAAC;IACH;AAAA,EACF,CAAC;AE/LD,AAAI,IAAA,CAAA,UAAS,EFiME,CAAA,KAAI,EAAI,MAAI,AEjMM,CAAA;AFmMjC,MAAI,WAAW,AAAC,CAAC,UAAS,CAAG,MAAI,CAAC,CAAC;AGnMnC,SCAA,aAAwB;AAAE,uBAAwB;IAAE,EDA7B;;;;AJAvB,AAAI,IAAA,CAAA,YAAW,0BAAoB,CAAC;IMA7B,MAAI;AASX,AAAM,IAAA,CAAA,SAAQ,EAAI,EAYhB,MAAK,CAAL,UAAO,IAAG,CAAG,CAAA,GAAE;;UACJ,KAAG;AAAU;AACpB,AAAI,YAAA,CAAA,OAAM,EAAI,CAAA,IAAG,CAAE,CAAA,CAAC,CAAC;AACrB,cAAI,SAAS,AAAC,CACV,IAAG,UAAU,CACb,kBAAgB,CAChB,UAAQ,AAAC;AACP,kBAAM,gBAAgB,KAAK,AAAC,CAAC,IAAG,CAAG,CAAA,IAAG,CAAE,CAAA,CAAC,CAAC,CAAC;UAC7C,CAAC,CAAC;AACN,cAAI,SAAS,AAAC,CACV,IAAG,UAAU,CACb,2BAAyB,CACzB,CAAA,OAAM,yBAAyB,CAAC,CAAC;AACrC,cAAI,SAAS,AAAC,CACV,IAAG,UAAU,CACb,mBAAiB,CACjB,CAAA,OAAM,iBAAiB,CAAC,CAAC;AAC7B,cAAI,SAAS,AAAC,CACV,IAAG,UAAU,CACb,mBAAiB,CACjB,CAAA,OAAM,iBAAiB,CACvB,KAAG,CAAkB,CAAC;QAC5B;;AC1CI,UAAS,GAAA,OACA,CDoBI,GAAE,CJtBL,eAAc,WAAW,AAAC,CKET,MAAK,SAAS,CLFa,CAAC,AKEZ,EAAC;AACnC,aAAgB,CACpB,EAAC,CAAC,MAAoB,CAAA,SAAqB,AAAC,EAAC,CAAC,KAAK;;MAGxD;ADqCJ,WAAO,KAAG,CAAC;IACb,CACF,CAAC;AH9CD,AAAI,IAAA,CAAA,UAAS,EGgDE,UAAQ,AHhDU,CAAA;AGkDjC,KAAI,AJlDJ,MIkDS,CJlDS,eAAc,WAAW,AAAC,CIkDjC,WAAU,CJlDyC,CAAC,CIkDtC;AACvB,QAAI,WAAW,AAAC,CAAC,sBAAqB,CAAG,UAAQ,CAAC,CAAC;EACrD;AAAA,AFpDA,SCAA,aAAwB;AAAE,uBAAwB;IAAE,EDA7B;;;;AJAvB,AAAI,IAAA,CAAA,YAAW,wBAAoB,CAAC;AQMpC,AAAM,IAAA,CAAA,OAAM,EAAI;AAQd,kBAAc,CAAd,UAAgB,YAAW,CAAG,GAAE;AAUhC,2BAAuB,CAAvB,UAAyB,IAAG,CAAG,CAAA,QAAO,CAAG,CAAA,QAAO,CAAG,GAAE;AAOrD,mBAAe,CAAf,UAAgB,AAAC,CAAE,GAAE;AAOrB,mBAAe,CAAf,UAAgB,AAAC,CAAE,GAAE;AAAA,EACvB,CAAC;ALvCD,AAAI,IAAA,CAAA,UAAS,EKyCE,QAAM,ALzCY,CAAA;ACAjC,SCAA,aAAwB;AAAE,uBAAwB;IAAE,EDA7B;;;;AJAvB,AAAI,IAAA,CAAA,YAAW,WAAoB,CAAC;ASApC,AAAI,IAAA,CAAA,EAAC,EAAI;AACP,MAAE,CAAF,UAAI,KAAI,AAAY;QAAT,MAAI,6CAAI,GAAC;AAClB,AAAI,QAAA,CAAA,MAAK,EAAI,CAAA,MAAK,SAAS,AAAC,CAAC,KAAI,CAAG,MAAI,CAAC,CAAC;AAC1C,SAAI,MAAK,MAAM,AAAC,CAAC,MAAK,CAAC,CAAG;AACxB,cAAS,KAAI,EAAC,iCAAgC,EAAC,MAAI,EAAG;MACxD;AAAA,AAEA,WAAO,OAAK,CAAC;IACf;AAEA,UAAM,CAAN,UAAQ,KAAI,CAAG;AACb,WAAO,CAAA,KAAI,YAAY,AAAC,EAAC,CAAA,GAAM,OAAK,CAAC;IACvC;AAAA,EACF,CAAC;ANbD,AAAI,IAAA,CAAA,UAAS,EMeE,CAAA,EAAC,EAAI,GAAC,ANfY,CAAA;AMiBjC,KAAI,CAAC,MAAK,GAAG,CAAG;AACd,SAAK,GAAG,EAAI,GAAC,CAAC;EAChB;AAAA,AAEA,OAAK,GAAG,GAAG,EAAI,GAAC,CAAC;ALrBjB,SCAA,aAAwB;AAAE,uBAAwB;IAAE,EDA7B;;;;AJAvB,AAAI,IAAA,CAAA,YAAW,yBAAoB,CAAC;IUA7B,MAAI;AAOX,AAAI,IAAA,CAAA,QAAO,EAAI;AAQb,gBAAY,CAAG,KAAG;AAQlB,YAAQ,CAAR,UAAU,SAAQ,CAAG;AACnB,SAAG,cAAc,EAAI,UAAQ,CAAC;IAChC;AAAA,EACF,CAAC;AP1BD,AAAI,IAAA,CAAA,UAAS,EO6BE,CAAA,QAAO,EAAI,SAAO,AP7BA,CAAA;AO+BjC,MAAI,WAAW,AAAC,CAAC,qBAAoB,CAAG,SAAO,CAAC,CAAC;AN/BjD,SCAA,aAAwB;AAAE,uBAAwB;IAAE,EDA7B;;;;AJAvB,AAAI,IAAA,CAAA,YAAW,0BAAoB,CAAC;IWA7B,GAAC;IACD,MAAI;IACJ,QAAM;IACN,gBAAc;AAMrB,AAAM,IAAA,CAAA,SAAQ,EAAI,eAAa,CAAC;AAEhC,AAAM,IAAA,CAAA,aAAY,EAAI,aAAW,CAAC;AAElC,AAAM,IAAA,CAAA,mBAAkB,EAAI,CAAA,MAAK,AAAC,EAAC,CAAC;AACpC,AAAM,IAAA,CAAA,iBAAgB,EAAI,CAAA,MAAK,AAAC,EAAC,CAAC;AAElC,SAAS,cAAY,CAAC,AAAC,CAAE;AACvB,OAAG,UAAU,OAAO,AAAC,CAAC,aAAY,CAAC,CAAC;EACtC;AAAA,AAEA,SAAS,gBAAc,CAAE,KAAI,CAAG;AAC9B,AAAI,MAAA,CAAA,YAAW,EAAI,CAAA,KAAI,aAAa,CAAC;AACrC,eAAW,cAAc,EAAI,OAAK,CAAC;AACnC,OAAG,UAAU,IAAI,AAAC,CAAC,aAAY,CAAC,CAAC;AAEjC,kBAAc,UAAU,AAAC,CAAC,IAAG,CAAC,CAAC;EACjC;AAAA,AAEA,SAAS,SAAO,CAAE,OAAM;AACtB,UAAM,CT7BU,eAAc,WAAW,AAAC,CS6BlC,mBAAkB,CT7BkC,CAAC,ES6B9B,CAAA,eAAc,KAAK,AAAC,CAAC,OAAM,CAAC,CAAC;AAC5D,UAAM,CT9BU,eAAc,WAAW,AAAC,CS8BlC,iBAAgB,CT9BoC,CAAC,ES8BhC,CAAA,aAAY,KAAK,AAAC,CAAC,OAAM,CAAC,CAAC;AAGxD,QAAI,QAAQ,AAAC,CAAC,OAAM,SAAS,CAAC,QAAQ,AAAC,EAAC,SAAA,KAAI;AAC1C,MAAA,AAAC,CAAC,KAAI,CAAC,KAAK,AAAC,CAAC,WAAU,CAAG,OAAK,CAAC,CAAC;AAClC,UAAI,iBAAiB,AAAC,CAAC,WAAU,CTnCrC,CSmCwC,OAAM,CTnC5B,eAAc,WAAW,AAAC,CSmCI,mBAAkB,CTnCJ,CAAC,CSmCK,CAAC;AACjE,UAAI,iBAAiB,AAAC,CAAC,SAAQ,CTpCnC,CSoCsC,OAAM,CTpC1B,eAAc,WAAW,AAAC,CSoCE,iBAAgB,CTpCA,CAAC,CSoCC,CAAC;IAC/D,EAAC,CAAC;EACJ;AAEA,SAAS,WAAS,CAAE,OAAM;AACxB,QAAI,QAAQ,AAAC,CAAC,OAAM,SAAS,CAAC,QAAQ,AAAC,EAAC,SAAA,KAAI;AAC1C,UAAI,oBAAoB,AAAC,CAAC,SAAQ,CT1CtC,CS0CyC,OAAM,CT1C7B,eAAc,WAAW,AAAC,CS0CK,iBAAgB,CT1CH,CAAC,CS0CI,CAAC;AAChE,UAAI,oBAAoB,AAAC,CAAC,WAAU,CT3CxC,CS2C2C,OAAM,CT3C/B,eAAc,WAAW,AAAC,CS2CO,mBAAkB,CT3CP,CAAC,CS2CQ,CAAC;AACpE,MAAA,AAAC,CAAC,KAAI,CAAC,KAAK,AAAC,CAAC,WAAU,CAAG,KAAG,CAAC,CAAC;IAClC,EAAC,CAAC;EACJ;AAWA,AAAI,IAAA,CAAA,SAAQ,EAAI,CAAA,MAAK,OAAO,AAAC,CAAC,OAAM,CAAG;AAQrC,kBAAc,CAAG,EACf,KAAI,CAAJ,UAAM,YAAW,CAAG;AAClB,WAAI,CAAA,AAAC,CAAC,IAAG,CAAC,KAAK,AAAC,CAAC,SAAQ,CAAC,CAAA,GAAM,UAAQ,CAAG;AACzC,UAAA,AAAC,CAAC,IAAG,CAAC,KAAK,AAAC,CAAC,SAAQ,CAAG,aAAW,CAAC,CAAC;QACvC;AAAA,MACF,CACF;AAUA,2BAAuB,CAAG,EACxB,KAAI,CAAJ,UAAM,IAAG,CAAG,CAAA,QAAO,CAAG,CAAA,QAAO,CAAG;AAC9B,WAAI,IAAG,IAAM,UAAQ,CAAG;AACtB,iBAAO,EAAI,CAAA,EAAC,QAAQ,AAAC,CAAC,QAAO,CAAC,CAAC;AAC/B,aAAI,QAAO,CAAG;AACZ,mBAAO,AAAC,CAAC,IAAG,CAAC,CAAC;UAChB,KAAO;AACL,qBAAS,AAAC,CAAC,IAAG,CAAC,CAAC;UAClB;AAAA,QACF;AAAA,MACF,CACF;AAOA,mBAAe,CAAG,EAChB,KAAI,CAAJ,UAAK,AAAC,CAAE;AACN,WAAI,CAAA,AAAC,CAAC,IAAG,CAAC,KAAK,AAAC,CAAC,SAAQ,CAAC,CAAA,EAAK,CAAA,EAAC,QAAQ,AAAC,CAAC,CAAA,AAAC,CAAC,IAAG,CAAC,KAAK,AAAC,CAAC,SAAQ,CAAC,CAAC,CAAG;AAClE,iBAAO,AAAC,CAAC,IAAG,CAAC,CAAC;QAChB;AAAA,MACF,CACF;AAOA,mBAAe,CAAG,EAChB,KAAI,CAAJ,UAAK,AAAC,CAAE;AACN,iBAAS,AAAC,CAAC,IAAG,CAAC,CAAC;MAClB,CACF;AAAA,EACF,CAAC,CAAC;ARrHF,AAAI,IAAA,CAAA,UAAS,EQuHE,CAAA,SAAQ,EAAI,UAAQ,ARvHF,CAAA;AQyHjC,KAAI,ATzHJ,MSyHS,CTzHS,eAAc,WAAW,AAAC,CSyHjC,WAAU,CTzHyC,CAAC,CSyHtC;AACvB,QAAI,WAAW,AAAC,CAAC,sBAAqB,CAAG,UAAQ,CAAC,CAAC;EACrD;AAAA,AP3HA,SCAA,aAAwB;AAAE,uBAAwB;IAAE,EDA7B;;;;AJAvB,AAAI,IAAA,CAAA,YAAW,wBAAoB,CAAC;;;AIApC,WAAuB;;;;AJAvB,AAAI,IAAA,CAAA,YAAW,kBAAoB,CAAC;IYA7B,MAAI;ACAX,AAAI,IAAA,YDQW,SAAM,UAAQ;AER7B,kBAAc,iBAAiB,AAAC,CAAC,IAAG,CACpB,qBAA0B,CAAG,UAAQ,CAAC,CAAA;EFwBtD,ACzBwC,CAAA;AEAxC,AAAI,IAAA,uBAAoC,CAAA;ACAxC,EAAC,eAAc,YAAY,CAAC,AAAC;AJU3B,kBAAc,CAAd,UAAe,AAAC,CAAE;AAOhB,SAAG,UAAU,EAAI,MAAI,CAAC;IACxB;AAEA,mBAAe,CAAf,UAAgB,AAAC,CAAE;AACjB,SAAG,UAAU,EAAI,KAAG,CAAC;IACvB;AAEA,mBAAe,CAAf,UAAgB,AAAC,CAAE,GAAE;AAAA,OAhBgB,YAAU,CIPO;ACDxD,AAAI,IAAA,CAAA,UAAS,YAAoB,CAAA;AL2BjC,MAAI,WAAW,AAAC,CAAC,cAAa,CAAG,UAAQ,CAAC,CAAC;AR3B3C,SCAA,aAAwB;AAAE,uBAAwB;IAAE,EDA7B;;;;AJAvB,AAAI,IAAA,CAAA,YAAW,4BAAoB,CAAC;IkBA7B,MAAI;IACJ,gBAAc;IACd,UAAQ;ALFf,AAAI,IAAA,YKYW,SAAM,UAAQ,CAKhB,AAAC,CAAE,GAAE,ALjBsB,CAAA;AEAxC,AAAI,IAAA,uBAAoC,CAAA;ACAxC,EAAC,eAAc,YAAY,CAAC,AAAC,aEmB3B,eAAc,CAAd,UAAe,AAAC,CAAE;AAChB,ACpBJ,oBAAc,UAAU,AAAC,mDAC2B,CDmBzB;IACzB,MATqC,UAAQ,CFXS;ACDxD,AAAI,IAAA,CAAA,UAAS,YAAoB,CAAA;ACwBjC,KAAI,MAAK,UAAU,CAAG;AACpB,QAAI,WAAW,AAAC,CAAC,wBAAuB,CAAG,UAAQ,CAAC,CAAC;EACvD;AAAA,Ad1BA,SCAA,aAAwB;AAAE,uBAAwB;IAAE,EDA7B;;;;AJAvB,AAAI,IAAA,CAAA,YAAW,uBAAoB,CAAC;IoBA7B,GAAC;IACD,UAAQ;IACR,MAAI;IACJ,UAAQ;IACR,UAAQ;AAEf,AAAI,IAAA,CAAA,GAAE,EAAI,KAAG,CAAC;AACd,AAAI,IAAA,CAAA,QAAO,EAAI,KAAG,CAAC;AAEnB,AAAM,IAAA,CAAA,OAAM,EAAI,YAAU,CAAC;AAC3B,AAAM,IAAA,CAAA,eAAc,EAAI,gBAAc,CAAC;AAEvC,SAAS,YAAU,CAAC,AAAC,CAAE;AACrB,AAAI,MAAA,CAAA,QAAO,EAAI,CAAA,EAAC,QAAQ,AAAC,CAAC,CAAA,AAAC,CAAC,IAAG,CAAC,KAAK,AAAC,CAAC,eAAc,CAAC,CAAA,EAAK,QAAM,CAAC,CAAC;AACnE,IAAA,AAAC,CAAC,IAAG,CAAC,KAAK,AAAC,CAAC,eAAc,CAAG,EAAC,QAAO,CAAC,CAAC;EAC1C;AAAA,APfI,IAAA,OO4BW,SAAM,KAAG;AN5BxB,kBAAc,iBAAiB,AAAC,CAAC,IAAG,CACpB,gBAA0B,CAAG,UAAQ,CAAC,CAAA;EMuEtD,APxEwC,CAAA;AEAxC,AAAI,IAAA,aAAoC,CAAA;ACAxC,EAAC,eAAc,YAAY,CAAC,AAAC;AI8B3B,kBAAc,CAAd,UAAe,AAAC,CAAE;AAChB,AD/BJ,oBAAc,UAAU,AAAC,8CAC2B,CC8BzB;AACvB,SAAG,iBAAiB,AAAC,EAAC,YACP,AAAC,CAAC,KAAI,iBAAiB,AAAC,CAAC,QAAO,CAAG,IAAE,CAAC,CAAC,CAAC;AAEvD,SAAG,iBAAiB,AAAC,EAAC,CAAC;IACzB;AAEA,mBAAe,CAAf,UAAgB,AAAC,CAAE;AACjB,ADvCJ,oBAAc,UAAU,AAAC,+CAC2B,CCsCxB;AACxB,SAAG,iBAAiB,AAAC,CAAC,OAAM,CAAG,YAAU,CAAC,CAAC;IAC7C;AAEA,mBAAe,CAAf,UAAgB,AAAC,CAAE;AACjB,SAAG,oBAAoB,AAAC,CAAC,OAAM,CAAG,YAAU,CAAC,CAAC;AAC9C,AD7CJ,oBAAc,UAAU,AAAC,+CAC2B,CC4CxB;IAC1B;AAAA,KAUO,QAAO,CAAd,UAAgB,UAAS,CAAG,CAAA,YAAW,CAAG;AACxC,SAAI,GAAE,GAAK,SAAO,CAAG;AAEnB,cAAM;MACR;AAAA,AAEA,QAAE,EAAI,WAAS,CAAC;AAChB,aAAO,EAAI,aAAW,CAAC;AACvB,aAAO,gBAAgB,AAAC,CAAC,OAAM,CAAI,EACjC,SAAQ,CAAG,CAAA,SAAQ,OAAO,AAAC,OAEvB,IAAI,IAAE,AAAC,CAAC,CACN,CAAC,SAAQ,CAAG,OAAK,CAAC,CACpB,CAAC,CAAC,UAAU,CAClB,CAAC,CAAC;IACJ,EA3CgC,UAAQ,CJ3Bc;ACDxD,AAAI,IAAA,CAAA,UAAS,OAAoB,CAAA;AG0EjC,MAAI,WAAW,AAAC,CAAC,mBAAkB,CAAG,KAAG,CAAC,CAAC;AhB1E3C,SCAA,aAAwB;AAAE,uBAAwB;IAAE,EDA7B;;;;AJAvB,AAAI,IAAA,CAAA,YAAW,wBAAoB,CAAC;IqBA7B,UAAQ;IACR,MAAI;IACJ,UAAQ;IACR,UAAQ;AAEf,AAAI,IAAA,CAAA,GAAE,EAAI,KAAG,CAAC;AACd,AAAI,IAAA,CAAA,QAAO,EAAI,KAAG,CAAC;AAEnB,AAAM,IAAA,CAAA,OAAM,EAAI,aAAW,CAAC;ARR5B,AAAI,IAAA,QQsBW,SAAM,MAAI;APtBzB,kBAAc,iBAAiB,AAAC,CAAC,IAAG,CACpB,iBAA0B,CAAG,UAAQ,CAAC,CAAA;EOoDtD,ARrDwC,CAAA;AEAxC,AAAI,IAAA,eAAoC,CAAA;ACAxC,EAAC,eAAc,YAAY,CAAC,AAAC,SKwB3B,eAAc,CAAd,UAAe,AAAC,CAAE;AAChB,AFzBJ,oBAAc,UAAU,AAAC,+CAC2B,CEwBzB;AACvB,SAAG,iBAAiB,AAAC,EAAC,YAAY,AAAC,CAAC,KAAI,iBAAiB,AAAC,CAAC,QAAO,CAAG,IAAE,CAAC,CAAC,CAAC;IAC5E,IAUO,QAAO,CAAd,UAAgB,UAAS,CAAG,CAAA,aAAY,CAAG;AACzC,SAAI,GAAE,GAAK,SAAO,CAAG;AAEnB,cAAM;MACR;AAAA,AAEA,QAAE,EAAI,WAAS,CAAC;AAChB,aAAO,EAAI,cAAY,CAAC;AACxB,aAAO,gBAAgB,AAAC,CAAC,OAAM,CAAG,EAChC,SAAQ,CAAG,CAAA,SAAQ,OAAO,AAAC,QAEvB,IAAI,IAAE,AAAC,CAAC,CACN,CAAC,SAAQ,CAAG,OAAK,CAAC,CACpB,CAAC,CAAC,CACR,CAAC,CAAC;IACJ,EA9BiC,UAAQ,CLrBa;ACDxD,AAAI,IAAA,CAAA,UAAS,QAAoB,CAAA;AIuDjC,MAAI,WAAW,AAAC,CAAC,oBAAmB,CAAG,MAAI,CAAC,CAAC;AjBvD7C,SCAA,aAAwB;AAAE,uBAAwB;IAAE,EDA7B;;;;AJAvB,AAAI,IAAA,CAAA,YAAW,0BAAoB,CAAC;;;AIApC,WAAuB;;;;AJAvB,AAAI,IAAA,CAAA,YAAW,2BAAoB,CAAC;IsBA7B,MAAI;AAEX,AAAI,IAAA,CAAA,MAAK,EAAI,KAAG,CAAC;AAEjB,AAAM,IAAA,CAAA,gBAAe,EAAI,gBAAc,CAAC;AAQxC,AAAI,IAAA,CAAA,UAAS,EAAI;AAQf,QAAI,CAAJ,UAAM,gBAAe,CAAG;AACtB,SAAI,CAAC,IAAG,SAAS,AAAC,EAAC,CAAG;AACpB,aAAK,EAAI,iBAAe,CAAC;AACzB,uBAAe,UAAU,IAAI,AAAC,CAAC,gBAAe,CAAC,CAAC;AAChD,QAAA,AAAC,CAAC,IAAG,CAAC,QAAQ,AAAC,CAAC,IAAG,UAAU,MAAM,CAAC,CAAC;MACvC;AAAA,IACF;AAOA,MAAE,CAAF,UAAG,AAAC,CAAE;AACJ,SAAI,IAAG,SAAS,AAAC,EAAC,CAAG;AACnB,aAAK,UAAU,OAAO,AAAC,CAAC,gBAAe,CAAC,CAAC;AACzC,aAAK,EAAI,KAAG,CAAC;AACb,QAAA,AAAC,CAAC,IAAG,CAAC,QAAQ,AAAC,CAAC,IAAG,UAAU,IAAI,CAAC,CAAC;MACrC;AAAA,IACF;AAMA,WAAO,CAAP,UAAQ,AAAC,CAAE;AACT,WAAO,CAAA,MAAK,IAAM,KAAG,CAAC;IACxB;AAMA,OAAG,CAAH,UAAI,AAAC,CAAE;AACL,WAAO,CAAA,MAAK,KAAK,AAAC,EAAC,CAAC;IACtB;AAEA,YAAQ,CAAG;AAOT,UAAI,CAAG,mBAAiB;AAQxB,QAAE,CAAG,iBAAe;AAAA,IACtB;AAAA,EACF,CAAC;AAED,EAAA,AAAC,CAAC,MAAK,CAAC,GAAG,AAAC,CAAC,SAAQ,GAAG,SAAA,KAAI,CAAK;AAE/B,OAAI,KAAI,MAAM,IAAM,GAAC,CAAA,EAAK,CAAA,UAAS,SAAS,AAAC,EAAC,CAAG;AAC/C,eAAS,IAAI,AAAC,EAAC,CAAC;IAClB;AAAA,EACF,EAAC,CAAC;AnBjFF,AAAI,IAAA,CAAA,UAAS,EmBmFE,CAAA,UAAS,EAAI,WAAS,AnBnFJ,CAAA;AmBqFjC,MAAI,WAAW,AAAC,CAAC,uBAAsB,CAAG,WAAS,CAAC,CAAC;AlBrFrD,SCAA,aAAwB;AAAE,uBAAwB;IAAE,EDA7B;;;;AJAvB,AAAI,IAAA,CAAA,YAAW,sBAAoB,CAAC;IuBA7B,WAAS;IACT,SAAO;IACP,UAAQ;IACR,MAAI;AAEX,AAAM,IAAA,CAAA,gBAAe,EAAI,gBAAc,CAAC;AACxC,AAAM,IAAA,CAAA,UAAS,EAAI,UAAQ,CAAC;AAE5B,AAAM,IAAA,CAAA,eAAc,EAAI,CAAA,MAAK,AAAC,EAAC,CAAC;AAEhC,SAAS,eAAa,CAAE,KAAI,CAAG;AAE7B,QAAI,eAAe,AAAC,EAAC,CAAC;AACtB,QAAI,WAAW,EAAI,OAAK,CAAC;EAC3B;AAAA,AAEA,SAAS,gBAAc,CAAE,CAAA;AACvB,OAAG,UAAU,IAAI,AAAC,CAAC,UAAS,CAAC,CAAC;AAC9B,OAAG,CrBlBa,eAAc,WAAW,AAAC,CqBkBrC,eAAc,CrBlByC,CAAC,EqBkBvC,CAAC;EACzB;AAEA,SAAS,gBAAc,CAAE,CAAA;AACvB,OAAG,CrBtBa,eAAc,WAAW,AAAC,CqBsBrC,eAAc,CrBtByC,CAAC,EqBsBvC,CAAC;AACvB,OAAI,IAAG,CrBvBS,eAAc,WAAW,AAAC,CqBuBjC,eAAc,CrBvBqC,CAAC,GqBuBhC,EAAA,CAAG;AAC9B,SAAG,UAAU,OAAO,AAAC,CAAC,UAAS,CAAC,CAAC;AACjC,SAAG,CrBzBW,eAAc,WAAW,AAAC,CqByBnC,eAAc,CrBzBuC,CAAC,EqByBnC,EAAA,CAAC;IAC3B;AAAA,EACF;AAEA,SAAS,WAAS,CAAC,AAAC,CAAE;AACpB,OAAG,UAAU,OAAO,AAAC,CAAC,UAAS,CAAC,CAAC;AACjC,OAAG,YAAY,AAAC,CAAC,QAAO,cAAc,CAAC,CAAC;AACxC,WAAO,cAAc,EAAI,KAAG,CAAC;EAC/B;AAAA,AAEA,SAAS,YAAU,CAAC,AAAC,CAAE;AACrB,OAAI,UAAS,SAAS,AAAC,EAAC,CAAA,EAAK,CAAA,UAAS,KAAK,AAAC,EAAC,CAAG;AAC9C,SAAG,YAAY,AAAC,CAAC,UAAS,KAAK,AAAC,EAAC,CAAC,CAAC;IACrC;AAAA,EACF;AAAA,AAEA,SAAS,sBAAoB,CAAC,AAAC,CAAE;AAC/B,OAAI,IAAG,WAAW,CAAG;AACnB,SAAG,WAAW,cAAc,AAAC,CAAC,OAAM,CAAC,UAAU,IAAI,AAAC,CAAC,gBAAe,CAAC,CAAC;IACxE;AAAA,EACF;AAAA,AAEA,SAAS,oBAAkB,CAAC,AAAC,CAAE;AAC7B,OAAI,IAAG,WAAW,CAAG;AACnB,SAAG,WAAW,cAAc,AAAC,CAAC,OAAM,CAAC,UAAU,OAAO,AAAC,CAAC,gBAAe,CAAC,CAAC;IAC3E;AAAA,EACF;AAAA,AAEA,SAAS,0BAAwB,CAAC,AAAC;AACjC,OAAI,CAAC,QAAO,cAAc,CAAG;AAC3B,SAAG,UAAU,OAAO,AAAC,CAAC,UAAS,CAAC,CAAC;AACjC,SAAG,CrBxDW,eAAc,WAAW,AAAC,CqBwDnC,eAAc,CrBxDuC,CAAC,EqBwDnC,EAAA,CAAC;IAC3B;AAAA,EACF;AV1DA,AAAI,IAAA,SUiEW,SAAM,OAAK,CAGb,AAAC,CAAE,GAAE,AVpEsB,CAAA;AEAxC,AAAI,IAAA,iBAAoC,CAAA;ACAxC,EAAC,eAAc,YAAY,CAAC,AAAC;AOsE3B,kBAAc,CAAd,UAAe,AAAC;AACd,AJvEJ,oBAAc,UAAU,AAAC,gDAC2B,CIsEzB;AACvB,SAAG,CrBxEW,eAAc,WAAW,AAAC,CqBwEnC,eAAc,CrBxEuC,CAAC,EqBwEnC,EAAA,CAAC;IAC3B;AAEA,mBAAe,CAAf,UAAgB,AAAC,CAAE;AACjB,AJ5EJ,oBAAc,UAAU,AAAC,iDAC2B,CI2ExB;AACxB,SAAG,iBAAiB,AAAC,CAAC,UAAS,CAAG,eAAa,CAAC,CAAC;AACjD,SAAG,iBAAiB,AAAC,CAAC,WAAU,CAAG,gBAAc,CAAC,CAAC;AACnD,SAAG,iBAAiB,AAAC,CAAC,WAAU,CAAG,gBAAc,CAAC,CAAC;AACnD,SAAG,iBAAiB,AAAC,CAAC,MAAK,CAAG,WAAS,CAAC,CAAC;AACzC,SAAG,iBAAiB,AAAC,CAAC,OAAM,CAAG,YAAU,CAAC,CAAC;AAE3C,MAAA,AAAC,CAAC,UAAS,CAAC,GACN,AAAC,CAAC,UAAS,UAAU,MAAM,CAAG,CAAA,qBAAoB,KAAK,AAAC,CAAC,IAAG,CAAC,CAAC,GAC9D,AAAC,CAAC,UAAS,UAAU,IAAI,CAAG,CAAA,mBAAkB,KAAK,AAAC,CAAC,IAAG,CAAC,CAAC,CAAC;AAEjE,UAAI,QAAQ,AAAC,CAAC,QAAO,CAAG,gBAAc,CAAG,CAAA,yBAAwB,KAAK,AAAC,CAAC,IAAG,CAAC,CAAC,CAAC;IAChF;AAAA,OAvBkC,UAAQ,CPhEY;ACDxD,AAAI,IAAA,CAAA,UAAS,SAAoB,CAAA;AM2GjC,OAAK,eAAe,EAAI,eAAa,CAAC;AAEtC,KAAI,MAAK,UAAU,CAAG;AACpB,QAAI,WAAW,AAAC,CAAC,kBAAiB,CAAG,OAAK,CAAC,CAAC;EAC9C;AAAA,AnB/GA,SCAA,aAAwB;AAAE,uBAAwB;IAAE,EDA7B;;;;AJAvB,AAAI,IAAA,CAAA,YAAW,oBAAoB,CAAC;IwBA7B,OAAK;IACL,WAAS;IACT,MAAI;AAEX,AAAI,IAAA,CAAA,GAAE,EAAI,KAAG,CAAC;AACd,AAAI,IAAA,CAAA,QAAO,EAAI,KAAG,CAAC;AAEnB,AAAM,IAAA,CAAA,OAAM,EAAI,YAAU,CAAC;AAQ3B,SAAS,sBAAoB,CAAE,KAAI,CAAG;AACpC,OAAG,WAAW,AAAC,EAAC,CAAC;AACjB,QAAI,gBAAgB,AAAC,EAAC,CAAC;EACzB;AAAA,AXlBI,IAAA,OW8BJ,SAAM,KAAG,CACI,AAAC,CAAE;AACZ,ALhCJ,kBAAc,UAAU,AAAC,0CAC2B,CK+BzC;EACT,AXjCsC,CAAA;AEAxC,AAAI,IAAA,aAAoC,CAAA;ACAxC,EAAC,eAAc,YAAY,CAAC,AAAC;AQmC3B,kBAAc,CAAd,UAAe,AAAC,CAAE;AAChB,ALpCJ,oBAAc,UAAU,AAAC,8CAC2B,CKmCzB;AACvB,SAAG,iBAAiB,AAAC,EAAC,YAAY,AAAC,CAAC,KAAI,iBAAiB,AAAC,CAAC,QAAO,CAAG,IAAE,CAAC,CAAC,CAAC;AAE1E,SAAG,WAAW,cAAc,AAAC,CAAC,aAAY,CAAC,iBACvB,AAAC,CAAC,OAAM,CAAG,CAAA,qBAAoB,KAAK,AAAC,CAAC,IAAG,CAAC,CAAC,CAAC;IAClE;AAMA,aAAS,CAAT,UAAU,AAAC,CAAE;AACX,eAAS,MAAM,AAAC,CAAC,IAAG,CAAC,CAAC;IACxB;AAMA,OAAG,CAAH,UAAI,AAAC;AACH,WAAO,CAAA,IAAG,SAAS,CAAE,CAAA,CAAC,CAAC;IACzB;KAUO,QAAO,CAAd,UAAgB,UAAS,CAAG,CAAA,YAAW,CAAG;AACxC,SAAI,GAAE,GAAK,SAAO,CAAG;AAEnB,cAAM;MACR;AAAA,AAEA,QAAE,EAAI,WAAS,CAAC;AAChB,aAAO,EAAI,aAAW,CAAC;AACvB,aAAO,gBAAgB,AAAC,CAAC,OAAM,CAAG,EAAC,SAAQ,CAAG,gBAAa,CAAC,CAAC,CAAC;IAChE,EA9CiB,OAAK,CR7BgC;AbDxD,AAAI,IAAA,CAAA,UAAS,EqB+EE,CAAA,IAAG,EAAI,KAAG,ArB/EQ,CAAA;AqBiFjC,MAAI,WAAW,AAAC,CAAC,gBAAe,CAAG,KAAG,CAAC,CAAC;ApBjFxC,SCAA,aAAwB;AAAE,uBAAwB;IAAE,EDA7B;;;;AJAvB,AAAI,IAAA,CAAA,YAAW,oBAAoB,CAAC;IyBA7B,OAAK;IACL,MAAI;AAEX,AAAI,IAAA,CAAA,GAAE,EAAI,KAAG,CAAC;AACd,AAAI,IAAA,CAAA,QAAO,EAAI,KAAG,CAAC;AAEnB,AAAM,IAAA,CAAA,OAAM,EAAI,YAAU,CAAC;AZN3B,AAAI,IAAA,OYeJ,SAAM,KAAG,CACI,AAAC,CAAE;AACZ,ANjBJ,kBAAc,UAAU,AAAC,0CAC2B,CMgBzC;EACT,AZlBsC,CAAA;AEAxC,AAAI,IAAA,aAAoC,CAAA;ACAxC,EAAC,eAAc,YAAY,CAAC,AAAC;ASoB3B,kBAAc,CAAd,UAAe,AAAC,CAAE;AAChB,ANrBJ,oBAAc,UAAU,AAAC,8CAC2B,CMoBzB;AACvB,SAAG,iBAAiB,AAAC,EAAC,YAAY,AAAC,CAAC,KAAI,iBAAiB,AAAC,CAAC,QAAO,CAAG,IAAE,CAAC,CAAC,CAAC;AAC1E,SAAG,iBAAiB,AAAC,EAAC,CAAC;IACzB;AAEA,mBAAe,CAAf,UAAgB,AAAC,CAAE;AACjB,AN3BJ,oBAAc,UAAU,AAAC,+CAC2B,CM0BxB;AACxB,SAAG,WAAW,cACG,AAAC,CAAC,UAAS,CAAC,iBACT,AAAC,CAAC,OAAM,CAAG,CAAA,IAAG,QAAQ,KAAK,AAAC,CAAC,IAAG,CAAC,CAAC,CAAC;IACzD;AAOA,UAAM,CAAN,UAAO,AAAC;;AACN,AAAI,QAAA,CAAA,KAAI,EAAI,CAAA,KAAI,QAAQ,AAAC,CAAC,IAAG,SAAS,CAAC,IAAI,AAAC,EAAC,SAAA,KAAI;aAAK,EAAC,KAAI,CAAG,CAAA,IAAG,OAAO,AAAC,EAAC,CAAC;MAAA,EAAC,CAAC;AAC7E,UAAI,KAAK,AAAC,EAAC,SAAC,CAAA,CAAG,CAAA,CAAA;aAAM,CAAA,KAAI,QAAQ,AAAC,CAAC,CAAA,CAAE,CAAA,CAAC,CAAG,CAAA,CAAA,CAAE,CAAA,CAAC,CAAC;MAAA,EAAC,CAAC;AAC/C,AAAI,QAAA,CAAA,QAAO,EAAI,CAAA,KAAI,IAAI,AAAC,EAAC,SAAA,IAAG;aAAK,CAAA,IAAG,CAAE,CAAA,CAAC;MAAA,EAAC,CAAC;AACzC,aAAO,QAAQ,AAAC,CAAC,EAAC,SAAA,EAAC;aAAK,CAAA,gBAAe,AAAC,CAAC,EAAC,CAAC;MAAA,EAAC,KAAK,AAAC,CAAC,IAAG,CAAC,CAAC,CAAC;IAC3D;KAUO,QAAO,CAAd,UAAgB,UAAS,CAAG,CAAA,YAAW,CAAG;AACxC,SAAI,GAAE,GAAK,SAAO,CAAG;AAEnB,cAAM;MACR;AAAA,AAEA,QAAE,EAAI,WAAS,CAAC;AAChB,aAAO,EAAI,aAAW,CAAC;AACvB,aAAO,gBAAgB,AAAC,CAAC,OAAM,CAAG,EAAC,SAAQ,CAAG,gBAAa,CAAC,CAAC,CAAC;IAChE,EA/CiB,OAAK,CTdgC;AbDxD,AAAI,IAAA,CAAA,UAAS,EsBiEE,CAAA,IAAG,EAAI,KAAG,AtBjEQ,CAAA;AsBmEjC,MAAI,WAAW,AAAC,CAAC,gBAAe,CAAG,KAAG,CAAC,CAAC;ArBnExC,SCAA,aAAwB;AAAE,uBAAwB;IAAE,EDA7B;;;;AJAvB,AAAI,IAAA,CAAA,YAAW,oBAAoB,CAAC;I0BA7B,OAAK;IACL,MAAI;AAEX,AAAI,IAAA,CAAA,GAAE,EAAI,KAAG,CAAC;AACd,AAAI,IAAA,CAAA,QAAO,EAAI,KAAG,CAAC;AAEnB,AAAM,IAAA,CAAA,OAAM,EAAI,YAAU,CAAC;AbN3B,AAAI,IAAA,OacJ,SAAM,KAAG,CACI,AAAC,CAAE;AACZ,APhBJ,kBAAc,UAAU,AAAC,0CAC2B,COezC;EACT,AbjBsC,CAAA;AEAxC,AAAI,IAAA,aAAoC,CAAA;ACAxC,EAAC,eAAc,YAAY,CAAC,AAAC,QUmB3B,eAAc,CAAd,UAAe,AAAC,CAAE;AAChB,APpBJ,oBAAc,UAAU,AAAC,8CAC2B,COmBzB;AACvB,SAAG,iBAAiB,AAAC,EAAC,YAAY,AAAC,CAAC,KAAI,iBAAiB,AAAC,CAAC,QAAO,CAAG,IAAE,CAAC,CAAC,CAAC;IAC5E,IAUO,QAAO,CAAd,UAAgB,UAAS,CAAG,CAAA,YAAW,CAAG;AACxC,SAAI,GAAE,GAAK,SAAO,CAAG;AAEnB,cAAM;MACR;AAAA,AAEA,QAAE,EAAI,WAAS,CAAC;AAChB,aAAO,EAAI,aAAW,CAAC;AACvB,aAAO,gBAAgB,AAAC,CAAC,OAAM,CAAI,EAAC,SAAQ,CAAG,gBAAa,CAAC,CAAC,CAAC;IACjE,EA3BiB,OAAK,CVbgC;AbDxD,AAAI,IAAA,CAAA,UAAS,EuB4CE,CAAA,IAAG,EAAI,KAAG,AvB5CQ,CAAA;AuB8CjC,MAAI,WAAW,AAAC,CAAC,gBAAe,CAAG,KAAG,CAAC,CAAC;AtB9CxC,SCAA,aAAwB;AAAE,uBAAwB;IAAE,EDA7B;;;;AJAvB,AAAI,IAAA,CAAA,YAAW,uBAAoB,CAAC;;;;AIApC,WAAuB;;;;AJAvB,AAAI,IAAA,CAAA,YAAW,wBAAoB,CAAC;I2BA7B,MAAI;AAEX,AAAI,IAAA,CAAA,aAAY,EAAI,KAAG,CAAC;AAQxB,AAAI,IAAA,CAAA,OAAM,EAAI;AAQZ,YAAQ,CAAR,UAAU,MAAK,CAAG;AAChB,kBAAY,EAAI,OAAK,CAAC;AACtB,MAAA,AAAC,CAAC,IAAG,CAAC,QAAQ,AAAC,CAAC,IAAG,UAAU,SAAS,CAAC,CAAC;IAC1C;AAMA,YAAQ,CAAR,UAAS,AAAC,CAAE;AACV,WAAO,cAAY,CAAC;IACtB;AAEA,YAAQ,CAAG,EAOT,QAAO,CAAG,mBAAiB,CAC7B;AAAA,EACF,CAAC;AxBxCD,AAAI,IAAA,CAAA,UAAS,EwB0CE,CAAA,OAAM,EAAI,QAAM,AxB1CE,CAAA;AwB4CjC,MAAI,WAAW,AAAC,CAAC,oBAAmB,CAAG,QAAM,CAAC,CAAC;AvB5C/C,SCAA,aAAwB;AAAE,uBAAwB;IAAE,EDA7B;;;;AJAvB,AAAI,IAAA,CAAA,YAAW,wBAAoB,CAAC;I4BA7B,MAAI;AAQX,AAAI,IAAA,CAAA,OAAM,EAAI,EAQZ,WAAU,CAAG,KAAG,CAClB,CAAC;AzBjBD,AAAI,IAAA,CAAA,UAAS,EyBmBE,CAAA,OAAM,EAAI,QAAM,AzBnBE,CAAA;AyBqBjC,MAAI,WAAW,AAAC,CAAC,oBAAmB,CAAG,QAAM,CAAC,CAAC;AxBrB/C,SCAA,aAAwB;AAAE,uBAAwB;IAAE,EDA7B;;;;AJAvB,AAAI,IAAA,CAAA,YAAW,wBAAoB,CAAC;I6BA7B,QAAM;IACN,WAAS;IACT,SAAO;IACP,QAAM;AzBHb,WAAuB;;;;AJAvB,AAAI,IAAA,CAAA,YAAW,yBAAoB,CAAC;I8BA7B,GAAC;IACD,MAAI;IACJ,UAAQ;AAEf,AAAI,IAAA,CAAA,GAAE,EAAI,KAAG,CAAC;AACd,AAAI,IAAA,CAAA,SAAQ,EAAI,KAAG,CAAC;AAEpB,AAAM,IAAA,CAAA,QAAO,EAAI,SAAO,CAAC;AACzB,AAAM,IAAA,CAAA,QAAO,EAAI,SAAO,CAAC;AACzB,AAAM,IAAA,CAAA,OAAM,EAAI,gBAAc,CAAC;AjBT/B,AAAI,IAAA,WiBqBW,SAAM,SAAO;AhBrB5B,kBAAc,iBAAiB,AAAC,CAAC,IAAG,CACpB,oBAA0B,CAAG,UAAQ,CAAC,CAAA;EgB2FtD,AjB5FwC,CAAA;AEAxC,AAAI,IAAA,qBAAoC,CAAA;ACAxC,EAAC,eAAc,YAAY,CAAC,AAAC;AcsB3B,kBAAc,CAAd,UAAe,AAAC;AACd,AXvBJ,oBAAc,UAAU,AAAC,kDAC2B,CWsBzB;AAGvB,SAAG,iBAAiB,AAAC,EAAC,YACP,AAAC,CAAC,KAAI,iBAAiB,AAAC,CAAC,SAAQ,KAAK,CAAG,IAAE,CAAC,CAAC,CAAC;AAG7D,AAAI,QAAA,CAAA,QAAO,EAAI,CAAA,EAAC,IAAI,AAAC,CAAC,CAAA,AAAC,CAAC,IAAG,CAAC,KAAK,AAAC,CAAC,QAAO,CAAC,CAAC,CAAC;AAC7C,AAAI,QAAA,CAAA,QAAO,EAAI,CAAA,EAAC,IAAI,AAAC,CAAC,CAAA,AAAC,CAAC,IAAG,CAAC,KAAK,AAAC,CAAC,QAAO,CAAC,CAAC,CAAC;AAC7C,AAAI,QAAA,CAAA,MAAK,EAAI,CAAA,IAAG,WAAW,cAAc,AAAC,CAAC,UAAS,CAAC,CAAC;AAGtD,mBAAe,EAAA,CAAG,CAAA,GAAE,EAAI,SAAO,CAAG,CAAA,GAAE,EAAE,CAAG;AACvC,aAAK,YAAY,AAAC,CAAC,KAAI,iBAAiB,AAAC,CAAC,SAAQ,IAAI,CAAG,IAAE,CAAC,CAAC,CAAC;MAChE;AAAA,AAEA,MAAA,AAAC,CAAC,IAAG,WAAW,iBAAiB,AAAC,CAAC,gBAAe,CAAC,CAAC,KAC5C,AAAC,EAAC,SAAC,GAAE,CAAG,CAAA,KAAI,CAAM;AACpB,qBAAe,EAAA,CAAG,CAAA,GAAE,EAAI,SAAO,CAAG,CAAA,GAAE,EAAE,CAAG;AACvC,AAAI,YAAA,CAAA,KAAI,EAAI,CAAA,KAAI,iBAAiB,AAAC,CAAC,SAAQ,IAAI,CAAG,IAAE,CAAC,CAAC;AACtD,UAAA,AAAC,CAAC,KAAI,cAAc,AAAC,CAAC,SAAQ,CAAC,CAAC,KACxB,AAAC,CAAC,QAAO,GAAG,GAAG,EAAC,SAAO,EAAC,MAAI,EAAC,IAAE,EAAC,OAAK,EAAC,SAAO,EAAC,MAAI,EAAC,IAAE,EAAC,MAAG,EAAC,KAC1D,AAAC,CAAC,QAAO,CAAG,IAAE,CAAC,KACf,AAAC,CAAC,QAAO,CAAG,IAAE,CAAC,CAAC;AACxB,cAAI,YAAY,AAAC,CAAC,KAAI,CAAC,CAAC;QAC1B;AAAA,MACF,EAAC,CAAC;IACR;AAEA,mBAAe,CAAf,UAAgB,AAAC,CAAE;AACjB,AXrDJ,oBAAc,UAAU,AAAC,mDAC2B,CWoDxB;IAC1B;AASA,MAAE,CAAF,UAAI,GAAE,CAAG,CAAA,GAAE;AACT,AAAI,QAAA,CAAA,SAAQ,EAAI,CAAA,IAAG,WAAW,cACb,AAAC,EAAC,UAAU,EAAC,SAAO,EAAC,MAAI,EAAC,IAAE,EAAC,OAAK,EAAC,SAAO,EAAC,MAAI,EAAC,IAAE,EAAC,MAAG,EAAC,CAAC;AACzE,WAAO,CAAA,SAAQ,EAAI,CAAA,SAAQ,oBAAoB,AAAC,EAAC,CAAE,CAAA,CAAC,EAAI,KAAG,CAAC;IAC9D;KAcO,QAAO,CAAd,UAAgB,UAAS,CAAG,CAAA,aAAY,CAAG;AACzC,SAAI,GAAE,GAAK,UAAQ,CAAG;AAEpB,cAAM;MACR;AAAA,AAEA,QAAE,EAAI,WAAS,CAAC;AAChB,cAAQ,EAAI,cAAY,CAAC;AAEzB,aAAO,gBAAgB,AAAC,CAAC,OAAM,CAAG,EAAC,SAAQ,CAAG,oBAAiB,CAAC,CAAC,CAAC;IACpE,EAtEoC,UAAQ,CdpBU;ACDxD,AAAI,IAAA,CAAA,UAAS,WAAoB,CAAA;Aa8FjC,MAAI,WAAW,AAAC,CAAC,qBAAoB,CAAG,SAAO,CAAC,CAAC;A1B9FjD,SCAA,aAAwB;AAAE,uBAAwB;IAAE,EDA7B;;;;AJAvB,AAAI,IAAA,CAAA,YAAW,wBAAoB,CAAC;;AIApC,WAAuB;;;;AJAvB,AAAI,IAAA,CAAA,YAAW,mBAAoB,CAAC;I+BA7B,MAAI;IACJ,eAAa;AAEpB,AAAI,IAAA,CAAA,QAAO,EAAI,KAAG,CAAC;AACnB,AAAI,IAAA,CAAA,GAAE,EAAI,KAAG,CAAC;AAEd,AAAI,IAAA,CAAA,OAAM,EAAI,eAAa,CAAC;AAE5B,AAAI,IAAA,CAAA,WAAU,EAAI,QAAM,CAAC;AAUzB,SAAS,kBAAgB,CAAE,KAAI,CAAG;AAChC,OAAG,KAAK,AAAC,CAAC,KAAI,EAAE,CAAG,CAAA,KAAI,EAAE,CAAC,CAAC;AAC3B,QAAI,eAAe,AAAC,EAAC,CAAC;EACxB;AAAA,AASA,SAAS,YAAU,CAAE,KAAI,CAAG;AAC1B,OAAI,CAAC,IAAG,SAAS,AAAC,CAAC,KAAI,OAAO,CAAC,CAAG;AAChC,SAAG,KAAK,AAAC,EAAC,CAAC;IACb;AAAA,EACF;AAAA,AAEA,SAAS,sBAAoB,CAAC,AAAC,CAAE;AAC/B,OAAI,cAAa,UAAU,AAAC,EAAC,CAAA,GAAM,KAAG,CAAG;AACvC,SAAG,KAAK,AAAC,EAAC,CAAC;IACb;AAAA,EACF;AAAA,AlBxCI,IAAA,UkBmDJ,SAAM,QAAM,CACC,AAAC,CAAE,GAAC,AlBpDuB,CAAA;AEAxC,AAAI,IAAA,mBAAoC,CAAA;ACAxC,EAAC,eAAc,YAAY,CAAC,AAAC;AesD3B,kBAAc,CAAd,UAAe,AAAC,CAAE;AAChB,SAAG,iBAAiB,AAAC,EAAC,YACP,AAAC,CAAC,KAAI,iBAAiB,AAAC,CAAC,QAAO,CAAG,IAAE,CAAC,CAAC,CAAC;AACvD,SAAG,iBAAiB,AAAC,EAAC,CAAC;IACzB;AAEA,mBAAe,CAAf,UAAgB,AAAC,CAAE;AACjB,SAAI,IAAG,cAAc,CAAG;AACtB,WAAG,cAAc,iBAAiB,AAAC,CAAC,aAAY,CAAG,CAAA,iBAAgB,KAAK,AAAC,CAAC,IAAG,CAAC,CAAC,CAAC;MAClF;AAAA,AACA,aAAO,iBAAiB,AAAC,CAAC,OAAM,CAAG,CAAA,WAAU,KAAK,AAAC,CAAC,IAAG,CAAC,CAAC,CAAC;AAC1D,MAAA,AAAC,CAAC,cAAa,CAAC,GAAG,AAAC,CAAC,cAAa,UAAU,SAAS,CAAG,CAAA,qBAAoB,KAAK,AAAC,CAAC,IAAG,CAAC,CAAC,CAAC;IAC3F;AAUA,OAAG,CAAH,UAAK,MAAK,CAAG,CAAA,MAAK;AAChB,AAAI,QAAA,CAAA,MAAK,EAAI,CAAA,IAAG,WAAW,cAAc,AAAC,CAAC,OAAM,CAAC,CAAC;AACnD,WAAK,UAAU,IAAI,AAAC,CAAC,WAAU,CAAC,CAAC;AAGjC,AAAI,QAAA,CAAA,CAAA,EAAI,KAAG,CAAC;AACZ,AAAI,QAAA,CAAA,OAAM,EAAI,KAAG,CAAC;AAClB,AAAI,QAAA,CAAA,UAAS,EAAI,CAAA,IAAG,cAAc,gBAAgB,CAAC;AACnD,SAAI,MAAK,EAAI,CAAA,MAAK,YAAY,CAAA,CAAI,CAAA,UAAS,YAAY,CAAG;AACxD,cAAM,EAAI,QAAM,CAAC;AACjB,QAAA,EAAI,CAAA,UAAS,YAAY,EAAI,OAAK,CAAC;MACrC,KAAO;AACL,cAAM,EAAI,OAAK,CAAC;AAChB,QAAA,EAAI,OAAK,CAAC;MACZ;AAAA,AAEI,QAAA,CAAA,CAAA,EAAI,KAAG,CAAC;AACZ,AAAI,QAAA,CAAA,OAAM,EAAI,KAAG,CAAC;AAClB,SAAI,MAAK,EAAI,CAAA,MAAK,aAAa,CAAA,CAAI,CAAA,UAAS,aAAa,CAAG;AAC1D,cAAM,EAAI,SAAO,CAAC;AAClB,QAAA,EAAI,CAAA,UAAS,aAAa,EAAI,OAAK,CAAC;MACtC,KAAO;AACL,cAAM,EAAI,MAAI,CAAC;AACf,QAAA,EAAI,OAAK,CAAC;MACZ;AAAA,AAEA,SAAG,MAAM,SAAS,EAAI,QAAM,CAAC;AAG7B,SAAG,MAAM,IAAI,EAAI,GAAC,CAAC;AACnB,SAAG,MAAM,KAAK,EAAI,GAAC,CAAC;AACpB,SAAG,MAAM,MAAM,EAAI,GAAC,CAAC;AACrB,SAAG,MAAM,OAAO,EAAI,GAAC,CAAC;AAEtB,SAAG,MAAM,C7B9GK,eAAc,WAAW,AAAC,C6B8G7B,OAAM,C7B9GyC,CAAC,I6B8GlC,CAAA,EAAC,KAAG,CAAA,CAAC;AAC9B,SAAG,MAAM,C7B/GK,eAAc,WAAW,AAAC,C6B+G7B,OAAM,C7B/GyC,CAAC,I6B+GlC,CAAA,EAAC,KAAG,CAAA,CAAC;AAE9B,mBAAa,UAAU,AAAC,CAAC,IAAG,CAAC,CAAC;IAChC;AAOA,OAAG,CAAH,UAAI,AAAC,CAAE;AACL,SAAG,WAAW,cAAc,AAAC,CAAC,OAAM,CAAC,UAAU,OAAO,AAAC,CAAC,WAAU,CAAC,CAAC;IACtE;AAAA,KAUO,QAAO,CAAd,UAAgB,UAAS,CAAG,CAAA,eAAc,CAAG;AAC3C,SAAI,GAAE,GAAK,SAAO,CAAG;AAEnB,cAAM;MACR;AAAA,AAEA,QAAE,EAAI,WAAS,CAAC;AAChB,aAAO,EAAI,gBAAc,CAAC;AAE1B,aAAO,gBAAgB,AAAC,CAAC,OAAM,CAAG,EAAE,SAAQ,CAAG,mBAAgB,CAAE,CAAC,CAAC;IACrE,EA5FoB,YAAU,CflDwB;AbDxD,AAAI,IAAA,CAAA,UAAS,E4BkJE,CAAA,OAAM,EAAI,QAAM,A5BlJE,CAAA;A4BoJjC,MAAI,WAAW,AAAC,CAAC,eAAc,CAAG,QAAM,CAAC,CAAC;A3BpJ1C,SCAA,aAAwB;AAAE,uBAAwB;IAAE,EDA7B;;;;AJAvB,AAAI,IAAA,CAAA,YAAW,mBAAoB,CAAC;IgCA7B,UAAQ;IACR,MAAI;IACJ,eAAa;AAUpB,AAAI,IAAA,CAAA,UAAS,EAAI,MAAI,CAAC;AAEtB,AAAM,IAAA,CAAA,OAAM,EAAI,eAAa,CAAC;AAE9B,AAAM,IAAA,CAAA,iBAAgB,EAAI,CAAA,MAAK,AAAC,EAAC,CAAC;AAClC,AAAM,IAAA,CAAA,gBAAe,EAAI,CAAA,MAAK,AAAC,EAAC,CAAC;AAEjC,SAAS,gBAAc,CAAC,AAAC,CAAE;AACzB,iBAAa,YAAY,EAAI,KAAG,CAAC;EACnC;AAAA,AAEA,SAAS,eAAa,CAAE,CAAA,CAAG;AACzB,iBAAa,YAAY,EAAI,KAAG,CAAC;EACnC;AAAA,AnBzBI,IAAA,UmB2BW,SAAM,QAAM;AlB3B3B,kBAAc,iBAAiB,AAAC,CAAC,IAAG,CACpB,mBAA0B,CAAG,UAAQ,CAAC,CAAA;EkBiEtD,AnBlEwC,CAAA;AEAxC,AAAI,IAAA,mBAAoC,CAAA;ACAxC,EAAC,eAAc,YAAY,CAAC,AAAC;AgB4B3B,kBAAc,CAAd,UAAe,AAAC;AACd,Ab7BJ,oBAAc,UAAU,AAAC,iDAC2B,Ca4BzB;AACvB,SAAG,iBAAiB,AAAC,EAAC,CAAC;AAGvB,SAAG,C9BjCW,eAAc,WAAW,AAAC,C8BiCnC,iBAAgB,C9BjCqC,CAAC,E8BiCjC,CAAA,eAAc,KAAK,AAAC,CAAC,IAAG,CAAC,CAAC;AACpD,SAAG,C9BlCW,eAAc,WAAW,AAAC,C8BkCnC,gBAAe,C9BlCsC,CAAC,E8BkClC,CAAA,cAAa,KAAK,AAAC,CAAC,IAAG,CAAC,CAAC;AAElD,SAAG,iBAAiB,AAAC,EAAC,CAAC;IACzB;AAEA,mBAAe,CAAf,UAAgB,AAAC;AACf,AbxCJ,oBAAc,UAAU,AAAC,kDAC2B,CauCxB;AACxB,SAAI,IAAG,cAAc,CAAG;AACtB,WAAG,cAAc,iBAAiB,AAAC,CAAC,YAAW,C9B1CrD,C8B0CwD,IAAG,C9B1CzC,eAAc,WAAW,AAAC,C8B0CiB,iBAAgB,C9B1Cf,CAAC,C8B0CgB,CAAC;AAC1E,WAAG,cAAc,iBAAiB,AAAC,CAAC,YAAW,C9B3CrD,C8B2CwD,IAAG,C9B3CzC,eAAc,WAAW,AAAC,C8B2CiB,gBAAe,C9B3Cd,CAAC,C8B2Ce,CAAC;MAC3E;AAAA,IACF;AAEA,mBAAe,CAAf,UAAgB,AAAC;AACf,SAAI,IAAG,cAAc,CAAG;AACtB,WAAG,cAAc,oBAAoB,AAAC,CAAC,YAAW,C9BjDxD,C8BiD2D,IAAG,C9BjD5C,eAAc,WAAW,AAAC,C8BiDoB,iBAAgB,C9BjDlB,CAAC,C8BiDmB,CAAC;AAC7E,WAAG,cAAc,oBAAoB,AAAC,CAAC,YAAW,C9BlDxD,C8BkD2D,IAAG,C9BlD5C,eAAc,WAAW,AAAC,C8BkDoB,gBAAe,C9BlDjB,CAAC,C8BkDkB,CAAC;MAC9E;AAAA,AbnDJ,oBAAc,UAAU,AAAC,kDAC2B,CamDxB;IAC1B;KAQO,QAAO,CAAd,UAAe,AAAC,CAAE;AAChB,SAAI,CAAC,UAAS,CAAG;AACf,eAAO,gBAAgB,AAAC,CAAC,OAAM,CAAG,EAAC,SAAQ,CAAG,mBAAgB,CAAC,CAAC,CAAC;MACnE;AAAA,IACF,EAtCmC,UAAQ,ChB1BW;ACDxD,AAAI,IAAA,CAAA,UAAS,UAAoB,CAAA;AeoEjC,MAAI,WAAW,AAAC,CAAC,eAAc,CAAG,QAAM,CAAC,CAAC;A5BpE1C,SCAA,aAAwB;AAAE,uBAAwB;IAAE,EDA7B;;;;AJAvB,AAAI,IAAA,CAAA,YAAW,qBAAoB,CAAC;IiCA7B,UAAQ;IACR,MAAI;IACJ,eAAa;AAWpB,AAAI,IAAA,CAAA,QAAO,EAAI,KAAG,CAAC;AACnB,AAAI,IAAA,CAAA,GAAE,EAAI,KAAG,CAAC;AAEd,AAAM,IAAA,CAAA,iBAAgB,EAAI,CAAA,MAAK,AAAC,EAAC,CAAC;AAElC,AAAM,IAAA,CAAA,OAAM,EAAI,iBAAe,CAAC;AAEhC,SAAS,gBAAc,CAAC,AAAC,CAAE;AACzB,OAAI,cAAa,YAAY,CAAG;AAC9B,SAAG,UAAU,EAAI,CAAA,cAAa,YAAY,UAAU,CAAC;IACvD,KAAO;AACL,SAAG,UAAU,EAAI,GAAC,CAAC;IACrB;AAAA,EACF;AAAA,ApB1BI,IAAA,YoB4BW,SAAM,UAAQ;AnB5B7B,kBAAc,iBAAiB,AAAC,CAAC,IAAG,CACpB,qBAA0B,CAAG,UAAQ,CAAC,CAAA;EmBiEtD,ApBlEwC,CAAA;AEAxC,AAAI,IAAA,uBAAoC,CAAA;ACAxC,EAAC,eAAc,YAAY,CAAC,AAAC;AiB6B3B,kBAAc,CAAd,UAAe,AAAC,CAAE;AAChB,Ad9BJ,oBAAc,UAAU,AAAC,mDAC2B,Cc6BzB;AACvB,SAAG,iBAAiB,AAAC,EAAC,YACP,AAAC,CAAC,KAAI,iBAAiB,AAAC,CAAC,QAAO,CAAG,IAAE,CAAC,CAAC,CAAC;AAEvD,SAAG,iBAAiB,AAAC,EAAC,CAAC;IACzB;AAEA,mBAAe,CAAf,UAAgB,AAAC;AACf,AdtCJ,oBAAc,UAAU,AAAC,oDAC2B,CcqCxB;AACxB,SAAG,C/BvCW,eAAc,WAAW,AAAC,C+BuCnC,iBAAgB,C/BvCqC,CAAC,E+BuCjC,CAAA,KAAI,QAAQ,AAAC,CACnC,cAAa,CACb,cAAY,CACZ,CAAA,eAAc,KAAK,AAAC,CAAC,IAAG,CAAC,CAAC,CAAC;IACjC;AAEA,mBAAe,CAAf,UAAgB,AAAC;AACf,WAAK,UAAU,AAAC,CAAC,cAAa,C/B9ClC,C+B8CqC,IAAG,C/B9CtB,eAAc,WAAW,AAAC,C+B8CF,iBAAgB,C/B9CI,CAAC,C+B8CH,CAAC;AACzD,Ad/CJ,oBAAc,UAAU,AAAC,oDAC2B,Cc8CxB;IAC1B;KAUO,QAAO,CAAd,UAAgB,UAAS,CAAG,CAAA,iBAAgB,CAAG;AAC7C,SAAI,CAAC,QAAO,CAAA,EAAK,EAAC,GAAE,CAAG;AACrB,eAAO,gBAAgB,AAAC,CAAC,OAAM,CAAG,EAAC,SAAQ,CAAG,qBAAkB,CAAC,CAAC,CAAC;MACrE;AAAA,AAEA,aAAO,EAAI,kBAAgB,CAAC;AAC5B,QAAE,EAAI,WAAS,CAAC;IAClB,EArCqC,UAAQ,CjB3BS;ACDxD,AAAI,IAAA,CAAA,UAAS,YAAoB,CAAA;AgBoEjC,MAAI,WAAW,AAAC,CAAC,iBAAgB,CAAG,UAAQ,CAAC,CAAC;A7BpE9C,SCAA,aAAwB;AAAE,uBAAwB;IAAE,EDA7B;;;;AJAvB,AAAI,IAAA,CAAA,YAAW,oBAAoB,CAAC;IkCA7B,MAAI;IACJ,UAAQ;IACR,GAAC;AAER,AAAI,IAAA,CAAA,GAAE,EAAI,KAAG,CAAC;AACd,AAAI,IAAA,CAAA,UAAS,EAAI,KAAG,CAAC;AAErB,AAAM,IAAA,CAAA,OAAM,EAAI,gBAAc,CAAC;ArBP/B,AAAI,IAAA,WqBqBW,SAAM,SAAO,CACf,AAAC,CAAE;AACZ,AfvBJ,kBAAc,UAAU,AAAC,8CAC2B,CesBzC;EACT,ArBxBsC,CAAA;AEAxC,AAAI,IAAA,qBAAoC,CAAA;ACAxC,EAAC,eAAc,YAAY,CAAC,AAAC,YkB0B3B,eAAc,CAAd,UAAe,AAAC;AACd,Af3BJ,oBAAc,UAAU,AAAC,kDAC2B,Ce0BzB;AACvB,AAAI,QAAA,CAAA,WAAU,EAAI,CAAA,IAAG,UAAU,CAAC;AAChC,AAAI,QAAA,CAAA,IAAG,EAAI,GAAC,CAAC;AACb,oBAAgB,CAAA,IAAG,QAAQ;AC9B/B,WAAI,CAAC,eAAc,eAAe,AAAC,KAAkB,CD8BnB;AAC5B,AAAI,YAAA,CAAA,QAAO,EhC/BjB,CgC+BqB,IAAG,QAAQ,ChC/Bd,eAAc,WAAW,AAAC,CgC+BV,GAAE,ChC/B0B,CgC+BzB,AhC/B0B,CgC+BzB;AAChC,aAAG,ChChCS,eAAc,WAAW,AAAC,CgCgCjC,GAAE,ChChCiD,CAAC,EgCgC7C,CAAA,MAAK,ChChCL,eAAc,WAAW,AAAC,CgCgCnB,QAAO,ChChC8B,CAAC,GgCgCzB,SAAO,CAAC;QAC1C;AACA,AClCoE,MDkCpE,AAAC,CAAC,IAAG,CAAC,YAAY,AAAC,CAAC,UAAS,QAAQ,AAAC,CAAC,IAAG,UAAU,CAAC,AAAC,CAAC,IAAG,CAAC,CAAC,CAAC;IAC/D,IAUO,QAAO,CAAd,UAAgB,UAAS,CAAG,CAAA,cAAa,CAAG;AAC1C,SAAI,CAAC,GAAE,CAAA,EAAK,EAAC,UAAS,CAAG;AAEvB,eAAO,gBAAgB,AAAC,CAAC,OAAM,CAAG,EAAC,SAAQ,CAAG,oBAAiB,CAAC,CAAC,CAAC;MACpE;AAAA,AAEA,QAAE,EAAI,WAAS,CAAC;AAChB,eAAS,EAAI,eAAa,CAAC;AAE3B,eAAS,eAAe,AAAC,CAAC,QAAO,CAAG,UAAS,IAAG,CAAG,CAAA,EAAC,CAAG,CAAA,IAAG,CAAG,CAAA,OAAM,CAAG;AACpE,WAAI,OAAM,IAAM,UAAQ,CAAG;AAEzB,gBAAM,EAAI,KAAG,CAAC;AACd,aAAG,EAAI,EAAA,CAAC;QACV;AAAA,AACI,UAAA,CAAA,EAAC,EAAI,GAAC,CAAC;AACX,mBAAa,CAAA,EAAC,IAAI,AAAC,CAAC,IAAG,CAAC,CAAG,CAAA,CAAA,EAAI,CAAA,EAAC,IAAI,AAAC,CAAC,EAAC,CAAC,CAAG,CAAA,CAAA,GAAK,CAAA,EAAC,IAAI,AAAC,CAAC,IAAG,CAAC,CAAG;AAC5D,AAAI,YAAA,CAAA,IAAG,EAAI,CAAA,UAAS,YAAY,AAAC,CAAC,OAAM,KAAK,GAAK,GAAC,CAAC,CAAC;AACrD,aAAG,MAAM,EAAI,EAAA,CAAC;AACd,WAAC,GAAK,CAAA,OAAM,GAAG,AAAC,CAAC,IAAG,CAAG,EAAE,IAAG,CAAG,KAAG,CAAE,CAAC,CAAC;QACxC;AAAA,AACA,aAAO,GAAC,CAAC;MACX,CAAC,CAAC;IACJ,EA/CoC,UAAQ,ClBpBU;ACDxD,AAAI,IAAA,CAAA,UAAS,WAAoB,CAAA;AiBuEjC,MAAI,WAAW,AAAC,CAAC,gBAAe,CAAG,SAAO,CAAC,CAAC;A9BvE5C,SCAA,aAAwB;AAAE,uBAAwB;IAAE,EDA7B;;;;AJAvB,AAAI,IAAA,CAAA,YAAW,mBAAoB,CAAC;;;;;AIApC,WAAuB;;;;AJAvB,AAAI,IAAA,CAAA,YAAW,gBAAoB,CAAC;;;;;;;;AIApC,WAAuB","sourceRoot":"/Users/gsoed/proj/protoboard/","sourcesContent":["var __moduleName = $__placeholder__0;","/**\n * Various miscellaneous utilities.\n * @class Utils\n * @static\n */\n\nvar Utils = {\n  /**\n   * Extracts the given template from the given document.\n   * \n   * @method  extractTemplate\n   * @param  {string} templateQuery The query used to obtain the template.\n   * @param  {!Document} doc The document object to obtain the template from.\n   * @return {!Node} The node in the template.\n   */\n  extractTemplate(templateQuery, doc) {\n    return this.activateTemplate(doc.querySelector(templateQuery), doc);\n  },\n\n  activateTemplate(template, doc) {\n    return doc.importNode(template.content, true);\n  },\n\n  /**\n   * Returns the referenced function, or noop function if the referenced function does not exist.\n   * \n   * @method  nonNullFn\n   * @param  {!Object} scope Object containing the referenced function.\n   * @param  {string} name Name of the function to return.\n   * @return {!Function} The referenced function, or noop function if the referenced function does\n   *     not exist.\n   */\n  nonNullFn(scope, name) {\n    return scope[name] || (() => {});\n  },\n\n  /**\n   * Observes the given property on the given object.\n   * \n   * @method  observe\n   * @param {!Object} object Object to observe changes to.\n   * @param {string|null} property The property name to listen to, or null to listen to all \n   *     properties.\n   * @param {Function} handler Handler called when a property has changed. The handler accepts 3\n   *     arguments: property name, change type, and the old value of the property.\n   *\n   * @return {Function} The handler used to unobserve the object.\n   */\n  observe(object, property, handler) {\n    var newHandler = function(changes) {\n      changes.forEach(change => {\n        if (!property || change.name === property) {\n          handler(change.name, change.type, change.oldValue);\n        }\n      });\n    };\n    Object.observe(object, newHandler);\n    return handler;\n  },\n\n  /**\n   * Returns a Promise that waits for the given property of the given object to fulfill the given \n   * condition.\n   *\n   * @method waitFor\n   * @param {!Object} object Object containing the property to wait for.\n   * @param {string} property The name of the property to wait for.\n   * @param {*} condition If Function, this method will call the function with the property value\n   *     and will wait for the function to return true. Otherwise, this will wait for the property\n   *     to match this.\n   */\n  waitFor(object, property, condition) {\n    let promise = new Promise((resolve, reject) => {\n      let truthFn = (typeof condition === 'function') ? \n          condition : v => v === condition;\n      if (truthFn(object[property])) {\n        resolve(object, property);\n      } else {\n        let observer = (changes) => {\n          if (truthFn(object[property])) {\n            Object.unobserve(object, observer);\n            resolve(object, property);\n          }\n        };\n        Object.observe(object, observer);\n      }\n    });\n\n    return promise;\n  },\n\n  compare(a, b) {\n    if (typeof a === 'number' && typeof b === 'number') {\n      if (a < b) {\n        return -1;\n      } else if (a > b) {\n        return 1;\n      } else {\n        return 0;\n      }\n    }\n\n    return undefined;\n  },\n\n  toArray(obj) {\n    let array = [];\n    for (let i = 0; i < obj.length; i++) {\n      array[i] = obj[i];\n    }\n    return array;\n  },\n\n  /**\n   * Makes the given target to be globally available.\n   *\n   * @method makeGlobal\n   * @param {string} namespace The namespace of the target. This should be separated by '.'.\n   * @param {Object=} target The target object to be made globally available.\n   */\n  makeGlobal(namespace, target) {\n    let currentScope = window;\n    let pathArr = namespace.split('.');\n    pathArr.forEach((path, i) => {\n      if (i === (pathArr.length - 1)) {\n        if (!currentScope[path]) {\n          currentScope[path] = target;\n        } else {\n          throw `${namespace} already exists`; \n        }\n      } else {\n        if (!currentScope[path]) {\n          currentScope[path] = {};\n        }\n      }\n      currentScope = currentScope[path];\n    });\n  },\n\n  /**\n   * Replaces the specified function to call the given function before or after the original \n   * function. The given function will be called with the same arguments and scope as the original\n   * function.\n   *\n   * @method extendFn\n   * @param {Object} scope The object containing the function to replace.\n   * @param {string} name The name of the function to replace.\n   * @param {!Function} fn Function to be called.\n   * @param {boolean} callBefore True iff the function should be called before the original \n   *     function. Defaults to false.\n   */\n  extendFn(scope, name, fn, callBefore) {\n    let oldFn = scope[name];\n    scope[name] = function() {\n      if (callBefore) {\n        let rv = fn.apply(this, arguments);\n        if (!oldFn) {\n          return rv;\n        }\n      }\n\n      if (oldFn) {\n        let rv = oldFn.apply(this, arguments);\n        if (callBefore) {\n          return rv;\n        }\n      }\n\n      if (!callBefore) {\n        return fn.apply(this, arguments);\n      }\n    };\n  },\n\n  /**\n   * Makes the given function curried.\n   *\n   * @method curry\n   * @param {!Function} fn The function to be curried.\n   * @return {!Function} The curried function.\n   */\n  curry(fn) {\n    return function() {\n      if (arguments.length >= fn.length) {\n        return fn.apply(this, arguments);\n      } else {\n        let argArray = Utils.toArray(arguments);\n        return Utils.curry(fn.bind.apply(fn, [this].concat(argArray)));\n      }\n    };\n  }\n};\n\nexport default Utils = Utils;\n\nUtils.makeGlobal('pb.Utils', Utils);\n","$__placeholder__0[$traceurRuntime.toProperty($__placeholder__1)]","var $__default = $__placeholder__0","return $__placeholder__0","get $__placeholder__0() { return $__placeholder__1; }","import Utils from 'src/utils';\n\n/**\n * Entry point to add any abilities to custom elements. Note that this only works on custom\n * elements.\n *\n * @class ability.Abilities\n * @static\n */\nconst Abilities = {\n\n  /**\n   * Configures the given constructor to add abilities. This only works if the constructor is used\n   * for custom elements.\n   *\n   * Look at other classes in ability module to see what are supported.\n   * \n   * @param {!Function} ctor Constructor of the element to add the abilities to.\n   * @param {!Map.<Ability, Object>} cfg Map with the Ability as the key, and a default value object\n   *     specific to that ability. Check the Ability's documentation for more information.\n   */\n  config(ctor, cfg) {\n    for (let pair of cfg) {\n      let ability = pair[0];\n      Utils.extendFn(\n          ctor.prototype,\n          'createdCallback',\n          function() {\n            ability.setDefaultValue.call(this, pair[1]);\n          });\n      Utils.extendFn(\n          ctor.prototype, \n          'attributeChangedCallback', \n          ability.attributeChangedCallback);\n      Utils.extendFn(\n          ctor.prototype, \n          'attachedCallback', \n          ability.attachedCallback);\n      Utils.extendFn(\n          ctor.prototype, \n          'detachedCallback', \n          ability.detachedCallback, \n          true /* callBefore */);\n    }\n    return ctor;\n  }\n};\n\nexport default Abilities;\n\nif (window['TEST_MODE']) {\n  Utils.makeGlobal('pb.ability.Abilities', Abilities);\n}\n","\n        for (var $__placeholder__0 =\n                 $__placeholder__1[Symbol.iterator](),\n                 $__placeholder__2;\n             !($__placeholder__3 = $__placeholder__4.next()).done; ) {\n          $__placeholder__5;\n          $__placeholder__6;\n        }","/**\n * Base class for all abilities.\n *\n * @class ability.Ability\n * @static\n */\nconst Ability = {\n\n  /**\n   * Sets the default value of the ability.\n   *\n   * @method setDefaultValue\n   * @param {!Object} defaultValue The default value of the ability.\n   */\n  setDefaultValue(defaultValue) { },\n\n  /**\n   * Called when an attribute was changed.\n   *\n   * @method attributeChangedCallback\n   * @param {string} name The name of the attribute that was changed.\n   * @param {Object=} oldValue The old value of the attribute.\n   * @param {Object=} newValue The new value of the attribute.\n   */\n  attributeChangedCallback(name, oldValue, newValue) { },\n\n  /**\n   * Called when the element is attached to the document.\n   *\n   * @method attachedCallback\n   */\n  attachedCallback() { },\n\n  /**\n   * Called when the element is detached from the document.\n   *\n   * @method detachedCallback\n   */\n  detachedCallback() { }\n};\n\nexport default Ability;\n","let As = {\n  int(input, radix = 10) {\n    let output = Number.parseInt(input, radix);\n    if (Number.isNaN(output)) {\n      throw `${input} is not an integer with radix ${radix}`;\n    }\n\n    return output;\n  },\n\n  boolean(input) {\n    return input.toLowerCase() === 'true';\n  }\n};\n\nexport default As = As;\n\nif (!window.pb) {\n  window.pb = {};\n}\n\nwindow.pb.As = As;\n","import Utils from 'src/utils';\n\n/**\n * Service that keeps track of drag and drop.\n *\n * @class service.DragDrop\n */\nlet DragDrop = {\n\n  /**\n   * Last element that was dragged.\n   *\n   * @type Element\n   * @property lastDraggedEl\n   */\n  lastDraggedEl: null,\n\n  /**\n   * Start dragging the given element.\n   *\n   * @method dragStart\n   * @param {!Element} draggedEl The element that is dragged.\n   */\n  dragStart(draggedEl) {\n    this.lastDraggedEl = draggedEl;\n  }\n};\n\n\nexport default DragDrop = DragDrop;\n\nUtils.makeGlobal('pb.service.DragDrop', DragDrop);\n","import As from 'src/as';\nimport Utils from 'src/utils';\nimport Ability from 'src/ability/ability';\nimport DragDropService from 'src/service/dragdrop';\n\n/**\n * Set to true to make this element draggable.\n * @attribute pb-draggable\n */\nconst ATTR_NAME = 'pb-draggable';\n\nconst CLASS_DRAGGED = 'pb-dragged';\n\nconst _DRAG_START_HANDLER = Symbol();\nconst _DRAG_END_HANDLER = Symbol();\n\nfunction handleDragEnd() {\n  this.classList.remove(CLASS_DRAGGED);\n}\n\nfunction handleDragStart(event) {\n  let dataTransfer = event.dataTransfer;\n  dataTransfer.effectAllowed = 'move';\n  this.classList.add(CLASS_DRAGGED);\n\n  DragDropService.dragStart(this);\n}\n\nfunction register(element) {\n  element[_DRAG_START_HANDLER] = handleDragStart.bind(element);\n  element[_DRAG_END_HANDLER] = handleDragEnd.bind(element);\n\n  // Propagate the draggable attribute to the root element.\n  Utils.toArray(element.children).forEach(child => {\n    $(child).attr('draggable', 'true');\n    child.addEventListener('dragstart', element[_DRAG_START_HANDLER]);\n    child.addEventListener('dragend', element[_DRAG_END_HANDLER]);\n  });\n}\n\nfunction unregister(element) {\n  Utils.toArray(element.children).forEach(child => {\n    child.removeEventListener('dragend', element[_DRAG_END_HANDLER]);\n    child.removeEventListener('dragstart', element[_DRAG_START_HANDLER]);\n    $(child).attr('draggable', null);\n  });\n}\n\n/**\n * Provides decorator to make an element draggable. Use [[Abilities|ability.Abilities]] to decorate\n * the element. Note that these methods should be called with the element to be decorated as the\n * scope.\n *\n * @class Draggable\n * @static\n * @extends ability.Ability\n */\nlet Draggable = Object.create(Ability, {\n\n  /**\n   * Sets the default values for the element.\n   *\n   * @method setDefaultValue\n   * @param {boolean} defaultValue Default value for pb-draggable attribute.\n   */\n  setDefaultValue: {\n    value(defaultValue) {\n      if ($(this).attr(ATTR_NAME) === undefined) {\n        $(this).attr(ATTR_NAME, defaultValue);\n      }\n    }\n  },\n\n  /**\n   * Handles attribute change.\n   *\n   * @method attributeChangedCallback\n   * @param {string} name Name of the attribute that was changed.\n   * @param {string} oldValue Old value of the changed attribute.\n   * @param {string} newValue New value of the changed attribute.\n   */\n  attributeChangedCallback: {\n    value(name, oldValue, newValue) {\n      if (name === ATTR_NAME) {\n        newValue = As.boolean(newValue);\n        if (newValue) {\n          register(this);\n        } else {\n          unregister(this);\n        }\n      }\n    }\n  },\n\n  /**\n   * Handles registration when the element is attached to the document.\n   *\n   * @method attachedCallback\n   */\n  attachedCallback: {\n    value() {\n      if ($(this).attr(ATTR_NAME) && As.boolean($(this).attr(ATTR_NAME))) {\n        register(this);\n      }\n    }\n  },\n\n  /**\n   * Handles unregistration when the element is detached from the document.\n   *\n   * @method detachedCallback\n   */\n  detachedCallback: {\n    value() {\n      unregister(this);\n    }\n  }\n});\n\nexport default Draggable = Draggable;\n\nif (window['TEST_MODE']) {\n  Utils.makeGlobal('pb.ability.Draggable', Draggable);\n}\n","import Utils from 'src/utils';\n\n/**\n * Base class of all ProtoBoard elements.\n * \n * @class PbElement\n * @extends HTMLElement\n */\nexport default class PbElement extends HTMLElement {\n\n  createdCallback() {\n    /**\n     * True iff the element has been created and attached.\n     *\n     * @type boolean\n     * @property isCreated\n     */\n    this.isCreated = false;\n  }\n\n  attachedCallback() {\n    this.isCreated = true;\n  }\n\n  detachedCallback() { }\n}\n\nUtils.makeGlobal('pb.PbElement', PbElement);\n","var $__placeholder__0 = $__placeholder__1","$traceurRuntime.defaultSuperCall(this,\n                $__placeholder__0.prototype, arguments)","var $__placeholder__0 = $__placeholder__1","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2,\n                                       $__placeholder__3)","var $__default = $__placeholder__0","import Utils from 'src/utils';\nimport DragDropService from 'src/service/dragdrop';\nimport PbElement from 'src/pbelement';\n\n/**\n * Base class for all components.\n *\n * TODO: Add map of default abilities.\n *\n * @class component.Component\n * @extends PbElement  \n */\nexport default class Component extends PbElement {\n\n  /**\n   * For testing only.\n   */\n  constructor() { }\n\n  createdCallback() {\n    super.createdCallback();\n  }\n}\n\nif (window.TEST_MODE) {\n  Utils.makeGlobal('pb.component.Component', Component);\n}\n","$traceurRuntime.superCall($__placeholder__0, $__placeholder__1, $__placeholder__2,\n                                   $__placeholder__3)","import As from 'src/as';\nimport Component from 'src/component/component';\nimport Utils from 'src/utils';\nimport Abilities from 'src/ability/abilities';\nimport Draggable from 'src/ability/draggable';\n\nlet doc = null;\nlet template = null;\n\nconst EL_NAME = 'pb-c-card';\nconst ATTR_SHOW_FRONT = 'pb-show-front';\n\nfunction handleClick() {\n  let oldValue = As.boolean($(this).attr(ATTR_SHOW_FRONT) || 'false');\n  $(this).attr(ATTR_SHOW_FRONT, !oldValue);\n}\n\n/**\n * A representation of a card. To use this, create a `pb-c-card` element with two child elements:\n * - One must have a `pb-front` class. This is the front face of the card.\n * - One must have a `pb-back` class. This is the back face of the card.\n *\n * By default, the card starts by showing its back. If you want to make it start by showing the \n * front face, add `pb-show-front=\"true\"` to the `pb-c-card`.\n * \n * @class component.Card\n * @extends component.Component\n */\nexport default class Card extends Component {\n\n  createdCallback() {\n    super.createdCallback();\n    this.createShadowRoot()\n        .appendChild(Utils.activateTemplate(template, doc));\n\n    this.attachedCallback();\n  }\n\n  attachedCallback() {\n    super.attachedCallback();\n    this.addEventListener('click', handleClick);\n  }\n\n  detachedCallback() {\n    this.removeEventListener('click', handleClick);\n    super.detachedCallback();\n  }\n\n  /**\n   * Registers `pb-c-card` to the document.\n   *\n   * @method register\n   * @static\n   * @param {!Document} currentDoc The document object to register the element to.\n   * @param {!Element} cardTemplate The template for the pb-c-card's element shadow DOM.\n   */\n  static register(currentDoc, cardTemplate) {\n    if (doc || template) {\n      // Registration has already happened.\n      return;\n    }\n\n    doc = currentDoc;\n    template = cardTemplate;\n    document.registerElement(EL_NAME,  {\n      prototype: Abilities.config(\n          Card, \n          new Map([\n            [Draggable, 'true']\n          ])).prototype\n    });\n  }\n}\n\nUtils.makeGlobal('pb.component.Card', Card);\n","import Component from 'src/component/component';\nimport Utils from 'src/utils';\nimport Abilities from 'src/ability/abilities';\nimport Draggable from 'src/ability/draggable';\n\nlet doc = null;\nlet template = null;\n\nconst EL_NAME = 'pb-c-token';\n\n/**\n * A simple movable component with only one state. Examples of token:\n * - Chess piece\n * - Cubes\n * - Damage marker\n *\n * To use this, create a `pb-c-token` element with one child element. This child element will be\n * displayed as the token.\n *\n * @class component.Token\n * @extends component.Component\n */\nexport default class Token extends Component {\n\n  createdCallback() {\n    super.createdCallback();\n    this.createShadowRoot().appendChild(Utils.activateTemplate(template, doc));\n  }\n\n  /**\n   * Registers `pb-c-token` to the document.\n   *\n   * @method register\n   * @static\n   * @param {!Document} currentDoc The document object to register the element to.\n   * @param {!Element} tokenTemplate The template for the `pb-c-token`'s shadow DOM.\n   */\n  static register(currentDoc, tokenTemplate) {\n    if (doc || template) {\n      // Registration has already happened.\n      return;\n    }\n\n    doc = currentDoc;\n    template = tokenTemplate;\n    document.registerElement(EL_NAME, {\n      prototype: Abilities.config(\n          Token,\n          new Map([\n            [Draggable, 'true']\n          ]))\n    });\n  }\n}\n\nUtils.makeGlobal('pb.component.Token', Token);\n","import Utils from 'src/utils';\n\nlet source = null;\n\nconst CLASS_DISTRIBUTE = 'pb-distribute';\n\n/**\n * Service that manages the distributing action.\n *\n * @class service.Distribute\n * @static\n */\nlet Distribute = {\n\n  /**\n   * Starts the distribution action.\n   *\n   * @method begin\n   * @param {!Bag} distributeSource Source to distribute the elements from.\n   */\n  begin(distributeSource) {\n    if (!this.isActive()) {\n      source = distributeSource;\n      distributeSource.classList.add(CLASS_DISTRIBUTE);\n      $(this).trigger(this.EventType.BEGIN);\n    }\n  },\n\n  /**\n   * Ends the distribution process.\n   *\n   * @method end\n   */\n  end() {\n    if (this.isActive()) {\n      source.classList.remove(CLASS_DISTRIBUTE);\n      source = null;\n      $(this).trigger(this.EventType.END);\n    }\n  },\n\n  /**\n   * @method isActive\n   * @return {boolean} True iff the distribution is active.\n   */\n  isActive() {\n    return source !== null;\n  },\n\n  /**\n   * @method next\n   * @return {Element} The first child of the distribution source.\n   */\n  next() {\n    return source.next();\n  },\n\n  EventType: {\n    /**\n     * Event type dispatched when the distribution is starting.\n     *\n     * @type string\n     * @property EventType.BEGIN\n     */\n    BEGIN: 'distribute-begin',\n\n    /**\n     * Event type dispatched when the distribution is ending.\n     *\n     * @type string\n     * @property EventType.END\n     */\n    END: 'distribute-end'\n  }\n};\n\n$(window).on('keydown', event => {\n  // Check if this is ESC key.\n  if (event.which === 27 && Distribute.isActive()) {\n    Distribute.end();\n  }\n});\n\nexport default Distribute = Distribute;\n\nUtils.makeGlobal('pb.service.Distribute', Distribute);","import Distribute from 'src/service/distribute';\nimport DragDrop from 'src/service/dragdrop';\nimport PbElement from 'src/pbelement';\nimport Utils from 'src/utils';\n\nconst CLASS_DISTRIBUTE = 'pb-distribute';\nconst CLASS_OVER = 'pb-over';\n\nconst _dragEnterCount = Symbol();\n\nfunction handleDragOver(event) {\n  // TODO: Only enable if the component is compatible.\n  event.preventDefault();\n  event.dropEffect = 'move';\n}\n\nfunction handleDragEnter(e) {\n  this.classList.add(CLASS_OVER);\n  this[_dragEnterCount]++;\n}\n\nfunction handleDragLeave(e) {\n  this[_dragEnterCount]--;\n  if (this[_dragEnterCount] <= 0) {\n    this.classList.remove(CLASS_OVER);\n    this[_dragEnterCount] = 0;\n  }\n}\n\nfunction handleDrop() {\n  this.classList.remove(CLASS_OVER);\n  this.appendChild(DragDrop.lastDraggedEl);\n  DragDrop.lastDraggedEl = null;\n}\n\nfunction handleClick() {\n  if (Distribute.isActive() && Distribute.next()) {\n    this.appendChild(Distribute.next());\n  }\n}\n\nfunction handleDistributeBegin() {\n  if (this.shadowRoot) {\n    this.shadowRoot.querySelector('#root').classList.add(CLASS_DISTRIBUTE);\n  }\n}\n\nfunction handleDistributeEnd() {\n  if (this.shadowRoot) {\n    this.shadowRoot.querySelector('#root').classList.remove(CLASS_DISTRIBUTE);\n  }\n}\n\nfunction handleLastDraggedElChange() {\n  if (!DragDrop.lastDraggedEl) {\n    this.classList.remove(CLASS_OVER);\n    this[_dragEnterCount] = 0;\n  }\n}\n\n/**\n * Base class of all regions. All regions are drop targets.\n * @class region.Region\n * @extends HTMLElement\n */\nexport default class Region extends PbElement {\n\n  /** For testing only */\n  constructor() { }\n\n  createdCallback() {\n    super.createdCallback();\n    this[_dragEnterCount] = 0;\n  }\n\n  attachedCallback() {\n    super.attachedCallback();\n    this.addEventListener('dragover', handleDragOver);\n    this.addEventListener('dragenter', handleDragEnter);\n    this.addEventListener('dragleave', handleDragLeave);\n    this.addEventListener('drop', handleDrop);\n    this.addEventListener('click', handleClick);\n\n    $(Distribute)\n        .on(Distribute.EventType.BEGIN, handleDistributeBegin.bind(this))\n        .on(Distribute.EventType.END, handleDistributeEnd.bind(this));\n\n    Utils.observe(DragDrop, 'lastDraggedEl', handleLastDraggedElChange.bind(this));\n  }\n}\n\n/**\n * Refers to pb-droppable attribute\n *\n * @type string\n * @property ATTR_DROPPABLE\n * @static\n */\n\n/**\n * If set to true, this will be droppable for any kind of elements.\n * If set to false, this will not be droppable.\n * Otherwise, the string will be treated as a selector for elements that can be dropped into this\n * element. \n *\n * @ttribute pb-droppable\n */\nRegion.ATTR_DROPPABLE = 'pb-droppable';\n\nif (window.TEST_MODE) {\n  Utils.makeGlobal('pb.region.Region', Region);\n}","import Region from 'src/region/region';\nimport Distribute from 'src/service/distribute';\nimport Utils from 'src/utils';\n\nlet doc = null;\nlet template = null;\n\nconst EL_NAME = 'pb-r-bank';\n\n/**\n * Handles event called when the \"Distribute\" option in the context menu is clicked.\n *\n * @param {!Event} event The event object\n * @private\n */\nfunction handleDistributeClick(event) {\n  this.distribute();\n  event.stopPropagation();\n}\n\n/**\n * A generic collection of items. To use this, create a `pb-r-bank` element. Set the size of the \n * element by CSS selector: `pb-r-bank::shadow #root`. Any children of this element are considered \n * in the bank.\n *\n * Only the last child will be visible.\n * \n * @class region.Bank\n * @extends region.Region\n */\nclass Bank extends Region {\n  constructor() {\n    super();\n  }\n\n  createdCallback() {\n    super.createdCallback();\n    this.createShadowRoot().appendChild(Utils.activateTemplate(template, doc));\n\n    this.shadowRoot.querySelector('#distribute')\n        .addEventListener('click', handleDistributeClick.bind(this));\n  }\n\n  /**\n   * Begins the distribute process.\n   * @method distribute\n   */\n  distribute() {\n    Distribute.begin(this);\n  }\n\n  /**\n   * @method next\n   * @return {Element} The first child of the element.\n   */\n  next() {\n    return this.children[0];\n  }\n\n  /**\n   * Registers `pb-r-bank` to the document.\n   *\n   * @method register\n   * @static\n   * @param {!Document} currentDoc The document object to register the element to.\n   * @param {!Element} bankTemplate The template for the `pb-r-bank`'s element shadow DOM.\n   */\n  static register(currentDoc, bankTemplate) {\n    if (doc || template) {\n      // Already registered.\n      return;\n    }\n\n    doc = currentDoc;\n    template = bankTemplate;\n    document.registerElement(EL_NAME, {prototype: Bank.prototype});\n  }\n}\n\nexport default Bank = Bank;\n\nUtils.makeGlobal('pb.region.Bank', Bank);\n","import Region from 'src/region/region';\nimport Utils from 'src/utils';\n\nlet doc = null;\nlet template = null;\n\nconst EL_NAME = 'pb-r-deck';\n\n/**\n * Represents a collection of items that can be sorted. To use this, create a `pb-r-deck` element.\n * Any child elements of this class are considered to be in the deck.\n *\n * @class region.Deck\n * @extends region.Region\n */\nclass Deck extends Region {\n  constructor() {\n    super();\n  }\n\n  createdCallback() {\n    super.createdCallback();\n    this.createShadowRoot().appendChild(Utils.activateTemplate(template, doc));\n    this.attachedCallback();\n  }\n\n  attachedCallback() {\n    super.attachedCallback();\n    this.shadowRoot\n        .querySelector('#shuffle')\n        .addEventListener('click', this.shuffle.bind(this));\n  }\n\n  /**\n   * Shuffles the children of this element.\n   *\n   * @method shuffle\n   */\n  shuffle() {\n    let pairs = Utils.toArray(this.children).map(child => [child, Math.random()]);\n    pairs.sort((a, b) => Utils.compare(a[1], b[1]));\n    let shuffled = pairs.map(pair => pair[0]);\n    shuffled.forEach((el => this.appendChild(el)).bind(this));\n  }\n\n  /**\n   * Registers `pb-r-deck` to the document.\n   *\n   * @method register\n   * @static\n   * @param {!Document} currentDoc The document object to register the element to.\n   * @param {!Element} deckTemplate The template for the `pb-r-deck`'s element shadow DOM.\n   */\n  static register(currentDoc, deckTemplate) {\n    if (doc || template) {\n      // Already registered.\n      return;\n    }\n\n    doc = currentDoc;\n    template = deckTemplate;\n    document.registerElement(EL_NAME, {prototype: Deck.prototype});\n  }\n}\n\nexport default Deck = Deck;\n\nUtils.makeGlobal('pb.region.Deck', Deck);\n","import Region from 'src/region/region';\nimport Utils from 'src/utils';\n\nlet doc = null;\nlet template = null;\n\nconst EL_NAME = 'pb-r-rect';\n\n/**\n * An arbitrary rectangular region.\n *\n * @class region.Rect\n * @extends region.Region\n */\nclass Rect extends Region {\n  constructor() {\n    super();\n  }\n\n  createdCallback() {\n    super.createdCallback();\n    this.createShadowRoot().appendChild(Utils.activateTemplate(template, doc));\n  }\n\n  /**\n   * Registers `pb-r-rect` to the document.\n   *\n   * @method register\n   * @static\n   * @param {!Document} currentDoc The document object to register the element to.\n   * @param {!Element} rectTemplate The template for the `pb-r-rect`'s element shadow DOM.\n   */\n  static register(currentDoc, rectTemplate) {\n    if (doc || template) {\n      // Registration has already happened.\n      return;\n    }\n\n    doc = currentDoc;\n    template = rectTemplate;\n    document.registerElement(EL_NAME,  {prototype: Rect.prototype});\n  }\n}\n\nexport default Rect = Rect;\n\nUtils.makeGlobal('pb.region.Rect', Rect);\n","import Utils from 'src/utils';\n\nlet activeContext = null;\n\n/**\n * Service that manages the context menu in the app.\n *\n * @class service.Context\n * @static\n */\nlet Context = {\n\n  /**\n   * Sets the given element as the currently active context menu.\n   *\n   * @method setActive\n   * @param {Object} active The currently active context menu.\n   */\n  setActive(active) {\n    activeContext = active;\n    $(this).trigger(this.EventType.SWITCHED);\n  },\n\n  /**\n   * @method getActive\n   * @return {Object} The currently active context menu, if any.\n   */\n  getActive() {\n    return activeContext;\n  },\n\n  EventType: {\n    /**\n     * Event type fired when the context menu that is opened has switched\n     *\n     * @type string\n     * @property EventType.SWITCHED\n     */\n    SWITCHED: 'context-switched'\n  }\n};\n\nexport default Context = Context;\n\nUtils.makeGlobal('pb.service.Context', Context);\n","import Utils from 'src/utils';\n\n/**\n * Service that lets the user preview an element on mouse hover.\n *\n * @class service.Preview\n * @static\n */\nlet Preview = {\n\n  /**\n   * Element that is being previewed, if any.\n   *\n   * @type Element\n   * @property previewedEl\n   */\n  previewedEl: null\n};\n\nexport default Preview = Preview;\n\nUtils.makeGlobal('pb.service.Preview', Preview);\n","import Context from 'src/service/context';\nimport Distribute from 'src/service/distribute';\nimport DragDrop from 'src/service/dragdrop';\nimport Preview from 'src/service/preview';\n","import As from 'src/as';\nimport Utils from 'src/utils';\nimport PbElement from 'src/pbelement';\n\nlet doc = null;\nlet templates = null;\n\nconst ATTR_ROW = 'pb-row';\nconst ATTR_COL = 'pb-col';\nconst EL_NAME = 'pb-s-rectgrid';\n\n/**\n * A surface that lays out its components in a grid. To use this, add attributes `pb-row` and\n * `pb-col` to the element `pb-s-rectgrid`. These are the number of rows and columns in the grid.\n *\n * Add the contents of the grid as children of this element. Use `pb-row` and `pb-col` attributes on\n * them to indicate their positions in the grid.\n *\n * @class surface.RectGrid\n * @extends PbElement\n */\nexport default class RectGrid extends PbElement {\n  createdCallback() {\n    super.createdCallback();\n\n    // Create the shadow DOM.\n    this.createShadowRoot()\n        .appendChild(Utils.activateTemplate(templates.main, doc));\n\n    // Initializes the data.\n    let rowCount = As.int($(this).attr(ATTR_ROW));\n    let colCount = As.int($(this).attr(ATTR_COL));\n    let rootEl = this.shadowRoot.querySelector('#content');\n\n    // Add the rows.\n    for (let row = 0; row < rowCount; row++) {\n      rootEl.appendChild(Utils.activateTemplate(templates.row, doc));\n    }\n\n    $(this.shadowRoot.querySelectorAll('#content > div'))\n        .each((row, rowEl) => {\n          for (let col = 0; col < colCount; col++) {\n            let colEl = Utils.activateTemplate(templates.col, doc);\n            $(colEl.querySelector('content'))\n                .attr('select', `[${ATTR_ROW}=\"${row}\"][${ATTR_COL}=\"${col}\"]`)\n                .attr(ATTR_ROW, row)\n                .attr(ATTR_COL, col);\n            rowEl.appendChild(colEl);\n          }\n        });\n  }\n\n  attachedCallback() {\n    super.attachedCallback();\n  }\n\n  /**\n   * Returns the element at the given row and column, or null if not found.\n   * @param  {number} row The row index of the element to be returned.\n   * @param  {number} col The col index of the element to be returned.\n   * @return {HTMLElement|null} The HTML element at the given row and col, or null if not\n   *     found.\n   */\n  get(row, col) {\n    let contentEl = this.shadowRoot\n        .querySelector(`content[${ATTR_ROW}=\"${row}\"][${ATTR_COL}=\"${col}\"]`);\n    return contentEl ? contentEl.getDistributedNodes()[0] : null;\n  }\n\n  /**\n   * Registers `pb-s-rectgrid` to the document.\n   *\n   * @method register\n   * @static\n   * @param {!Document} currentDoc The document object to register the element to.\n   * @param {!Object} gridTemplates Object containing template for the `pb-s-rectgrid`'s element \n   *     shadow DOM.\n   * @param {!Element} gridTemplates.main The main template for the element.\n   * @param {!Element} gridTemplates.row The template for every row in the grid.\n   * @param {!Element} gridTemplates.col The template for every column in the grid.\n   */\n  static register(currentDoc, gridTemplates) {\n    if (doc || templates) {\n      // Register has already happened.\n      return;\n    }\n\n    doc = currentDoc;\n    templates = gridTemplates;\n\n    document.registerElement(EL_NAME, {prototype: RectGrid.prototype});\n  }\n}\n\nUtils.makeGlobal('pb.surface.RectGrid', RectGrid);\n","import Utils from 'src/utils';\nimport ContextService from 'src/service/context';\n\nlet template = null;\nlet doc = null;\n\nlet EL_NAME = \"pb-u-context\";\n\nlet SHOWN_CLASS = \"shown\";\n// TODO: Make subcontext\n\n/**\n * Handles context menu on the parent element.\n *\n * @method handleContextMenu\n * @param {!Event} event The event object.\n * @private\n */\nfunction handleContextMenu(event) {\n  this.show(event.x, event.y);\n  event.preventDefault();\n}\n\n/**\n * Handles click event in a document.\n *\n * @method handleClick\n * @param {!Event} event The event object\n * @private\n */\nfunction handleClick(event) {\n  if (!this.contains(event.target)) {\n    this.hide();\n  }\n}\n\nfunction handleContextSwitched() {\n  if (ContextService.getActive() !== this) {\n    this.hide();\n  }\n}\n\n/**\n * A context menu. To use this, add `pb-u-context` as a child of the element you want to attach the\n * menu to. When you right click on the parent element, the context menu will open.\n *\n * Each child of the context menu is a menu item.\n * \n * @class ui.Context\n * @extends HTMLElement\n */\nclass Context extends HTMLElement {\n  constructor() {}\n\n  createdCallback() {\n    this.createShadowRoot()\n        .appendChild(Utils.activateTemplate(template, doc));\n    this.attachedCallback();\n  }\n\n  attachedCallback() {\n    if (this.parentElement) {\n      this.parentElement.addEventListener('contextmenu', handleContextMenu.bind(this));\n    }\n    document.addEventListener('click', handleClick.bind(this));\n    $(ContextService).on(ContextService.EventType.SWITCHED, handleContextSwitched.bind(this));\n  }\n\n  /**\n   * Displays the context menu at the specified coordinate. The menu will position its anchor so it\n   * the menu doesn't go off screen.\n   *\n   * @method show\n   * @param {number} mouseX The X coordinate to display the menu on.\n   * @param {number} mouseY The Y coordinate to display the menu on.\n   */\n  show(mouseX, mouseY) {\n    let rootEl = this.shadowRoot.querySelector('#root');\n    rootEl.classList.add(SHOWN_CLASS);\n\n    // Handle positioning.\n    let x = null;\n    let hAnchor = null;\n    let documentEl = this.ownerDocument.documentElement;\n    if (mouseX + rootEl.clientWidth > documentEl.clientWidth) {\n      hAnchor = 'right';\n      x = documentEl.clientWidth - mouseX;\n    } else {\n      hAnchor = 'left';\n      x = mouseX;\n    }\n\n    let y = null;\n    let vAnchor = null;\n    if (mouseY + rootEl.clientHeight > documentEl.clientHeight) {\n      vAnchor = 'bottom';\n      y = documentEl.clientHeight - mouseY;\n    } else {\n      vAnchor = 'top';\n      y = mouseY;\n    }\n\n    this.style.position = 'fixed';\n\n    // Clear the positions.\n    this.style.top = '';\n    this.style.left = '';\n    this.style.right = '';\n    this.style.bottom = '';\n\n    this.style[hAnchor] = `${x}px`;\n    this.style[vAnchor] = `${y}px`;\n\n    ContextService.setActive(this);\n  }\n\n  /**\n   * Hides the context menu.\n   *\n   * @method hide\n   */\n  hide() {\n    this.shadowRoot.querySelector('#root').classList.remove(SHOWN_CLASS);\n  }\n\n  /**\n   * Registers `pb-u-context` to the document.\n   *\n   * @method register\n   * @static\n   * @param {!Document} currentDoc The document object to register the element to.\n   * @param {!Element} contextTemplate The template for the `pb-u-context`'s element shadow DOM.\n   */\n  static register(currentDoc, contextTemplate) {\n    if (doc || template) {\n      // Register has already happened.\n      return;\n    }\n\n    doc = currentDoc;\n    template = contextTemplate;\n\n    document.registerElement(EL_NAME, { prototype: Context.prototype });\n  }\n}\n\nexport default Context = Context;\n\nUtils.makeGlobal('pb.ui.Context', Context);","import PbElement from 'src/pbelement';\nimport Utils from 'src/utils';\nimport PreviewService from 'src/service/preview';\n\n/**\n * Class that contains a preview if the mouse enters the parent element. This will display\n * the children element as preview.\n *\n * @class ui.Preview\n * @extends PbElement\n */\n\nlet registered = false;\n\nconst EL_NAME = 'pb-u-preview';\n\nconst _mouseOverHandler = Symbol();\nconst _mouseOutHandler = Symbol();\n\nfunction handleMouseOver() {\n  PreviewService.previewedEl = this;\n}\n\nfunction handleMouseOut(e) {\n  PreviewService.previewedEl = null;\n}\n\nexport default class Preview extends PbElement {\n  createdCallback() {\n    super.createdCallback();\n    this.createShadowRoot();\n\n    // Initializes the variables.\n    this[_mouseOverHandler] = handleMouseOver.bind(this);\n    this[_mouseOutHandler] = handleMouseOut.bind(this);\n\n    this.attachedCallback();\n  }\n\n  attachedCallback() {\n    super.attachedCallback();\n    if (this.parentElement) {\n      this.parentElement.addEventListener('mouseenter', this[_mouseOverHandler]);\n      this.parentElement.addEventListener('mouseleave', this[_mouseOutHandler]);\n    }\n  }\n\n  detachedCallback() {\n    if (this.parentElement) {\n      this.parentElement.removeEventListener('mouseenter', this[_mouseOverHandler]);\n      this.parentElement.removeEventListener('mouseleave', this[_mouseOutHandler]);\n    }\n    super.detachedCallback();\n  }\n\n  /**\n   * Registers `pb-u-preview` to the document.\n   *\n   * @method register\n   * @static\n   */\n  static register() {\n    if (!registered) {\n      document.registerElement(EL_NAME, {prototype: Preview.prototype});\n    }\n  }\n}\n\nUtils.makeGlobal('pb.ui.Preview', Preview);\n","import PbElement from 'src/pbelement';\nimport Utils from 'src/utils';\nimport PreviewService from 'src/service/preview';\n\n/**\n * Element that displays the innerHTML of the `pb-u-preview` of element currently being hovered \n * over. This works in tandem with [[ui.Preview|ui.Preview]] and \n * [[service.Preview|service.Preview]].\n *\n * @class ui.Previewer\n * @extends PbElement\n */\n\nlet template = null;\nlet doc = null;\n\nconst _previewElHandler = Symbol();\n\nconst EL_NAME = 'pb-u-previewer';\n\nfunction handlePreviewEl() {\n  if (PreviewService.previewedEl) {\n    this.innerHTML = PreviewService.previewedEl.innerHTML;\n  } else {\n    this.innerHTML = '';\n  }\n}\n\nexport default class Previewer extends PbElement {\n  createdCallback() {\n    super.createdCallback();\n    this.createShadowRoot()\n        .appendChild(Utils.activateTemplate(template, doc));\n\n    this.attachedCallback();\n  }\n\n  attachedCallback() {\n    super.attachedCallback();\n    this[_previewElHandler] = Utils.observe(\n        PreviewService, \n        'previewedEl', \n        handlePreviewEl.bind(this));\n  }\n\n  detachedCallback() {\n    Object.unobserve(PreviewService, this[_previewElHandler]);\n    super.detachedCallback();\n  }\n\n  /**\n   * Registers `pb-u-previewer` to the document.\n   *\n   * @method register\n   * @static\n   * @param {!Document} currentDoc The document object to register the element to.\n   * @param {!Element} previewerTemplate The template for the `pb-u-previewer`'s element shadow DOM.\n   */\n  static register(currentDoc, previewerTemplate) {\n    if (!template && !doc) {\n      document.registerElement(EL_NAME, {prototype: Previewer.prototype});\n    }\n\n    template = previewerTemplate;\n    doc = currentDoc;\n  }\n}\n\nUtils.makeGlobal('pb.ui.Previewer', Previewer);\n","import Utils from 'src/utils';\nimport PbElement from 'src/pbelement';\nimport As from 'src/as';\n\nlet doc = null;\nlet handlebars = null;\n\nconst EL_NAME = 'pb-u-template';\n\n/**\n * Contains a handlebars js template. When this element is created, it will process the handlebars\n * js template within it and replace itself with the processed templates. To pass in variables into\n * the template, add `data-<name>=\"<var>\"` attributes to the element, where `name` is the key to be\n * used in the template, and var is the property name accessible globally.\n *\n * This class also registers a `{{#pb-for <from> <to> <step>}}` block helper. This is a simple for\n * loop that copies the inner block several times. You can access the index of the loop using the\n * `@index` variable.\n *\n * @class ui.Template\n */\nexport default class Template extends PbElement {\n  constructor() {\n    super();\n  }\n\n  createdCallback() {\n    super.createdCallback();\n    let templateStr = this.innerHTML;\n    let data = {};\n    for (let key in this.dataset) {\n      let valueStr = this.dataset[key];\n      data[key] = window[valueStr] || valueStr;\n    }\n    $(this).replaceWith(handlebars.compile(this.innerHTML)(data));\n  }\n\n  /**\n   * Registers `pb-u-template` to the document.\n   *\n   * @method register\n   * @static\n   * @param {!Document} currentDoc The document object to register the element to.\n   * @param {!Handlebars} handlebars_ref Reference to the Handlebars library.\n   */\n  static register(currentDoc, handlebars_ref) {\n    if (!doc && !handlebars) {\n      // Only registers once.\n      document.registerElement(EL_NAME, {prototype: Template.prototype});\n    }\n    \n    doc = currentDoc;\n    handlebars = handlebars_ref;\n\n    handlebars.registerHelper('pb-for', function(from, to, step, options) {\n      if (options === undefined) {\n        // Shift the args if step is not defined.\n        options = step;\n        step = 1;\n      }\n      let rv = '';\n      for (let i = As.int(from); i < As.int(to); i += As.int(step)) {\n        let data = Handlebars.createFrame(options.data || {});\n        data.index = i;\n        rv += options.fn(this, { data: data });\n      } \n      return rv;\n    });\n  }\n}\n\nUtils.makeGlobal('pb.ui.Template', Template);\n","if (!$traceurRuntime.isSymbolString($__placeholder__0)) $__placeholder__1"]}