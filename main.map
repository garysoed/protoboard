{"version":3,"file":"/Users/gsoed/proj/protoboard/main.js","sources":["@traceur/generated/TemplateParser/3","@traceur/generated/TemplateParser/4","/Users/gsoed/proj/protoboard/src/ability/ability.js","@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/0","@traceur/generated/TemplateParser/2","@traceur/generated/TemplateParser/1","/Users/gsoed/proj/protoboard/src/utils.js","@traceur/generated/TemplateParser/7","@traceur/generated/TemplateParser/6","/Users/gsoed/proj/protoboard/src/hammerwrapper.js","/Users/gsoed/proj/protoboard/src/ability/triggerable.js","@traceur/generated/TemplateParser/10","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/8","@traceur/generated/TemplateParser/11","/Users/gsoed/proj/protoboard/src/ability/abilities.js","@traceur/generated/TemplateParser/12","/Users/gsoed/proj/protoboard/src/check.js","/Users/gsoed/proj/protoboard/src/events.js","/Users/gsoed/proj/protoboard/src/service/dragdrop.js","/Users/gsoed/proj/protoboard/src/ability/draggable.js","/Users/gsoed/proj/protoboard/src/ability/rotateable.js","/Users/gsoed/proj/protoboard/src/ability/toggleable.js","/Users/gsoed/proj/protoboard/src/pbelement.js","@traceur/generated/TemplateParser/13","/Users/gsoed/proj/protoboard/src/component/component.js","@traceur/generated/TemplateParser/14","/Users/gsoed/proj/protoboard/src/component/card.js","/Users/gsoed/proj/protoboard/src/component/token.js","/Users/gsoed/proj/protoboard/src/ability/droppable.js","/Users/gsoed/proj/protoboard/src/service/distribute.js","/Users/gsoed/proj/protoboard/src/region/region.js","/Users/gsoed/proj/protoboard/src/region/bag.js","/Users/gsoed/proj/protoboard/src/ability/shuffleable.js","/Users/gsoed/proj/protoboard/src/region/deck.js","/Users/gsoed/proj/protoboard/src/region/rect.js","/Users/gsoed/proj/protoboard/src/service/context.js","/Users/gsoed/proj/protoboard/src/service/preview.js","/Users/gsoed/proj/protoboard/src/service/modules.js","/Users/gsoed/proj/protoboard/src/surface/rectgrid.js","/Users/gsoed/proj/protoboard/src/ui/context.js","/Users/gsoed/proj/protoboard/src/ui/preview.js","/Users/gsoed/proj/protoboard/src/ui/previewer.js","/Users/gsoed/proj/protoboard/src/ui/template.js"],"names":[],"mappings":"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","sourceRoot":"/Users/gsoed/proj/protoboard/","sourcesContent":["var __moduleName = $__placeholder__0;","var $__placeholder__0 = $__placeholder__1","/**\n * Base class for all abilities.\n *\n * @class ability.Ability\n * @static\n */\nexport default class Ability {\n\n  /**\n   * Sets the default value of the given element.\n   *\n   * @method setDefaultValue\n   * @param {!Element} el The element whose default value should be set.\n   */\n  setDefaultValue(el) { }\n\n  /**\n   * Called when an attribute was changed.\n   *\n   * @method attributeChangedCallback\n   * @param {!Element} el The element whose attribute was changed.\n   * @param {string} name The name of the attribute that was changed.\n   * @param {Object=} oldValue The old value of the attribute.\n   * @param {Object=} newValue The new value of the attribute.\n   */\n  attributeChangedCallback(el, name, oldValue, newValue) { }\n\n  /**\n   * Called when the element is attached to the document.\n   *\n   * @method attachedCallback\n   * @param {!Element} el The element that was attached.\n   */\n  attachedCallback(el) { }\n\n  /**\n   * Called when the element is detached from the document.\n   *\n   * @method detachedCallback\n   * @param {!Element} el The element that was detached.\n   */\n  detachedCallback(el) { }\n\n  /**\n   * Triggers the effect of the ability on the given element.\n   *\n   * @method trigger\n   * @param {!Element} el The element to trigger the ability on.\n   */\n  trigger(el) { }\n\n  /**\n   * The name of the ability.\n   * \n   * @attribute name\n   * @type string\n   */\n  get name() { throw 'unimplemented'; }\n}\n","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2)","var $__default = $__placeholder__0","return $__placeholder__0","get $__placeholder__0() { return $__placeholder__1; }","/**\n * Various miscellaneous utilities.\n * @class Utils\n * @static\n */\n\nvar Utils = {\n  /**\n   * Extracts the given template from the given document.\n   * \n   * @method  extractTemplate\n   * @param  {string} templateQuery The query used to obtain the template.\n   * @param  {!Document} doc The document object to obtain the template from.\n   * @return {!Node} The node in the template.\n   */\n  extractTemplate(templateQuery, doc) {\n    return this.activateTemplate(doc.querySelector(templateQuery), doc);\n  },\n\n  activateTemplate(template, doc) {\n    return doc.importNode(template.content, true);\n  },\n\n  /**\n   * Returns the referenced function, or noop function if the referenced function does not exist.\n   * \n   * @method  nonNullFn\n   * @param  {!Object} scope Object containing the referenced function.\n   * @param  {string} name Name of the function to return.\n   * @return {!Function} The referenced function, or noop function if the referenced function does\n   *     not exist.\n   */\n  nonNullFn(scope, name) {\n    return scope[name] || (() => {});\n  },\n\n  /**\n   * Observes the given property on the given object.\n   * \n   * @method  observe\n   * @param {!Object} object Object to observe changes to.\n   * @param {string|null} property The property name to listen to, or null to listen to all \n   *     properties.\n   * @param {Function} handler Handler called when a property has changed. The handler accepts 3\n   *     arguments: property name, change type, and the old value of the property.\n   * TODO(gs): Make this work with scopes.\n   *\n   * @return {Function} The handler used to unobserve the object.\n   */\n  observe(object, property, handler) {\n    var newHandler = function(changes) {\n      changes.forEach(change => {\n        if (!property || change.name === property) {\n          handler(change.name, change.type, change.oldValue);\n        }\n      });\n    };\n    Object.observe(object, newHandler);\n    return newHandler;\n  },\n\n  /**\n   * Returns a Promise that waits for the given property of the given object to fulfill the given \n   * condition.\n   *\n   * @method waitFor\n   * @param {!Object} object Object containing the property to wait for.\n   * @param {string} property The name of the property to wait for.\n   * @param {*} condition If Function, this method will call the function with the property value\n   *     and will wait for the function to return true. Otherwise, this will wait for the property\n   *     to match this.\n   */\n  waitFor(object, property, condition) {\n    let promise = new Promise((resolve, reject) => {\n      let truthFn = (typeof condition === 'function') ? \n          condition : v => v === condition;\n      if (truthFn(object[property])) {\n        resolve(object, property);\n      } else {\n        let observer = (changes) => {\n          if (truthFn(object[property])) {\n            Object.unobserve(object, observer);\n            resolve(object, property);\n          }\n        };\n        Object.observe(object, observer);\n      }\n    });\n\n    return promise;\n  },\n\n  compare(a, b) {\n    if (typeof a === 'number' && typeof b === 'number') {\n      if (a < b) {\n        return -1;\n      } else if (a > b) {\n        return 1;\n      } else {\n        return 0;\n      }\n    }\n\n    return undefined;\n  },\n\n  toArray(obj) {\n    let array = [];\n    for (let i = 0; i < obj.length; i++) {\n      array[i] = obj[i];\n    }\n    return array;\n  },\n\n  /**\n   * Makes the given target to be globally available.\n   *\n   * @method makeGlobal\n   * @param {string} namespace The namespace of the target. This should be separated by '.'.\n   * @param {Object=} target The target object to be made globally available.\n   */\n  makeGlobal(namespace, target) {\n    let currentScope = window;\n    let pathArr = namespace.split('.');\n    pathArr.forEach((path, i) => {\n      if (i === (pathArr.length - 1)) {\n        if (!currentScope[path]) {\n          currentScope[path] = target;\n        } else {\n          throw `${namespace} already exists`; \n        }\n      } else {\n        if (!currentScope[path]) {\n          currentScope[path] = {};\n        }\n      }\n      currentScope = currentScope[path];\n    });\n  },\n\n  /**\n   * Replaces the specified function to call the given function before or after the original \n   * function. The given function will be called with the same arguments and scope as the original\n   * function.\n   *\n   * @method extendFn\n   * @param {Object} scope The object containing the function to replace.\n   * @param {string} name The name of the function to replace.\n   * @param {!Function} fn Function to be called.\n   * @param {boolean} callBefore True iff the function should be called before the original \n   *     function. Defaults to false.\n   */\n  extendFn(scope, name, fn, callBefore) {\n    let oldFn = scope[name];\n    scope[name] = function() {\n      if (callBefore) {\n        let rv = fn.apply(this, arguments);\n        if (!oldFn) {\n          return rv;\n        }\n      }\n\n      if (oldFn) {\n        let rv = oldFn.apply(this, arguments);\n        if (callBefore) {\n          return rv;\n        }\n      }\n\n      if (!callBefore) {\n        return fn.apply(this, arguments);\n      }\n    };\n  },\n\n  /**\n   * Makes the given function curried.\n   *\n   * @method curry\n   * @param {!Function} fn The function to be curried.\n   * @return {!Function} The curried function.\n   */\n  curry(fn) {\n    return function() {\n      if (arguments.length >= fn.length) {\n        return fn.apply(this, arguments);\n      } else {\n        let argArray = Utils.toArray(arguments);\n        return Utils.curry(fn.bind.apply(fn, [this].concat(argArray)));\n      }\n    };\n  },\n\n  // TODO(gs): Move to test utils.\n  getSymbol(obj, name) {\n    return Object.getOwnPropertySymbols(obj).find(symbol => {\n      return `Symbol(${name})` === symbol.toString();\n    });\n  }\n};\n\nexport default Utils = Utils;\n\nUtils.makeGlobal('pb.Utils', Utils);\n","$__placeholder__0[$traceurRuntime.toProperty($__placeholder__1)]","var $__default = $__placeholder__0","import Utils from 'src/utils';\n\n/**\n * Wrapper around Hammer JS.\n * \n * @class pb.HammerWrapper\n * @static\n */\n\n// Private symbols\nconst __hammer__ = Symbol();\nconst __getHammer__ = Symbol();\n\nlet HammerWrapper = {\n\n  /**\n   * Creates a new Hammer object, or return a cached one if one already exists.\n   *\n   * @method __getHammer__\n   * @param {!Element} el The element associated with the Hammer JS object.\n   * @return {!Hammer} The Hammer JS object.\n   * @private\n   */\n  [__getHammer__](el) {\n    if (!el[__hammer__]) {\n      // TODO(gs): This is not set if the script runs in HTML import.\n      if (!el.ownerDocument.parentWindow) {\n        el.ownerDocument.parentWindow = window;\n      }\n\n      let hammer = new Hammer.Manager(el);\n      hammer.add(new Hammer.Tap({ event: 'doubletap', taps: 2, interval: 250 }));\n      hammer.add(new Hammer.Tap({ event: 'singletap', taps: 1, interval: 250 }));\n\n      hammer.get('doubletap').recognizeWith('singletap');\n      hammer.get('singletap').requireFailure('doubletap');\n      el[__hammer__] = hammer;\n\n    }\n    return el[__hammer__];\n  },\n\n  /**\n   * Registers the given gesture to the given element and handler.\n   * \n   * @method on\n   * @param {!Element} el The element to register.\n   * @param {string} gestureType The type of Hammer JS gesture to register.\n   * @param {!Function} handler The handler function to register.\n   */\n  on(el, gestureType, handler) {\n    this[__getHammer__](el).on(gestureType, handler);\n  },\n\n  /**\n   * Unregisters the given gesture from the given element and handler.\n   *\n   * @method off\n   * @param {!Element} el Element to unregister from.\n   * @param {string} gestureType Type of Hammer JS gesture to register.\n   * @param {!Function} handler The handler function to unregister.\n   */\n  off(el, eventType, handler) {\n    this[__getHammer__](el).on(eventType, handler);\n  }\n};\n\nexport default HammerWrapper = HammerWrapper;\n\nif (window['TEST_MODE']) {\n  Utils.makeGlobal('pb.HammerWrapper', HammerWrapper);\n}\n","import HammerWrapper from 'src/hammerwrapper';\nimport Utils         from 'src/utils';\n\nimport Ability from 'src/ability/ability';\n\n/**\n * Provides triggers to abilities supported by the app. Normally you don't need to register this to\n * the app. [[ability.Abilities|ability.Abilities]] should do this for you.\n *\n * To use this class, add the trigger as an attribute name, and the name of the ability as its \n * value.\n *\n * Supported triggers:\n * - `pb-click`: Triggers when the element is clicked.\n * - `pb-dblclick`: Triggers when the element is double clicked.\n * \n * @class ability.Triggerable\n * @extends ability.Ability\n */\n\n// Private symbols.\nconst __defaultValue__ = Symbol();\nconst __getEvent__ = Symbol('getEvent');\nconst __getTriggers__ = Symbol('getTriggers');\nconst __isRegistered__ = Symbol('isRegistered');\nconst __knownAbilities__ = Symbol();\nconst __register__ = Symbol('register');\nconst __triggers__ = Symbol();\nconst __unregister__ = Symbol('unregister');\nconst __handler__ = Symbol();\n\nclass Triggerable extends Ability {\n\n  /**\n   * Returns the event associated with the trigger type.\n   * \n   * @method __getEvent__\n   * @param {ability.Triggerable.TYPES} triggerType The type of trigger whose event should be \n   *     returned.\n   * @return {string} The event related to the trigger type.\n   * @private\n   */\n  [__getEvent__](triggerType) {\n    switch (triggerType) {\n      case Triggerable.TYPES.CLICK:\n        return 'singletap';\n      case Triggerable.TYPES.DOUBLE_CLICK:\n        return 'doubletap';\n      default:\n        throw 'Unrecognized trigger: ' + triggerType;\n    }\n  }\n\n  /**\n   * Returns the triggers registered to the given element.\n   * \n   * @method  __getTriggers__\n   * @param {!Element} el The element to return the registered triggers from.\n   * @return {Object} Object with key being the trigger type, and the value being the ability that\n   *     is triggered by the key.\n   * @private\n   */\n  [__getTriggers__](el) {\n    if (!el[__triggers__]) {\n      el[__triggers__] = {};\n    }\n    return el[__triggers__];\n  }\n\n  /**\n   * Returns if the element is registered with the given ability.\n   *\n   * @method  __isRegistered__\n   * @param {!Element} el The element to check.\n   * @param {!ability.Triggerable.TYPES} triggerType The type of trigger to check.\n   * @param {string} abilityName The name of ability to check.\n   * @return {boolean} True iff the element is registered to trigger the given ability name on the\n   *     given trigger type.\n   * @private\n   */\n  [__isRegistered__](el, triggerType, abilityName) {\n    if (!this[__getTriggers__](el)[triggerType]) {\n      return false;\n    }\n    let ability = this[__getTriggers__](el)[triggerType].ability;\n    return ability && abilityName === ability.name;\n  }\n\n  /**\n   * Registers the given element to trigger the given ability.\n   *\n   * @method  __register__\n   * @param {!Element} el The element to register.\n   * @param {!ability.Triggerable.TYPES} triggerType The type of trigger to register.\n   * @param {ability.Ability} ability The ability to register.\n   * @private\n   */\n  [__register__](el, triggerType, ability) {\n    if (!this[__isRegistered__](el, triggerType, ability.name)) {\n      // Only registers if there aren't any triggers registered.\n      let handlers = this[__getTriggers__](el);\n      handlers[triggerType] = {ability: ability, handler: ability.trigger.bind(ability, el)};\n      HammerWrapper.on(el, this[__getEvent__](triggerType), handlers[triggerType].handler);\n    }\n  }\n\n  /**\n   * Unregisters the given trigger type from the element.\n   *\n   * @method __unregister__\n   * @param {!Element} el The element to unregister from.\n   * @param {!ability.Triggerable.TYPES} triggerType The type of trigger to unregister.\n   * @private\n   */\n  [__unregister__](el, triggerType) {\n    let handlers = this[__getTriggers__](el);\n    if (handlers[triggerType]) {\n      HammerWrapper.off(el, this[__getEvent__](triggerType), handlers[triggerType].handler);\n      delete handlers[triggerType];\n    }\n  }\n\n  /**\n   * @constructor\n   * @param {Object=} defaultValue An object with the triggerable type string as the key, and \n   *     the triggered ability's name as the value. These keys correspond to the element's \n   *     attributes. Defaults to empty object.\n   * @param {Array.<ability.Ability>=} knownAbilities A list of known abilities. This is used \n   *     when the element's attribute value is changed. Defaults to empty array.\n   */\n  constructor(defaultValue = {}, knownAbilities = []) {\n    this[__defaultValue__] = defaultValue;\n    this[__knownAbilities__] = {};\n    for (let ability of knownAbilities) {\n      this[__knownAbilities__][ability.name] = ability;\n    }\n  }\n\n  /**\n   * Sets the default value of the given element.\n   *\n   * @method setDefaultValue\n   * @param {!Element} el The element whose default value should be set.\n   */\n  setDefaultValue(el) {\n    for (let key in Triggerable.TYPES) {\n      let type = Triggerable.TYPES[key]; \n      let abilityName = this[__defaultValue__][type];\n      if ($(el).attr(type) === undefined && abilityName && this[__knownAbilities__][abilityName]) {\n        $(el).attr(type, abilityName);\n      }\n    }\n  }\n\n  /**\n   * Handles attribute change.\n   *\n   * @method attributeChangedCallback\n   * @param {!Element} el The element whose attribute was changed.\n   * @param {string} name Name of the attribute that was changed.\n   * @param {string} oldValue Old value of the changed attribute.\n   * @param {string} newValue New value of the changed attribute.\n   */\n  attributeChangedCallback(el, name, oldValue, newValue) {\n    for (let key in Triggerable.TYPES) {\n      if (name === Triggerable.TYPES[key]) {\n        // Unregister the old ability.\n        if (oldValue && this[__knownAbilities__][oldValue]) {\n          this[__unregister__](el, name, this[__knownAbilities__][oldValue]);\n        }\n\n        if (newValue && this[__knownAbilities__][newValue]) {\n          this[__register__](el, name, this[__knownAbilities__][newValue]);\n        }\n      }\n    }\n  }\n\n  /**\n   * Called when the element is attached to the document.\n   *\n   * @method attachedCallback\n   * @param {!Element} el The element that was attached.\n   */\n  attachedCallback(el) {\n    for (let key in Triggerable.TYPES) {\n      let triggerType = Triggerable.TYPES[key];\n      let abilityName = $(el).attr(triggerType);\n      if (abilityName && this[__knownAbilities__][abilityName]) {\n        this[__register__](el, triggerType, this[__knownAbilities__][abilityName]);\n      }\n    }\n  }\n\n  /**\n   * Called when the element is detached from the document.\n   *\n   * @method detachedCallback\n   * @param {!Element} el The element that was detached.\n   */\n  detachedCallback(el) {\n    for (let key in Triggerable.TYPES) {\n      this[__unregister__](el, Triggerable.TYPES[key]);\n    }\n  }\n}\n\nTriggerable.TYPES = {\n  /**\n   * Triggers when the element is clicked.\n   *\n   * @attribute pb-click\n   */\n  CLICK: 'pb-click',\n\n  /**\n   * Triggers when the element is double clicked.\n   *\n   * @attribute pb-dblclick\n   */\n  DOUBLE_CLICK: 'pb-dblclick'\n};\n\nexport default Triggerable = Triggerable;\n\nif (window['TEST_MODE']) {\n  Utils.makeGlobal('pb.ability.Triggerable', Triggerable);\n}\n","\n        for (var $__placeholder__0 =\n                 $__placeholder__1[Symbol.iterator](),\n                 $__placeholder__2;\n             !($__placeholder__3 = $__placeholder__4.next()).done; ) {\n          $__placeholder__5;\n          $__placeholder__6;\n        }","var $__placeholder__0 = $__placeholder__1","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2,\n                                       $__placeholder__3)","if (!$traceurRuntime.isSymbolString($__placeholder__0)) $__placeholder__1","import Utils from 'src/utils';\n\nimport Triggerable from 'src/ability/triggerable';\n\n// Private symbols.\nconst __register__ = Symbol();\n\n\n/**\n * Entry point to add any abilities to custom elements. Note that this only works on custom\n * elements.\n *\n * @class ability.Abilities\n * @static\n */\nconst Abilities = {\n\n  [__register__](ctorProto, ability) {\n    Utils.extendFn(\n        ctorProto,\n        'createdCallback',\n        function() {\n          ability.setDefaultValue.call(ability, this);\n        });\n    Utils.extendFn(\n        ctorProto, \n        'attributeChangedCallback', \n        function(name, oldValue, newValue) {\n          ability.attributeChangedCallback.call(ability, this, name, oldValue, newValue);\n        });\n    Utils.extendFn(\n        ctorProto, \n        'attachedCallback', \n        function() {\n          ability.attachedCallback.call(ability, this);\n        });\n    Utils.extendFn(\n        ctorProto, \n        'detachedCallback', \n        function() {\n          ability.detachedCallback.call(ability, this);\n        }, \n        true /* callBefore */);\n  },\n\n  /**\n   * Configures the given constructor to add abilities. This only works if the constructor is used\n   * for custom elements.\n   *\n   * Look at other classes in ability module to see what are supported.\n   * \n   * @param {!Function} ctor Constructor of the element to add the abilities to.\n   * @param {!Map.<Ability, Object>} cfg Map with the Ability as the key, and a default value object\n   *     specific to that ability. Check the Ability's documentation for more information.\n   */\n  config(ctor, cfg, ...abilities) {\n    let ctorProto = ctor.prototype;\n    let triggerConfig = {};\n    // collect the known abilities.\n    let knownAbilities = [];\n\n    // Get from config\n    for (let key in cfg) {\n      let ability = cfg[key];\n      knownAbilities.push(ability);\n      this[__register__](ctorProto, ability);\n      triggerConfig[key] = ability.name;\n    }\n\n    // Get from the rest of abilities\n    for (let ability of abilities) {\n      knownAbilities.push(ability);\n      this[__register__](ctorProto, ability);\n    }\n\n    this[__register__](ctorProto, new Triggerable(triggerConfig, knownAbilities));\n\n    return ctor;\n  }\n};\n\nexport default Abilities;\n\nif (window['TEST_MODE']) {\n  Utils.makeGlobal('pb.ability.Abilities', Abilities);\n}\n","\n            for (var $__placeholder__0 = [], $__placeholder__1 = $__placeholder__2;\n                 $__placeholder__3 < arguments.length; $__placeholder__4++)\n              $__placeholder__5[$__placeholder__6 - $__placeholder__7] = arguments[$__placeholder__8];","import Utils from 'src/utils';\n\n// Private symbols.\nconst __addChecked__ = Symbol();\nconst __checked__ = Symbol();\nconst __input__ = Symbol();\nconst __value__ = Symbol();\n\nclass Continuation {\n\n  [__addChecked__](checked) {\n    return new Continuation(\n        this[__input__], \n        this[__value__], \n        this[__checked__].concat(checked));\n  }\n\n  constructor(input, value = undefined, checked = []) {\n    this[__checked__] = checked;\n    this[__input__] = input;\n    this[__value__] = value;\n  }\n\n  isInt(radix = 10) {\n    let output = Number.parseInt(this[__input__], radix);\n    if (Number.isNaN(output)) {\n      return this[__addChecked__](`int(radix = ${radix})`);\n    }\n\n    return new Continuation(this[__input__], output);\n  }\n\n  isBoolean() {\n    return new Continuation(this[__input__], this[__input__].toLowerCase() === 'true');\n  }\n\n  orThrows(msg) {\n    if (this[__value__] === undefined) {\n      if (!msg) {\n        msg = `Illegal Exception. Checked: ${this[__checked__].join(', ')} ` +\n            `but was ${this[__input__]}`;\n      }\n      throw msg;\n    } else {\n      return this[__value__];\n    }\n  }\n\n  orUse(backup) {\n    return (this[__value__] === undefined) ? backup : this[__value__];\n  }\n}\n\nfunction check(input) {\n  return new Continuation(input);\n}\n\nexport default check;\n\nUtils.makeGlobal('pb.Check', check);\n","import Utils from 'src/utils';\n\n/**\n * Utility class to register / unregister events easily.\n *\n * @class Events\n * @static\n */\n\n// Private symbols.\nconst __element__ = Symbol();\nconst __scope__ = Symbol();\nconst __handlers__ = Symbol();\n\nclass Action {\n\n  /**\n   * @constructor\n   * @param  {!Element} element Element to operate on.\n   * @param  {!Object} scope Scope of the registered events.\n   */\n  constructor(element, scope) {\n    this[__element__] = element;\n    \n    if (!this[__element__][__scope__]) {\n      this[__element__][__scope__] = {};\n    }\n  }\n\n  /**\n   * @method isRegistered\n   * @param  {string} eventName Name of the event to be checked.\n   * @param  {Function=} handler The function to be checked.\n   * @return {Boolean} If handler is given, true iff the handler is registered to the given event\n   *     name. Otherwise, true iff there is a handler registered to the event.\n   */\n  isRegistered(eventName, handler) {\n    // TODO(gs): This check is too strict.\n    let eventSet = this[__element__][__scope__][eventName];\n    if (handler) {\n      return !!eventSet && eventSet.has(handler);\n    } else {\n      return !!eventSet && eventSet.size > 0;\n    }\n  }\n\n  /**\n   * Registers the given handler to the given event.\n   *\n   * @method register\n   * @param  {string} eventName Name of event to listen to.\n   * @param  {!Function} handler Handler to be called for the given event.\n   * @return {Events} The Events object for chaining.\n   */\n  register(eventName, handler) {\n    if (this.isRegistered(eventName, handler)) {\n      return this;\n    }\n\n    this[__element__].addEventListener(eventName, handler);\n\n    if (!this[__element__][__scope__][eventName]) {\n      this[__element__][__scope__][eventName] = new Set();\n    }\n    this[__element__][__scope__][eventName].add(handler);\n    return this;\n  }\n\n  /**\n   * Unregisters the handlers in the scope for the element.\n   *\n   * - If eventName and handler are given, only the handler listening to that event will be\n   * unregistered.\n   * - If only eventName is given, all handlers listening to that event name will be unregistered.\n   * - If no eventName is given, all handlers in the scope will be unregistered.\n   *\n   * @param  {string=} eventName If given, all handlers listening to this event will be \n   *     unregistered.\n   * @param  {Function=} handler Handler to unregister.\n   * @return {!Events} The Events object for chaining.\n   */\n  unregister(eventName, handler) {\n    if (!eventName) {\n      // Unregisters all events.\n      for (let event in this[__element__][__scope__]) {\n        this.unregister(event);\n      }\n      return this;\n    }\n\n    let eventSet = this[__element__][__scope__][eventName];\n    if (!eventSet) {\n      // Nothing is registered for this event name. Quit immediately.\n      return this;\n    }\n\n    if (!handler) {\n      // Unregisters all handlers for the given event name\n      eventSet.forEach(registeredHandler => this.unregister(eventName, registeredHandler));\n    } else {\n      // Unregister the given event name.\n      this[__element__].removeEventListener(eventName, handler);\n      eventSet.delete(handler);\n    }\n\n    return this;\n  }\n}\n\nlet Events = {\n  /**\n   * Creates an Events object that operates on the given element with the given scope.\n   *\n   * @method of\n   * @param  {!Element} element The element to operate on.\n   * @param  {!Object} scope Scope of the registered events.\n   * @return {!Events} Chainable Events object.\n   * @static\n   */\n  of(element, scope) {\n    return new Action(element, scope);\n  }\n};\n\nexport default Events = Events;\n\nif (window['TEST_MODE']) {\n  Utils.makeGlobal('pb.Events', Events);\n}\n","import Utils from 'src/utils';\n\n// Private symbols\nconst __lastDraggedEl__ = Symbol();\nconst __offsetX__ = Symbol();\nconst __offsetY__ = Symbol();\n\n/**\n * Service that keeps track of drag and drop.\n *\n * @class service.DragDrop\n */\nlet DragDrop = {\n\n  [__lastDraggedEl__]: null,\n\n  /**\n   * Start dragging the given element.\n   *\n   * @method dragStart\n   * @param {!Element} draggedEl The element that is dragged.\n   * @param {number} offsetX The x offset from the mouse cursor to the top left edge of the element\n   *     being dragged.\n   * @param {number} offsetY The y offset from the mouse cursor to the top left edge of the element\n   *     being dragged.\n   */\n  dragStart(draggedEl, offsetX, offsetY) {\n    this[__lastDraggedEl__] = draggedEl;\n    this[__offsetX__] = offsetX;\n    this[__offsetY__] = offsetY;\n    $(this).trigger(DragDrop.Events.LAST_DRAGGED_EL_CHANGED);\n  },\n\n  /**\n   * Ends the drag process.\n   *\n   * @method dragEnd\n   */\n  dragEnd() {\n    this[__lastDraggedEl__] = null;\n    this[__offsetX__] = undefined;\n    this[__offsetY__] = undefined;\n    $(this).trigger(DragDrop.Events.LAST_DRAGGED_EL_CHANGED);\n  },\n\n  /**\n   * Last element that was dragged.\n   *\n   * @property lastDraggedEl\n   * @type Element\n   * @readOnly\n   */\n  get lastDraggedEl() {\n    return this[__lastDraggedEl__];\n  },\n\n  /**\n   * The x offset from the mouse cursor to the top left edge of the element being dragged.\n   *\n   * @property offsetX\n   * @type number\n   * @readOnly\n   */\n  get offsetX() {\n    return this[__offsetX__];\n  },\n\n  /**\n   * The y offset from the mouse cursor to the top left edge of the element being dragged.\n   *\n   * @property offsetY\n   * @type number\n   * @readOnly\n   */\n  get offsetY() {\n    return this[__offsetY__];\n  }\n};\n\nDragDrop.Events = {\n  LAST_DRAGGED_EL_CHANGED: 'dragdrop-last_dragged_el_changed'\n};\n\nexport default DragDrop = DragDrop;\n\nUtils.makeGlobal('pb.service.DragDrop', DragDrop);\n","import Check  from 'src/check';\nimport Events from 'src/events';\nimport Utils  from 'src/utils';\n\nimport Ability         from 'src/ability/ability';\n\nimport DragDropService from 'src/service/dragdrop';\n\n/**\n * Provides decorator to make an element draggable. Use [[Abilities|ability.Abilities]] to decorate\n * the element. Note that these methods should be called with the element to be decorated as the\n * scope.\n *\n * @class ability.Draggable\n * @static\n * @extends ability.Ability\n */\n\n/**\n * Set to true to make this element draggable.\n * @attribute pb-draggable\n */\nconst ATTR_NAME = 'pb-draggable';\n\nconst CLASS_DRAGGED = 'pb-dragged';\n\n// Private symbols.\nconst __defaultValue__ = Symbol();\nconst __onDragEnd__ = Symbol();\nconst __onDragStart__ = Symbol('onDragStart');\nconst __register__ = Symbol();\nconst __unregister__ = Symbol();\n\nexport default class Draggable extends Ability {\n\n  /**\n   * @constructor\n   * @param  {boolean} defaultValue Default value of the element. True iff the element should be\n   *     enabled by default.\n   */\n  constructor(defaultValue) {\n    this[__defaultValue__] = defaultValue;\n  }\n\n  [__onDragEnd__](el) {\n    el.classList.remove(CLASS_DRAGGED);\n  }\n\n  [__onDragStart__](el, event) {\n    let dataTransfer = event.dataTransfer;\n    dataTransfer.effectAllowed = 'move';\n    el.classList.add(CLASS_DRAGGED);\n\n    let boundingRect = el.getBoundingClientRect();\n    DragDropService.dragStart(\n        this.getMovedElement(el),\n        event.clientX - boundingRect.left,\n        event.clientY - boundingRect.top);\n  }\n\n  [__register__](element) {\n    // Propagate the draggable attribute to the root element.\n    Utils.toArray(element.children).forEach(child => {\n      $(child).attr('draggable', 'true');\n      Events.of(child, this)\n          .register('dragstart', this[__onDragStart__].bind(this, element))\n          .register('dragend', this[__onDragEnd__].bind(this, element));\n    });\n  }\n\n  [__unregister__](element) {\n    Utils.toArray(element.children).forEach(child => {\n      Events.of(child, this).unregister();\n      $(child).attr('draggable', null);\n    });\n  }\n\n  /**\n   * Sets the default value of the given element.\n   *\n   * @method setDefaultValue\n   * @param {!Element} el The element whose default value should be set.\n   */\n  setDefaultValue(el) {\n    if ($(el).attr(ATTR_NAME) === undefined) {\n      $(el).attr(ATTR_NAME, this[__defaultValue__]);\n    }\n  }\n\n  /**\n   * Handles attribute change.\n   *\n   * @method attributeChangedCallback\n   * @param {!Element} el The element whose attribute was changed.\n   * @param {string} name Name of the attribute that was changed.\n   * @param {string} oldValue Old value of the changed attribute.\n   * @param {string} newValue New value of the changed attribute.\n   */\n  attributeChangedCallback(el, name, oldValue, newValue) {\n    if (name === ATTR_NAME) {\n      newValue = Check(newValue).isBoolean(newValue).orThrows();\n      if (newValue) {\n        this[__register__](el);\n      } else {\n        this[__unregister__](el);\n      }\n    }\n  }\n\n  /**\n   * Handles registration when the element is attached to the document.\n   *\n   * @method attachedCallback\n   * @param {!Element} el The element that was attached.\n   */\n  attachedCallback(el) {\n    if ($(el).attr(ATTR_NAME) && Check($(el).attr(ATTR_NAME)).isBoolean().orThrows()) {\n      this[__register__](el);\n    }\n  }\n\n  /**\n   * Handles unregistration when the element is detached from the document.\n   *\n   * @method detachedCallback\n   * @param {!Element} el The element that was detached.\n   */\n  detachedCallback(el) {\n    this[__unregister__](el);\n  }\n\n  /**\n   * Returns the element that will be moved, if the given element were to be dragged and dropped.\n   *\n   * @method  getMovedElement \n   * @param  {!Element} el The element that is dragged.\n   * @return {!Element} The element that will be moved if the given element was dragged and dropped.\n   */\n  getMovedElement(el) {\n    return el;\n  }\n\n  /**\n   * The name of the ability.\n   * \n   * @attribute name\n   * @type string\n   */\n  get name() {\n    return ATTR_NAME;\n  }\n}\n\nif (window['TEST_MODE']) {\n  Utils.makeGlobal('pb.ability.Draggable', Draggable);\n}\n","import Check from 'src/check';\nimport Utils from 'src/utils';\n\nimport Ability from 'src/ability/ability';\n\n/**\n * Makes the component rotateable. This adds a transform rotateZ CSS rule to the component.\n * @class ability.Rotateable\n * @extends ability.Ability\n */\n\nconst ATTR_NAME = 'pb-rotateable';\nconst ATTR_INDEX = 'pb-orientation-index';\n\n// Private symbols.\nconst __defaultIndex__ = Symbol();\nconst __defaultOrientations__ = Symbol();\nconst __getOrientations__ = Symbol();\nconst __getOrientationIndex__ = Symbol();\nconst __setOrientationIndex__ = Symbol('setOrientationIndex');\n\nexport default class Rotateable extends Ability {\n\n  [__getOrientations__](el) {\n    return $(el).attr(ATTR_NAME).split(' ')\n        .map(str => Check(str).isInt().orUse(undefined))\n        .filter(value => Number.isInteger(value));\n  }\n\n  [__getOrientationIndex__](el) {\n    return Check($(el).attr(ATTR_INDEX)).isInt().orThrows();\n  }\n\n  /**\n   * Sets the orientation index of the given element to the given value. This only updates\n   * the pb-orientation-index attribute value.\n   *\n   * @method  __setOrientationIndex__\n   * @param {!Element} el The Element to set the orientation index of.\n   * @param {number} index The orientation index to set to\n   * @private\n   */\n  [__setOrientationIndex__](el, index) {\n    let orientations = this[__getOrientations__](el);\n    if (orientations.length > 0) {\n      if (index < 0) {\n        index = -(-index % orientations.length);\n        index += orientations.length;\n      } \n\n      if (index >= orientations.length) {\n        index %= orientations.length;\n      }\n\n      $(el).attr(ATTR_INDEX, index);\n    }\n  }\n\n  /**\n   * @constructor\n   * @param {Array.<number>} defaultOrientations Array of default orientations, in degrees.\n   * @param {number} defaultIndex The index of the default orientation.\n   */\n  constructor(defaultOrientations = [0], defaultIndex = 0) {\n    this[__defaultIndex__] = defaultIndex;\n    this[__defaultOrientations__] = defaultOrientations.join(' ');\n  }\n\n  /**\n   * Sets the default value of the given element.\n   *\n   * @method setDefaultValue\n   * @param {!Element} el The element whose default value should be set.\n   */\n  setDefaultValue(el) {\n    if ($(el).attr(ATTR_NAME) === undefined || $(el).attr(ATTR_NAME) === 'true') {\n      $(el).attr(ATTR_NAME, this[__defaultOrientations__]);\n    }\n\n    if ($(el).attr(ATTR_INDEX) === undefined) {\n      $(el).attr(ATTR_INDEX, this[__defaultIndex__]);\n    }\n  }\n\n  /**\n   * Handles attribute change.\n   *\n   * @method attributeChangedCallback\n   * @param {!Element} el The element whose attribute was changed.\n   * @param {string} name Name of the attribute that was changed.\n   * @param {string} oldValue Old value of the changed attribute.\n   * @param {string} newValue New value of the changed attribute.\n   */\n  attributeChangedCallback(el, name, oldValue, newValue) {\n    if (name === ATTR_NAME) {\n      // Refreshes the orientation index.\n      this[__setOrientationIndex__](el, this[__getOrientationIndex__](el));\n    }\n\n    if (name === ATTR_INDEX) {\n      let orientation = this[__getOrientations__](el)[Check(newValue).isInt().orThrows()];\n      el.style.transform = `rotateZ(${orientation}deg)`;\n    }\n  }\n\n  /**\n   * Change the orientation of the element.\n   *\n   * @method trigger\n   * @param {!Element} el The element to trigger the ability on.\n   */\n  trigger(el) {\n    this[__setOrientationIndex__](el, this[__getOrientationIndex__](el) + 1);\n  }\n\n  /**\n   * The name of the ability.\n   * \n   * @attribute name\n   * @type string\n   */\n  get name() {\n    return ATTR_NAME;\n  }\n}\n\nif (window['TEST_MODE']) {\n  Utils.makeGlobal('pb.ability.Rotateable', Rotateable);\n}","import Check    from 'src/check';\nimport Utils from 'src/utils';\n\nimport Ability     from 'src/ability/ability';\nimport Triggerable from 'src/ability/triggerable';\n\n/**\n * Set to true to make this element toggleable.\n * @attribute pb-toggleable\n */\nconst ATTR_NAME = 'pb-toggleable';\n\n/**\n * Set to true to show the front side of the element, however front is defined.\n *\n * @attribute pb-showfront\n */\nconst ATTR_SHOWFRONT = 'pb-showfront';\n\n// Private symbols.\nconst __defaultEnabled__ = Symbol();\nconst __defaultShowFront__ = Symbol();\n\nfunction isEnabled(el) {\n  return Check($(el).attr(ATTR_NAME)).isBoolean().orThrows();\n}\n\nfunction isShowFront(el) {\n  return Check($(el).attr(ATTR_SHOWFRONT)).isBoolean().orThrows();\n}\n\n/**\n * @class ability.Toggleable\n * @static\n * @extends ability.Ability\n */\nexport default class Toggleable extends Ability {\n\n  /**\n   * @constructor\n   * @param {boolean} defaultEnabled True iff the element registered to this ability will have\n   *     this ability enabled by default.\n   * @param {boolean} defaultShowFront True iff the element registered to this ability will\n   *     show the front side by default.\n   */\n  constructor(defaultEnabled = true, defaultShowFront = false) {\n    this[__defaultEnabled__] = defaultEnabled;\n    this[__defaultShowFront__] = defaultShowFront;\n  }\n\n  /**\n   * Sets the default value of the given element.\n   *\n   * @method setDefaultValue\n   * @param {!Element} el The element whose default value should be set.\n   */\n  setDefaultValue(el) {\n    if ($(el).attr(ATTR_NAME) === undefined) {\n      $(el).attr(ATTR_NAME, this[__defaultEnabled__]);\n    }\n\n    if ($(el).attr(ATTR_SHOWFRONT) === undefined) {\n      $(el).attr(ATTR_SHOWFRONT, this[__defaultShowFront__]);\n    }\n  }\n\n  /**\n   * Toggles the state of the element.\n   *\n   * @method trigger\n   * @param  {!Element} el Element to toggle the state of.\n   */\n  trigger(el) {\n    if (isEnabled(el)) {\n      $(el).attr(ATTR_SHOWFRONT, !isShowFront(el));\n    }\n  }\n\n  /**\n   * The name of the ability.\n   * \n   * @attribute name\n   * @type string\n   */\n  get name() {\n    return ATTR_NAME;\n  }\n}\n\nif (window['TEST_MODE']) {\n  Utils.makeGlobal('pb.ability.Toggleable', Toggleable);\n}","import Utils from 'src/utils';\n\n/**\n * Base class of all ProtoBoard elements.\n * \n * @class PbElement\n * @extends HTMLElement\n */\nexport default class PbElement extends HTMLElement {\n\n  createdCallback() {\n    /**\n     * True iff the element has been created and attached.\n     *\n     * @type boolean\n     * @property isCreated\n     */\n    this.isCreated = false;\n  }\n\n  attachedCallback() {\n    this.isCreated = true;\n  }\n\n  detachedCallback() { }\n}\n\nUtils.makeGlobal('pb.PbElement', PbElement);\n","$traceurRuntime.defaultSuperCall(this,\n                $__placeholder__0.prototype, arguments)","import Utils from 'src/utils';\nimport DragDropService from 'src/service/dragdrop';\nimport PbElement from 'src/pbelement';\n\n/**\n * Base class for all components.\n *\n * @class component.Component\n * @extends PbElement  \n */\nexport default class Component extends PbElement {\n\n  /**\n   * For testing only.\n   */\n  constructor() { }\n\n  createdCallback() {\n    super.createdCallback();\n  }\n}\n\nif (window.TEST_MODE) {\n  Utils.makeGlobal('pb.component.Component', Component);\n}\n","$traceurRuntime.superCall($__placeholder__0, $__placeholder__1, $__placeholder__2,\n                                   $__placeholder__3)","import Utils from 'src/utils';\n\nimport Component from 'src/component/component';\n\nimport Abilities  from 'src/ability/abilities';\nimport Draggable  from 'src/ability/draggable';\nimport Rotateable from 'src/ability/rotateable';\nimport Toggleable from 'src/ability/toggleable';\n\nlet doc = null;\nlet template = null;\n\nconst EL_NAME = 'pb-c-card';\n\n/**\n * A representation of a card. To use this, create a `pb-c-card` element with two child elements:\n * - One must have a `pb-front` class. This is the front face of the card.\n * - One must have a `pb-back` class. This is the back face of the card.\n *\n * By default, the card starts by showing its back. If you want to make it start by showing the \n * front face, add `pb-showfront=\"true\"` to the `pb-c-card`.\n * \n * @class component.Card\n * @extends component.Component\n */\nexport default class Card extends Component {\n\n  createdCallback() {\n    super.createdCallback();\n    this.createShadowRoot()\n        .appendChild(Utils.activateTemplate(template, doc));\n    this.attachedCallback();\n  }\n\n  /**\n   * Registers `pb-c-card` to the document.\n   *\n   * @method register\n   * @static\n   * @param {!Document} currentDoc The document object to register the element to.\n   * @param {!Element} cardTemplate The template for the pb-c-card's element shadow DOM.\n   */\n  static register(currentDoc, cardTemplate) {\n    if (!doc && !template) {\n      document.registerElement(EL_NAME,  {\n        prototype: Abilities.config(\n            Card,\n            {\n              'pb-click': new Toggleable(true),\n            },\n            new Draggable(true),\n            new Rotateable()).prototype\n      });\n    }\n\n    doc = currentDoc;\n    template = cardTemplate;\n  }\n}\n\nUtils.makeGlobal('pb.component.Card', Card);\n","import Component from 'src/component/component';\nimport Utils from 'src/utils';\nimport Abilities from 'src/ability/abilities';\nimport Draggable from 'src/ability/draggable';\n\nlet doc = null;\nlet template = null;\n\nconst EL_NAME = 'pb-c-token';\n\n/**\n * A simple movable component with only one state. Examples of token:\n * - Chess piece\n * - Cubes\n * - Damage marker\n *\n * To use this, create a `pb-c-token` element with one child element. This child element will be\n * displayed as the token.\n *\n * @class component.Token\n * @extends component.Component\n */\nexport default class Token extends Component {\n\n  createdCallback() {\n    super.createdCallback();\n    this.createShadowRoot().appendChild(Utils.activateTemplate(template, doc));\n  }\n\n  /**\n   * Registers `pb-c-token` to the document.\n   *\n   * @method register\n   * @static\n   * @param {!Document} currentDoc The document object to register the element to.\n   * @param {!Element} tokenTemplate The template for the `pb-c-token`'s shadow DOM.\n   */\n  static register(currentDoc, tokenTemplate) {\n    if (doc || template) {\n      // Registration has already happened.\n      return;\n    }\n\n    doc = currentDoc;\n    template = tokenTemplate;\n    document.registerElement(EL_NAME, {\n      prototype: Abilities.config(\n          Token,\n          {},\n          new Draggable(true)).prototype\n    });\n  }\n}\n\nUtils.makeGlobal('pb.component.Token', Token);\n","import Check  from 'src/check';\nimport Events from 'src/events';\nimport Utils  from 'src/utils';\n\nimport Ability from 'src/ability/ability';\n\nimport DragDrop from 'src/service/dragdrop';\n\n/**\n * Provides decorator to make an element be a drop target for drag and drop.\n * \n * @class ability.Droppable\n * @static\n * @extends ability.Ability\n */\n\nconst ATTR_NAME = 'pb-droppable';\nconst CLASS_OVER = 'pb-over';\n\n// Private symbols.\nconst __defaultValue__ = Symbol();\nconst __dragEnterCount__ = Symbol();\nconst __observeHandler__ = Symbol();\nconst __onDragOver__ = Symbol();\nconst __onDragEnter__ = Symbol('onDragEnter');\nconst __onDragLeave__ = Symbol();\nconst __onLastDraggedElChange__ = Symbol();\nconst __register__ = Symbol('register');\nconst __unregister__ = Symbol('unregister');\n\nexport default class Droppable extends Ability {\n\n  constructor(defaultValue) {\n    this[__defaultValue__] = defaultValue;\n    this[__dragEnterCount__] = 0;\n  }\n\n  [__onDragOver__](el, event) {\n    event.preventDefault();\n    event.dropEffect = 'move';\n  }\n\n  [__onDragEnter__](el) {\n    el.classList.add(CLASS_OVER);\n    this[__dragEnterCount__]++;\n  }\n\n  [__onDragLeave__](el, event) {\n    this[__dragEnterCount__]--;\n    if (this[__dragEnterCount__] <= 0) {\n      this[__dragEnterCount__] = 0;\n      el.classList.remove(CLASS_OVER);\n    }\n  }\n\n  [__onLastDraggedElChange__](el) {\n    if (!DragDrop.lastDraggedEl) {\n      this[__dragEnterCount__] = 0;\n      el.classList.remove(CLASS_OVER);\n    }\n  }\n\n  [__register__](el) {\n    Events.of(el, this)\n        .register('dragover', this[__onDragOver__].bind(this, el))\n        .register('dragenter', this[__onDragEnter__].bind(this, el))\n        .register('dragleave', this[__onDragLeave__].bind(this, el))\n        .register('drop', this.trigger.bind(this, el));\n\n    $(DragDrop).on(\n        DragDrop.Events.LAST_DRAGGED_EL_CHANGED, \n        this[__onLastDraggedElChange__].bind(this, el));\n  }\n\n  [__unregister__](el) {\n    // TODO(gs): off the last dragged el changed\n\n    Events.of(el, this).unregister();\n  }\n\n  /**\n   * Sets the default value of the given element.\n   *\n   * @method setDefaultValue\n   * @param {!Element} el The element whose default value should be set.\n   */\n  setDefaultValue(el) {\n    if ($(el).attr(ATTR_NAME) === undefined) {\n      $(el).attr(ATTR_NAME, this[__defaultValue__]);\n    }\n  }\n\n  /**\n   * Handles attribute change.\n   *\n   * @method attributeChangedCallback\n   * @param {!Element} el The element whose attribute was changed.\n   * @param {string} name Name of the attribute that was changed.\n   * @param {string} oldValue Old value of the changed attribute.\n   * @param {string} newValue New value of the changed attribute.\n   */\n  attributeChangedCallback(el, name, oldValue, newValue) {\n    if (name === ATTR_NAME) {\n      newValue = Check(newValue).isBoolean(newValue).orThrows();\n      if (newValue) {\n        this[__register__](el);\n      } else {\n        this[__unregister__](el);\n      }\n    }\n  }\n\n  /**\n   * Handles registration when the element is attached to the document.\n   *\n   * @method attachedCallback\n   * @param {!Element} el The element that was attached.\n   */\n  attachedCallback(el) {\n    if ($(el).attr(ATTR_NAME) && Check($(el).attr(ATTR_NAME)).isBoolean().orThrows()) {\n      this[__register__](el);\n    }\n  }\n\n  /**\n   * Handles unregistration when the element is detached from the document.\n   *\n   * @method detachedCallback\n   * @param {!Element} el The element that was detached.\n   */\n  detachedCallback(el) {\n    this[__unregister__](el);\n  }\n\n  /**\n   * Returns the element that will be moved, if the given element were to be dragged and dropped.\n   *\n   * @method  getMovedElement \n   * @param  {!Element} el The element that is dragged.\n   * @return {!Element} The element that will be moved if the given element was dragged and dropped.\n   */\n  getMovedElement(el) {\n    return el;\n  }\n\n  /**\n   * Drop the last dragged element on the given element\n   *\n   * @method trigger\n   * @param {!Element} el The element to drop the dragged element into.\n   * @param {!Event} event Event object that triggered the call.\n   */\n  trigger(el, event) {\n    el.classList.remove(CLASS_OVER);\n\n    let lastDraggedEl = DragDrop.lastDraggedEl;\n    if (lastDraggedEl) {\n      el.appendChild(lastDraggedEl);\n\n      // TODO(gs): attached callback doesn't seem to be called on appendChild.\n      // https://github.com/webcomponents/webcomponentsjs/issues/18\n      if (DragDrop.lastDraggedEl.attachedCallback) {\n        DragDrop.lastDraggedEl.attachedCallback();\n      }\n    }\n    DragDrop.dragEnd();\n  }\n\n  /**\n   * The name of the ability.\n   * \n   * @attribute name\n   * @type string\n   */\n  get name() {\n    return ATTR_NAME;\n  }\n}\n\nif (window['TEST_MODE']) {\n  Utils.makeGlobal('pb.ability.Droppable', Droppable);\n}","import Utils from 'src/utils';\n\nlet source = null;\n\nconst CLASS_DISTRIBUTE = 'pb-distribute';\n\n/**\n * Service that manages the distributing action.\n *\n * @class service.Distribute\n * @static\n */\nlet Distribute = {\n\n  /**\n   * Starts the distribution action.\n   *\n   * @method begin\n   * @param {!Bag} distributeSource Source to distribute the elements from.\n   */\n  begin(distributeSource) {\n    if (!this.isActive()) {\n      source = distributeSource;\n      distributeSource.classList.add(CLASS_DISTRIBUTE);\n      $(this).trigger(this.EventType.BEGIN);\n    }\n  },\n\n  /**\n   * Ends the distribution process.\n   *\n   * @method end\n   */\n  end() {\n    if (this.isActive()) {\n      source.classList.remove(CLASS_DISTRIBUTE);\n      source = null;\n      $(this).trigger(this.EventType.END);\n    }\n  },\n\n  /**\n   * @method isActive\n   * @return {boolean} True iff the distribution is active.\n   */\n  isActive() {\n    return source !== null;\n  },\n\n  /**\n   * @method next\n   * @return {Element} The first child of the distribution source.\n   */\n  next() {\n    return source.next();\n  },\n\n  EventType: {\n    /**\n     * Event type dispatched when the distribution is starting.\n     *\n     * @type string\n     * @property EventType.BEGIN\n     */\n    BEGIN: 'distribute-begin',\n\n    /**\n     * Event type dispatched when the distribution is ending.\n     *\n     * @type string\n     * @property EventType.END\n     */\n    END: 'distribute-end'\n  }\n};\n\n$(window).on('keydown', event => {\n  // Check if this is ESC key.\n  if (event.which === 27 && Distribute.isActive()) {\n    Distribute.end();\n  }\n});\n\nexport default Distribute = Distribute;\n\nUtils.makeGlobal('pb.service.Distribute', Distribute);","import Events    from 'src/events';\nimport PbElement from 'src/pbelement';\nimport Utils     from 'src/utils';\n\nimport Distribute from 'src/service/distribute';\nimport DragDrop   from 'src/service/dragdrop';\n\nconst CLASS_DISTRIBUTE = 'pb-distribute';\n\n// TODO(gs): Make Distributable\n\n// Private symbols\nconst __onClick__ = Symbol();\nconst __onDistributeBegin__ = Symbol();\nconst __onDistributeEnd__ = Symbol();\n\n/**\n * Base class of all regions. All regions are drop targets.\n * @class region.Region\n * @extends HTMLElement\n */\nexport default class Region extends PbElement {\n\n  /** For testing only */\n  constructor() { }\n\n  [__onClick__]() {\n    if (Distribute.isActive() && Distribute.next()) {\n      this.appendChild(Distribute.next());\n    }\n  }\n\n  [__onDistributeBegin__]() {\n    if (this.shadowRoot) {\n      this.shadowRoot.querySelector('#root').classList.add(CLASS_DISTRIBUTE);\n    }\n  }\n\n  [__onDistributeEnd__]() {\n    if (this.shadowRoot) {\n      this.shadowRoot.querySelector('#root').classList.remove(CLASS_DISTRIBUTE);\n    }\n  }\n\n  createdCallback() {\n    super.createdCallback();\n  }\n\n  attachedCallback() {\n    super.attachedCallback();\n    Events.of(this, this).register('click', this[__onClick__].bind(this));\n\n    $(Distribute)\n        .on(Distribute.EventType.BEGIN, this[__onDistributeBegin__].bind(this))\n        .on(Distribute.EventType.END, this[__onDistributeEnd__].bind(this));\n  }\n\n  detachedCallback() {\n    Events.of(this, this).unregister();\n  }\n}\n\n/**\n * Refers to pb-droppable attribute\n *\n * @type string\n * @property ATTR_DROPPABLE\n * @static\n */\n\n/**\n * If set to true, this will be droppable for any kind of elements.\n * If set to false, this will not be droppable.\n * Otherwise, the string will be treated as a selector for elements that can be dropped into this\n * element. \n *\n * @attribute pb-droppable\n */\nRegion.ATTR_DROPPABLE = 'pb-droppable';\n\nif (window.TEST_MODE) {\n  Utils.makeGlobal('pb.region.Region', Region);\n}","import Utils     from 'src/utils';\n\nimport Abilities from 'src/ability/abilities';\nimport Draggable from 'src/ability/draggable';\nimport Droppable from 'src/ability/droppable';\n\nimport Region    from 'src/region/region';\n\n/**\n * A collection of components. You cannot see the component until you drag one out of it.\n *\n * To make a bag, create a `pb-r-bag` element. You can override the content of the placeholder by\n * creating a child element with a `pb-placeholder-content` attribute. This element will be used for\n * the placeholder content.\n * \n * @class region.Bag\n * @extends region.Region\n */\n\nconst EL_NAME = 'pb-r-bag';\nconst ATTR_PLACEHOLDER = 'pb-placeholder';\nconst ATTR_PLACEHOLDER_CONTENT = 'pb-placeholder-content';\n\n// Private symbols\nconst __bag__ = Symbol();\nconst __draggable__ = Symbol('draggable');\nconst __placeHolderEl__ = Symbol('placeHolderEl');\n\nlet doc = null;\nlet template = null;\nlet placeHolderTmp = null;\n\n\nclass BagDraggable extends Draggable {\n\n  constructor(bag) {\n    super(true);\n    this[__bag__] = bag;\n  }\n\n  getMovedElement(el) {\n    let candidates = Utils.toArray(this[__bag__].children).filter(\n        child => $(child).attr(ATTR_PLACEHOLDER) === undefined);\n    return candidates[Math.round(Math.random() * (candidates.length - 1))];\n  }\n}\n\nexport default class Bag extends Region {\n\n  /**\n   * Called when the element is created.\n   *\n   * @method createdCallback\n   */\n  createdCallback() {\n    super.createdCallback();\n    this.createShadowRoot().appendChild(Utils.activateTemplate(template, doc));\n\n    this[__placeHolderEl__] = this.querySelector(`[${ATTR_PLACEHOLDER}]`);\n\n    if (!this[__placeHolderEl__]) {\n      let placeHolderContent = this.querySelector(`[${ATTR_PLACEHOLDER_CONTENT}]`) ||\n          Utils.activateTemplate(placeHolderTmp, doc);\n\n      this[__placeHolderEl__] = doc.createElement('div');\n      this[__placeHolderEl__].appendChild(placeHolderContent);\n      $(this[__placeHolderEl__]).attr(ATTR_PLACEHOLDER, '');\n      this.insertBefore(this[__placeHolderEl__], this.lastChild);\n    }\n\n    this[__draggable__] = new BagDraggable(this);\n    this[__draggable__].setDefaultValue(this[__placeHolderEl__]);\n\n    this.attachedCallback();\n  }\n\n  /**\n   * Called when the element is attached to the document.\n   *\n   * @method attachedCallback\n   */\n  attachedCallback() {\n    super.attachedCallback();\n    this[__draggable__].attachedCallback(this[__placeHolderEl__]);\n  }\n\n  /**\n   * Called when the element is detached from the document.\n   *\n   * @method detachedCallback\n   */\n  detachedCallback() {\n    this[__draggable__].detachedCallback(this[__placeHolderEl__]);\n    super.detachedCallback();\n  }\n\n  /**\n   * Called when the element's attribute has changed\n   *\n   * @method attributeChangedCallback\n   * @param  {string} name The name of the changed attribute.\n   * @param  {string} oldValue The old value of the attribute.\n   * @param  {string} newValue The new value of the attribute.\n   */\n  attributeChangedCallback(name, oldValue, newValue) {\n    this[__draggable__].attributeChangedCallback(this[__placeHolderEl__], name, oldValue, newValue);\n  }\n  \n  /**\n   * Registers `pb-r-bag` to the document.\n   *\n   * @method register\n   * @static\n   * @param  {!Document} currentDoc The document object to register the element to.\n   * @param  {!Element} bagTemplate The template for the pb-r-bag's element DOM.\n   * @return {[type]} [description]\n   */\n  static register(currentDoc, bagTemplate, placeHolderTemplate) {\n    if (!doc || !template) {\n      doc = currentDoc;\n      template = bagTemplate;\n      placeHolderTmp = placeHolderTemplate;\n    }\n\n    document.registerElement(EL_NAME, {\n      prototype: Abilities.config(\n          Bag,\n          {},\n          new Droppable(true)).prototype\n    });\n  } \n}\n\nBag.prototype[__draggable__] = null;\nBag.prototype[__placeHolderEl__] = null;\n\nUtils.makeGlobal('pb.region.Bag', Bag);\n\nif (window['TEST_MODE']) {\n  Utils.makeGlobal('pb.region.Bag.BagDraggable', BagDraggable);\n}","import Check from 'src/check';\nimport Utils from 'src/utils';\n\nimport Ability from 'src/ability/ability';\n\n/**\n * @class ability.Shuffleable\n * @extends ability.Ability\n */\n\nconst ATTR_NAME = 'pb-shuffleable';\n\n// Private symbols.\nconst __defaultEnabled__ = Symbol();\n\nexport default class Shuffleable extends Ability {\n\n  /**\n   * @constructor\n   * @param {boolean=} defaultEnabled True iff this ability should be enabled by default. Defaults\n   *     to true.\n   */\n  constructor(defaultEnabled = true) {\n    this[__defaultEnabled__] = defaultEnabled;\n  }\n\n  /**\n   * Sets the default value of the given element.\n   *\n   * @method setDefaultValue\n   * @param {!Element} el The element whose default value should be set.\n   */\n  setDefaultValue(el) {\n    if ($(el).attr(ATTR_NAME) === undefined) {\n      $(el).attr(ATTR_NAME, this[__defaultEnabled__]);\n    }\n  }\n\n  /**\n   * Shuffles the children of the given element.\n   *\n   * @method trigger\n   * @param {!Element} el The element whose children should be shuffled.\n   */\n  trigger(el) {\n    if (Check($(el).attr(ATTR_NAME)).isBoolean().orThrows()) {\n      let pairs = Utils.toArray(el.children).map(child => [child, Math.random()]);\n      pairs.sort((a, b) => Utils.compare(a[1], b[1]));\n\n      let shuffled = pairs.map(pair => pair[0]);\n      shuffled.forEach(shuffledEl => el.appendChild(shuffledEl));\n    }\n  }\n\n  /**\n   * The name of the ability.\n   * \n   * @attribute name\n   * @type string\n   */\n  get name() {\n    return ATTR_NAME;\n  }\n}\n\nUtils.makeGlobal('pb.ability.Shuffleable', Shuffleable);","import Events from 'src/events';\nimport Utils  from 'src/utils';\n\nimport Abilities   from 'src/ability/abilities';\nimport Droppable   from 'src/ability/droppable';\nimport Shuffleable from 'src/ability/shuffleable';\nimport Triggerable from 'src/ability/triggerable';\n\nimport Region from 'src/region/region';\n\nlet doc = null;\nlet template = null;\n\nconst EL_NAME = 'pb-r-deck';\n\n/**\n * Represents a collection of items that can be sorted. To use this, create a `pb-r-deck` element.\n * Any child elements of this class are considered to be in the deck.\n *\n * @class region.Deck\n * @extends region.Region\n */\nexport default class Deck extends Region {\n\n  createdCallback() {\n    super.createdCallback();\n    this.createShadowRoot().appendChild(Utils.activateTemplate(template, doc));\n    this.attachedCallback();\n  }\n\n  /**\n   * Called when the element is attached to the document.\n   *\n   * @method attachedCallback\n   */\n  attachedCallback() {\n    super.attachedCallback();\n    // TODO(gs): Add shuffle as action.\n    Events.of(this.shadowRoot.querySelector('#shuffle'), this)\n        .register('click', this.shuffle.bind(this));\n  }\n\n  /**\n   * Called when the element is detached from the document.\n   *\n   * @method detachedCallback\n   */\n  detachedCallback() {\n    super.detachedCallback();\n    Events.of(this.shadowRoot.querySelector('#shuffle'), this).unregister();\n  }\n\n  /**\n   * Shuffles the children of this element.\n   *\n   * @method shuffle\n   */\n  shuffle() {\n    let pairs = Utils.toArray(this.children).map(child => [child, Math.random()]);\n    pairs.sort((a, b) => Utils.compare(a[1], b[1]));\n    let shuffled = pairs.map(pair => pair[0]);\n    shuffled.forEach((el => this.appendChild(el)).bind(this));\n  }\n\n  /**\n   * Registers `pb-r-deck` to the document.\n   *\n   * @method register\n   * @static\n   * @param {!Document} currentDoc The document object to register the element to.\n   * @param {!Element} deckTemplate The template for the `pb-r-deck`'s element shadow DOM.\n   */\n  static register(currentDoc, deckTemplate) {\n    if (!doc || !template) {\n      doc = currentDoc;\n      template = deckTemplate;\n    }\n\n    document.registerElement(EL_NAME, {\n      prototype: Abilities.config(\n          Deck,\n          {\n            [Triggerable.TYPES.DOUBLE_CLICK]: new Shuffleable(true)\n          },\n          new Droppable(true)).prototype\n    });\n  }\n}\n\nUtils.makeGlobal('pb.region.Deck', Deck);\n","import Utils from 'src/utils';\n\nimport Abilities from 'src/ability/abilities';\nimport Droppable from 'src/ability/droppable';\n\nimport Region from 'src/region/region';\n\nimport DragDrop from 'src/service/dragdrop';\n\nlet doc = null;\nlet template = null;\n\nconst EL_NAME = 'pb-r-rect';\n\n/**\n * An arbitrary rectangular region. You can position elements anywhere in this region.\n *\n * @class region.Rect\n * @extends region.Region\n */\n\nclass SmartDroppable extends Droppable {\n\n  constructor(defaultValue) {\n    super(defaultValue);\n  }\n\n  /**\n   * Drop the last dragged element on the given element\n   *\n   * @method trigger\n   * @param {!Element} el The element to drop the dragged element into.\n   * @param {!Event} event Event object that triggered the call.\n   */\n  trigger(el, event) {\n    el.classList.remove('pb-over');\n    let lastDraggedEl = DragDrop.lastDraggedEl;\n    if (!lastDraggedEl) {\n      return;\n    }\n    el.appendChild(lastDraggedEl);\n\n    let screenCoord = lastDraggedEl.getBoundingClientRect();\n    let dLeft = event.clientX - screenCoord.left - DragDrop.offsetX;\n    let dTop = event.clientY - screenCoord.top - DragDrop.offsetY;\n    lastDraggedEl.style.left = `${lastDraggedEl.offsetLeft + dLeft}px`;\n    lastDraggedEl.style.top = `${lastDraggedEl.offsetTop + dTop}px`;\n\n    // TODO(gs): attached callback doesn't seem to be called on appendChild.\n    // https://github.com/webcomponents/webcomponentsjs/issues/18\n    if (DragDrop.lastDraggedEl.attachedCallback) {\n      DragDrop.lastDraggedEl.attachedCallback();\n    }\n    DragDrop.dragEnd();\n  }\n}\n\n\nclass Rect extends Region {\n  constructor() {\n    super();\n  }\n\n  createdCallback() {\n    super.createdCallback();\n    this.createShadowRoot().appendChild(Utils.activateTemplate(template, doc));\n  }\n\n  /**\n   * Registers `pb-r-rect` to the document.\n   *\n   * @method register\n   * @static\n   * @param {!Document} currentDoc The document object to register the element to.\n   * @param {!Element} rectTemplate The template for the `pb-r-rect`'s element shadow DOM.\n   */\n  static register(currentDoc, rectTemplate) {\n    if (doc || template) {\n      // Registration has already happened.\n      return;\n    }\n\n    doc = currentDoc;\n    template = rectTemplate;\n    document.registerElement(EL_NAME,  {\n      prototype: Abilities.config(\n          Rect,\n          {},\n          new SmartDroppable(true)).prototype\n    });\n  }\n}\n\nexport default Rect = Rect;\n\nUtils.makeGlobal('pb.region.Rect', Rect);\n\nif (window['TEST_MODE']) {\n  Utils.makeGlobal('pb.region.Rect.SmartDroppable', SmartDroppable);\n}\n","import Utils from 'src/utils';\n\nlet activeContext = null;\n\n/**\n * Service that manages the context menu in the app.\n *\n * @class service.Context\n * @static\n */\nlet Context = {\n\n  /**\n   * Sets the given element as the currently active context menu.\n   *\n   * @method setActive\n   * @param {Object} active The currently active context menu.\n   */\n  setActive(active) {\n    activeContext = active;\n    $(this).trigger(this.EventType.SWITCHED);\n  },\n\n  /**\n   * @method getActive\n   * @return {Object} The currently active context menu, if any.\n   */\n  getActive() {\n    return activeContext;\n  },\n\n  EventType: {\n    /**\n     * Event type fired when the context menu that is opened has switched\n     *\n     * @type string\n     * @property EventType.SWITCHED\n     */\n    SWITCHED: 'context-switched'\n  }\n};\n\nexport default Context = Context;\n\nUtils.makeGlobal('pb.service.Context', Context);\n","import Utils from 'src/utils';\n\n/**\n * Service that lets the user preview an element on mouse hover.\n *\n * @class service.Preview\n * @static\n */\nlet Preview = {\n\n  /**\n   * Element that is being previewed, if any.\n   *\n   * @type Element\n   * @property previewedEl\n   */\n  previewedEl: null\n};\n\nexport default Preview = Preview;\n\nUtils.makeGlobal('pb.service.Preview', Preview);\n","import Context from 'src/service/context';\nimport Distribute from 'src/service/distribute';\nimport DragDrop from 'src/service/dragdrop';\nimport Preview from 'src/service/preview';\n","import Check     from 'src/check';\nimport PbElement from 'src/pbelement';\nimport Utils     from 'src/utils';\n\nlet doc = null;\nlet templates = null;\n\nconst ATTR_ROW = 'pb-row';\nconst ATTR_COL = 'pb-col';\nconst EL_NAME = 'pb-s-rectgrid';\n\n/**\n * A surface that lays out its components in a grid. To use this, add attributes `pb-row` and\n * `pb-col` to the element `pb-s-rectgrid`. These are the number of rows and columns in the grid.\n *\n * Add the contents of the grid as children of this element. Use `pb-row` and `pb-col` attributes on\n * them to indicate their positions in the grid.\n *\n * @class surface.RectGrid\n * @extends PbElement\n */\nexport default class RectGrid extends PbElement {\n  createdCallback() {\n    super.createdCallback();\n\n    // Create the shadow DOM.\n    this.createShadowRoot()\n        .appendChild(Utils.activateTemplate(templates.main, doc));\n\n    // Initializes the data.\n    let rowCount = Check($(this).attr(ATTR_ROW)).isInt().orThrows();\n    let colCount = Check($(this).attr(ATTR_COL)).isInt().orThrows();\n    let rootEl = this.shadowRoot.querySelector('#content');\n\n    // Add the rows.\n    for (let row = 0; row < rowCount; row++) {\n      rootEl.appendChild(Utils.activateTemplate(templates.row, doc));\n    }\n\n    $(this.shadowRoot.querySelectorAll('#content > div'))\n        .each((row, rowEl) => {\n          for (let col = 0; col < colCount; col++) {\n            let colEl = Utils.activateTemplate(templates.col, doc);\n            $(colEl.querySelector('content'))\n                .attr('select', `[${ATTR_ROW}=\"${row}\"][${ATTR_COL}=\"${col}\"]`)\n                .attr(ATTR_ROW, row)\n                .attr(ATTR_COL, col);\n            rowEl.appendChild(colEl);\n          }\n        });\n  }\n\n  attachedCallback() {\n    super.attachedCallback();\n  }\n\n  /**\n   * Returns the element at the given row and column, or null if not found.\n   * @param  {number} row The row index of the element to be returned.\n   * @param  {number} col The col index of the element to be returned.\n   * @return {HTMLElement|null} The HTML element at the given row and col, or null if not\n   *     found.\n   */\n  get(row, col) {\n    let contentEl = this.shadowRoot\n        .querySelector(`content[${ATTR_ROW}=\"${row}\"][${ATTR_COL}=\"${col}\"]`);\n    return contentEl ? contentEl.getDistributedNodes()[0] : null;\n  }\n\n  /**\n   * Registers `pb-s-rectgrid` to the document.\n   *\n   * @method register\n   * @static\n   * @param {!Document} currentDoc The document object to register the element to.\n   * @param {!Object} gridTemplates Object containing template for the `pb-s-rectgrid`'s element \n   *     shadow DOM.\n   * @param {!Element} gridTemplates.main The main template for the element.\n   * @param {!Element} gridTemplates.row The template for every row in the grid.\n   * @param {!Element} gridTemplates.col The template for every column in the grid.\n   */\n  static register(currentDoc, gridTemplates) {\n    if (doc || templates) {\n      // Register has already happened.\n      return;\n    }\n\n    doc = currentDoc;\n    templates = gridTemplates;\n\n    document.registerElement(EL_NAME, {prototype: RectGrid.prototype});\n  }\n}\n\nUtils.makeGlobal('pb.surface.RectGrid', RectGrid);\n","import Utils from 'src/utils';\nimport ContextService from 'src/service/context';\n\nlet template = null;\nlet doc = null;\n\nlet EL_NAME = \"pb-u-context\";\n\nlet SHOWN_CLASS = \"shown\";\n// TODO(gs): Make subcontext\n\n/**\n * Handles context menu on the parent element.\n *\n * @method handleContextMenu\n * @param {!Event} event The event object.\n * @private\n */\nfunction handleContextMenu(event) {\n  this.show(event.x, event.y);\n  event.preventDefault();\n}\n\n/**\n * Handles click event in a document.\n *\n * @method handleClick\n * @param {!Event} event The event object\n * @private\n */\nfunction handleClick(event) {\n  if (!this.contains(event.target)) {\n    this.hide();\n  }\n}\n\nfunction handleContextSwitched() {\n  if (ContextService.getActive() !== this) {\n    this.hide();\n  }\n}\n\n/**\n * A context menu. To use this, add `pb-u-context` as a child of the element you want to attach the\n * menu to. When you right click on the parent element, the context menu will open.\n *\n * Each child of the context menu is a menu item.\n *\n * TODO(gs): Redo this with menu polyfill.\n * \n * @class ui.Context\n * @extends HTMLElement\n */\nclass Context extends HTMLElement {\n  constructor() {}\n\n  createdCallback() {\n    this.createShadowRoot()\n        .appendChild(Utils.activateTemplate(template, doc));\n    this.attachedCallback();\n  }\n\n  attachedCallback() {\n    if (this.parentElement) {\n      this.parentElement.addEventListener('contextmenu', handleContextMenu.bind(this));\n    }\n    document.addEventListener('click', handleClick.bind(this));\n    $(ContextService).on(ContextService.EventType.SWITCHED, handleContextSwitched.bind(this));\n  }\n\n  /**\n   * Displays the context menu at the specified coordinate. The menu will position its anchor so it\n   * the menu doesn't go off screen.\n   *\n   * @method show\n   * @param {number} mouseX The X coordinate to display the menu on.\n   * @param {number} mouseY The Y coordinate to display the menu on.\n   */\n  show(mouseX, mouseY) {\n    let rootEl = this.shadowRoot.querySelector('#root');\n    rootEl.classList.add(SHOWN_CLASS);\n\n    // Handle positioning.\n    let x = null;\n    let hAnchor = null;\n    let documentEl = this.ownerDocument.documentElement;\n    if (mouseX + rootEl.clientWidth > documentEl.clientWidth) {\n      hAnchor = 'right';\n      x = documentEl.clientWidth - mouseX;\n    } else {\n      hAnchor = 'left';\n      x = mouseX;\n    }\n\n    let y = null;\n    let vAnchor = null;\n    if (mouseY + rootEl.clientHeight > documentEl.clientHeight) {\n      vAnchor = 'bottom';\n      y = documentEl.clientHeight - mouseY;\n    } else {\n      vAnchor = 'top';\n      y = mouseY;\n    }\n\n    this.style.position = 'fixed';\n\n    // Clear the positions.\n    this.style.top = '';\n    this.style.left = '';\n    this.style.right = '';\n    this.style.bottom = '';\n\n    this.style[hAnchor] = `${x}px`;\n    this.style[vAnchor] = `${y}px`;\n\n    ContextService.setActive(this);\n  }\n\n  /**\n   * Hides the context menu.\n   *\n   * @method hide\n   */\n  hide() {\n    this.shadowRoot.querySelector('#root').classList.remove(SHOWN_CLASS);\n  }\n\n  /**\n   * Registers `pb-u-context` to the document.\n   *\n   * @method register\n   * @static\n   * @param {!Document} currentDoc The document object to register the element to.\n   * @param {!Element} contextTemplate The template for the `pb-u-context`'s element shadow DOM.\n   */\n  static register(currentDoc, contextTemplate) {\n    if (doc || template) {\n      // Register has already happened.\n      return;\n    }\n\n    doc = currentDoc;\n    template = contextTemplate;\n\n    document.registerElement(EL_NAME, { prototype: Context.prototype });\n  }\n}\n\nexport default Context = Context;\n\nUtils.makeGlobal('pb.ui.Context', Context);","import Events    from 'src/events';\nimport PbElement from 'src/pbelement';\nimport Utils     from 'src/utils';\n\nimport PreviewService from 'src/service/preview';\n\n/**\n * Class that contains a preview if the mouse enters the parent element. This will display\n * the children element as preview.\n *\n * @class ui.Preview\n * @extends PbElement\n */\n\nlet registered = false;\n\nconst EL_NAME = 'pb-u-preview';\n\nfunction handleMouseOver() {\n  PreviewService.previewedEl = this;\n}\n\nfunction handleMouseOut(e) {\n  PreviewService.previewedEl = null;\n}\n\nexport default class Preview extends PbElement {\n  createdCallback() {\n    super.createdCallback();\n    this.createShadowRoot();\n    this.attachedCallback();\n  }\n\n  attachedCallback() {\n    super.attachedCallback();\n    if (this.parentElement) {\n      Events.of(this.parentElement, this)\n          .register('mouseenter', handleMouseOver.bind(this))\n          .register('mouseleave', handleMouseOut.bind(this));\n    }\n  }\n\n  detachedCallback() {\n    if (this.parentElement) {\n      Events.of(this.parentElement, this).unregister();\n    }\n    super.detachedCallback();\n  }\n\n  /**\n   * Registers `pb-u-preview` to the document.\n   *\n   * @method register\n   * @static\n   */\n  static register() {\n    if (!registered) {\n      document.registerElement(EL_NAME, {prototype: Preview.prototype});\n    }\n  }\n}\n\nUtils.makeGlobal('pb.ui.Preview', Preview);\n","import PbElement from 'src/pbelement';\nimport Utils from 'src/utils';\nimport PreviewService from 'src/service/preview';\n\n/**\n * Element that displays the innerHTML of the `pb-u-preview` of element currently being hovered \n * over. This works in tandem with [[ui.Preview|ui.Preview]] and \n * [[service.Preview|service.Preview]].\n *\n * @class ui.Previewer\n * @extends PbElement\n */\n\nlet template = null;\nlet doc = null;\n\nconst _previewElHandler = Symbol();\n\nconst EL_NAME = 'pb-u-previewer';\n\nfunction handlePreviewEl() {\n  if (PreviewService.previewedEl) {\n    this.innerHTML = PreviewService.previewedEl.innerHTML;\n  } else {\n    this.innerHTML = '';\n  }\n}\n\nexport default class Previewer extends PbElement {\n  createdCallback() {\n    super.createdCallback();\n    this.createShadowRoot()\n        .appendChild(Utils.activateTemplate(template, doc));\n\n    this.attachedCallback();\n  }\n\n  attachedCallback() {\n    super.attachedCallback();\n    this[_previewElHandler] = Utils.observe(\n        PreviewService, \n        'previewedEl', \n        handlePreviewEl.bind(this));\n  }\n\n  detachedCallback() {\n    Object.unobserve(PreviewService, this[_previewElHandler]);\n    super.detachedCallback();\n  }\n\n  /**\n   * Registers `pb-u-previewer` to the document.\n   *\n   * @method register\n   * @static\n   * @param {!Document} currentDoc The document object to register the element to.\n   * @param {!Element} previewerTemplate The template for the `pb-u-previewer`'s element shadow DOM.\n   */\n  static register(currentDoc, previewerTemplate) {\n    if (!template && !doc) {\n      document.registerElement(EL_NAME, {prototype: Previewer.prototype});\n    }\n\n    template = previewerTemplate;\n    doc = currentDoc;\n  }\n}\n\nUtils.makeGlobal('pb.ui.Previewer', Previewer);\n","import Check     from 'src/check';\nimport PbElement from 'src/pbelement';\nimport Utils     from 'src/utils';\n\nlet doc = null;\nlet handlebars = null;\n\nconst EL_NAME = 'pb-u-template';\n\n/**\n * Contains a handlebars js template. When this element is created, it will process the handlebars\n * js template within it and replace itself with the processed templates. To pass in variables into\n * the template, add `data-<name>=\"<var>\"` attributes to the element, where `name` is the key to be\n * used in the template, and var is the property name accessible globally.\n *\n * This class also registers a `{{#pb-for <from> <to> <step>}}` block helper. This is a simple for\n * loop that copies the inner block several times. You can access the index of the loop using the\n * `@index` variable.\n *\n * @class ui.Template\n * @extends PbElement\n */\nexport default class Template extends PbElement {\n  constructor() {\n    super();\n  }\n\n  createdCallback() {\n    super.createdCallback();\n    let templateStr = this.innerHTML;\n    let data = {};\n    for (let key in this.dataset) {\n      let valueStr = this.dataset[key];\n      data[key] = window[valueStr] || valueStr;\n    }\n    $(this).replaceWith(handlebars.compile(this.innerHTML)(data));\n  }\n\n  /**\n   * Registers `pb-u-template` to the document.\n   *\n   * @method register\n   * @static\n   * @param {!Document} currentDoc The document object to register the element to.\n   * @param {!Handlebars} handlebars_ref Reference to the Handlebars library.\n   */\n  static register(currentDoc, handlebars_ref) {\n    if (!doc && !handlebars) {\n      // Only registers once.\n      document.registerElement(EL_NAME, {prototype: Template.prototype});\n    }\n    \n    doc = currentDoc;\n    handlebars = handlebars_ref;\n\n    handlebars.registerHelper('pb-for', function(from, to, step, options) {\n      if (options === undefined) {\n        // Shift the args if step is not defined.\n        options = step;\n        step = 1;\n      }\n      let rv = '';\n      for (let i = Check(from).isInt().orThrows(); \n          i < Check(to).isInt().orThrows(); \n          i += Check(step).isInt().orThrows()) {\n        let data = Handlebars.createFrame(options.data || {});\n        data.index = i;\n        rv += options.fn(this, { data: data });\n      } \n      return rv;\n    });\n  }\n}\n\nUtils.makeGlobal('pb.ui.Template', Template);\n"]}