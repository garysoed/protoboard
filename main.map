{"version":3,"file":"/Users/gsoed/proj/protoboard/main.js","sources":["@traceur/generated/TemplateParser/3","@traceur/generated/TemplateParser/4","/Users/gsoed/proj/protoboard/src/as.js","@traceur/generated/TemplateParser/0","@traceur/generated/TemplateParser/2","@traceur/generated/TemplateParser/1","/Users/gsoed/proj/protoboard/src/utils.js","@traceur/generated/TemplateParser/5","/Users/gsoed/proj/protoboard/src/service/dragdrop.js","/Users/gsoed/proj/protoboard/src/component/component.js","@traceur/generated/TemplateParser/7","@traceur/generated/TemplateParser/8","@traceur/generated/TemplateParser/6","/Users/gsoed/proj/protoboard/src/component/card.js","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/12","@traceur/generated/TemplateParser/10","@traceur/generated/TemplateParser/11","/Users/gsoed/proj/protoboard/src/component/token.js","/Users/gsoed/proj/protoboard/src/service/distribute.js","/Users/gsoed/proj/protoboard/src/region/region.js","/Users/gsoed/proj/protoboard/src/region/bag.js","/Users/gsoed/proj/protoboard/src/region/deck.js","/Users/gsoed/proj/protoboard/src/region/rect.js","/Users/gsoed/proj/protoboard/src/service/modules.js","/Users/gsoed/proj/protoboard/src/pbelement.js","@traceur/generated/TemplateParser/13","/Users/gsoed/proj/protoboard/src/surface/rectgrid.js","/Users/gsoed/proj/protoboard/src/service/context.js","/Users/gsoed/proj/protoboard/src/ui/context.js","/Users/gsoed/proj/protoboard/src/modules.js"],"names":[],"mappings":"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","sourceRoot":"/Users/gsoed/proj/protoboard/","sourcesContent":["var __moduleName = $__placeholder__0;","function require(path) {\n        return $traceurRuntime.require($__placeholder__0, path);\n      }","let As = {\n  int(input, radix = 10) {\n    let output = Number.parseInt(input, radix);\n    if (Number.isNaN(output)) {\n      throw `${input} is not an integer with radix ${radix}`;\n    }\n\n    return output;\n  },\n\n  boolean(input) {\n    return input.toLowerCase() === 'true';\n  }\n};\n\nexport default As = As;\n\nif (!window.pb) {\n  window.pb = {};\n}\n\nwindow.pb.As = As;\n","var $__default = $__placeholder__0","return $__placeholder__0","get $__placeholder__0() { return $__placeholder__1; }","var Utils = {\n  /**\n   * Extracts the given template from the given document.\n   * @param  {string} templateQuery The query used to obtain the template.\n   * @param  {!Document} doc The document object to obtain the template from.\n   * @return {!Node} The node in the template.\n   */\n  extractTemplate(templateQuery, doc) {\n    return this.activateTemplate(doc.querySelector(templateQuery), doc);\n  },\n\n  activateTemplate(template, doc) {\n    return doc.importNode(template.content, true);\n  },\n\n  /**\n   * Returns the referenced function, or noop function if the referenced function does not exist.\n   * @param  {!Object} scope Object containing the referenced function.\n   * @param  {string} name Name of the function to return.\n   * @return {!Function} The referenced function, or noop function if the referenced function does\n   *     not exist.\n   */\n  nonNullFn(scope, name) {\n    return scope[name] || (() => {});\n  },\n\n  /**\n   * Observes the given property on the given object.\n   * @param {!Object} object Object to observe changes to.\n   * @param {string|null} property The property name to listen to, or null to listen to all \n   *     properties.\n   * @param {Function} handler Handler called when a property has changed. The handler accepts 3\n   *     arguments: property name, change type, and the old value of the property.\n   */\n  observe(object, property, handler) {\n    Object.observe(object, function(changes) {\n      changes.forEach(change => {\n        if (!property || change.name === property) {\n          handler(change.name, change.type, change.oldValue);\n        }\n      });\n    });\n  },\n\n  waitFor(object, property, truth, handler) {\n    let truthFn = (typeof truth === 'function') \n        ? truth \n        : v => v === truth;\n    if (truthFn(object[property])) {\n      handler();\n    } else {\n      let observer = (changes) => {\n        if (truthFn(object[property])) {\n          Object.unobserve(object, observer)\n          handler();\n        }\n      }\n      Object.observe(object, observer);\n    }\n  },\n\n  compare(a, b) {\n    if (typeof a === 'number' && typeof b === 'number') {\n      if (a < b) {\n        return -1;\n      } else if (a > b) {\n        return 1;\n      } else {\n        return 0;\n      }\n    }\n\n    return undefined;\n  },\n\n  toArray(obj) {\n    let array = [];\n    for (let i = 0; i < obj.length; i++) {\n      array[i] = obj[i];\n    }\n    return array;\n  },\n\n  /**\n   * Makes the given target to be globally available.\n   * @param {string} The namespace of the target. This should be separated by '.'.\n   * @param {Object=} target The target object to be made globally available.\n   */\n  makeGlobal(namespace, target) {\n    let currentScope = window;\n    let pathArr = namespace.split('.');\n    pathArr.forEach((path, i) => {\n      if (i === (pathArr.length - 1)) {\n        if (!currentScope[path]) {\n          currentScope[path] = target;\n        } else {\n          throw `${namespace} already exists`; \n        }\n      } else {\n        if (!currentScope[path]) {\n          currentScope[path] = {}\n        }\n      }\n      currentScope = currentScope[path];\n    });\n  }\n};\n\nexport default Utils = Utils;\n\nUtils.makeGlobal('pb.Utils', Utils);\n","$__placeholder__0[$traceurRuntime.toProperty($__placeholder__1)]","import Utils from 'src/utils';\n\n/**\n * Service that keeps track of drag and drop.\n *\n * @type {Object}\n */\nlet DragDrop = {\n  EventType: {\n    DRAGGED: 'dragged'\n  },\n\n  lastDraggedEl: null,\n\n  /**\n   * Start dragging the given element.\n   * @param {!Element} draggedEl The element that is dragged.\n   */\n  dragStart(draggedEl) {\n    this.lastDraggedEl = draggedEl;\n  }\n};\n\n\nexport default DragDrop = DragDrop;\n\nUtils.makeGlobal('pb.service.DragDrop', DragDrop);\n","import Utils from 'src/utils';\nimport DragDropService from 'src/service/dragdrop';\n\nconst ATTR_DRAGGABLE = 'draggable';\nconst CLASS_DRAGGED = 'pb-dragged';\n\nfunction setupDraggable() {\n  let draggables = this.querySelectorAll('*[draggable=\"true\"]');\n\n  // Propagate the draggable attribute to the root element.\n  Utils.toArray(draggables).forEach((draggable => {\n    draggable.addEventListener('dragstart', handleDragStart.bind(this));\n    draggable.addEventListener('dragend', handleDragEnd.bind(this));\n  }).bind(this));\n}\n\nfunction handleDragEnd() {\n  this.classList.remove(CLASS_DRAGGED);\n}\n\nfunction handleDragStart(event) {\n  let dataTransfer = event.dataTransfer;\n  dataTransfer.effectAllowed = 'move';\n  this.classList.add(CLASS_DRAGGED);\n\n  DragDropService.dragStart(this);\n}\n\n/**\n * @class  Base class for all components. Classes extending this should call #config at the end of\n *     createdCallback.\n *\n * To make a component draggable, user must have an HTML element with a draggable attribute set to\n * true as a child of this element.\n */\nexport default class Component extends HTMLElement {\n  constructor() {}\n\n  createdCallback() {}\n\n  /**\n   * Configures the component.\n   * @param {Object} config Configuration used to configure the behavior of this component.\n   * @param {boolean} config.draggable True iff the component should be draggable.\n   */\n  config(config) {\n    if (config.draggable) {\n      setupDraggable.bind(this)();\n    }\n  }\n}\n\nif (window.TEST_MODE) {\n  Utils.makeGlobal('pb.component.Component', Component);\n}\n","var $__placeholder__0 = $__placeholder__1","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2,\n                                       $__placeholder__3)","var $__default = $__placeholder__0","import As from 'src/as';\nimport Component from 'src/component/component';\nimport Utils from 'src/utils';\n\nlet doc = null;\nlet template = null;\n\nconst EL_NAME = 'pb-c-card';\nconst ATTR_SHOW_FRONT = 'showFront';\n\nfunction handleClick() {\n  let oldValue = As.boolean($(this).attr(ATTR_SHOW_FRONT) || 'false');\n  $(this).attr(ATTR_SHOW_FRONT, !oldValue);\n}\n\n/**\n * A representation of a card.\n */\nexport default class Card extends Component {\n  constructor() {\n    super();\n  }\n\n  createdCallback() {\n    super.createdCallback();\n    this.createShadowRoot()\n        .appendChild(Utils.activateTemplate(template, doc));\n    this.attachedCallback();\n  }\n\n  attachedCallback() {\n    this.addEventListener('click', handleClick);\n    this.config({ draggable: true });\n  }\n\n  detachedCallback() {\n    this.removeEventListener('click', handleClick);\n  }\n\n  static register(currentDoc, cardTemplate) {\n    if (doc || template) {\n      // Registration has already happened.\n      return;\n    }\n\n    doc = currentDoc;\n    template = cardTemplate;\n    document.registerElement(EL_NAME,  {prototype: Card.prototype});\n  }\n}\n\nUtils.makeGlobal('pb.component.Card', Card);\n","$traceurRuntime.superConstructor($__placeholder__0).call($__placeholder__1)","var $__placeholder__0 = $__placeholder__1","$traceurRuntime.superGet($__placeholder__0, $__placeholder__1, $__placeholder__2)","$__placeholder__0.call($__placeholder__1)","import Component from 'src/component/component';\nimport Utils from 'src/utils';\n\nlet doc = null;\nlet template = null;\n\nconst EL_NAME = 'pb-c-token';\n\n/**\n * A simple movable component with only one state. Examples of token:\n *   - Chess piece\n *   - Cubes\n *   - Damage marker\n */\nexport default class Token extends Component {\n  constructor() {\n    super();\n  }\n\n  createdCallback() {\n    super.createdCallback();\n    this.createShadowRoot().appendChild(Utils.activateTemplate(template, doc));\n\n    this.config({ draggable: true });\n  }\n\n  static register(currentDoc, tokenTemplate) {\n    if (doc || template) {\n      // Registration has already happened.\n      return;\n    }\n\n    doc = currentDoc;\n    template = tokenTemplate;\n    document.registerElement(EL_NAME,  {prototype: Token.prototype});\n  }\n}\n\nUtils.makeGlobal('pb.component.Token', Token);\n","import Utils from 'src/utils';\n\nlet source = null;\n\nconst CLASS_DISTRIBUTE = 'pb-distribute';\n\n/**\n * Service that manages the distributing action.\n *\n * @type {Object}\n */\nlet Distribute = {\n\n  /**\n   * Starts the distribution action.\n   * @param {!Bag} distributeSource Source to distribute the elements from.\n   */\n  begin(distributeSource) {\n    if (!this.isActive()) {\n      source = distributeSource;\n      distributeSource.classList.add(CLASS_DISTRIBUTE);\n      $(this).trigger(this.EventType.BEGIN);\n    }\n  },\n\n  /**\n   * Ends the distribution process.\n   */\n  end() {\n    if (this.isActive()) {\n      source.classList.remove(CLASS_DISTRIBUTE);\n      source = null;\n      $(this).trigger(this.EventType.END);\n    }\n  },\n\n  /**\n   * @return {boolean} True iff the distribution is active.\n   */\n  isActive() {\n    return source !== null;\n  },\n\n  /**\n   * @return {Element} The first child of the distribution source.\n   */\n  next() {\n    return source.next();\n  },\n\n  /**\n   * Types of events that can be fired by the service\n   *\n   * @enum {string}\n   */\n  EventType: {\n    BEGIN: 'distribute-begin',\n    END: 'distribute-end'\n  }\n};\n\n$(window).on('keydown', event => {\n  // Check if this is ESC key.\n  if (event.which === 27 && Distribute.isActive()) {\n    Distribute.end();\n  }\n});\n\nexport default Distribute = Distribute;\n\nUtils.makeGlobal('pb.service.Distribute', Distribute);","import Distribute from 'src/service/distribute';\nimport DragDrop from 'src/service/dragdrop';\nimport Utils from 'src/utils';\n\nconst CLASS_DISTRIBUTE = 'pb-distribute';\nconst CLASS_OVER = 'pb-over';\n\nfunction handleDragOver(event) {\n  // TODO: Only enable if the component is compatible.\n  event.preventDefault();\n  event.dropEffect = 'move';\n}\n\nfunction handleDragEnter(event) {\n  event.preventDefault();\n  this.classList.add(CLASS_OVER);\n}\n\nfunction handleDragLeave() {\n  this.classList.remove(CLASS_OVER);\n}\n\nfunction handleDrop() {\n  this.classList.remove(CLASS_OVER);\n  this.add(DragDrop.lastDraggedEl);\n}\n\nfunction handleClick() {\n  if (Distribute.isActive() && Distribute.next()) {\n    this.add(Distribute.next());\n  }\n}\n\nfunction handleDistributeBegin() {\n  if (this.shadowRoot) {\n    this.shadowRoot.querySelector('#root').classList.add(CLASS_DISTRIBUTE);\n  }\n}\n\nfunction handleDistributeEnd() {\n  if (this.shadowRoot) {\n    this.shadowRoot.querySelector('#root').classList.remove(CLASS_DISTRIBUTE);\n  }\n}\n\n/**\n * @class Base class of all regions. These are drop targets.\n */\nexport default class Region extends HTMLElement {\n\n  constructor() {}\n\n  createdCallback() {}\n\n  attachedCallback() {\n    this.addEventListener('dragover', handleDragOver);\n    this.addEventListener('dragenter', handleDragEnter);\n    this.addEventListener('dragleave', handleDragLeave);\n    this.addEventListener('drop', handleDrop);\n    this.addEventListener('click', handleClick);\n\n    $(Distribute)\n        .on(Distribute.EventType.BEGIN, handleDistributeBegin.bind(this))\n        .on(Distribute.EventType.END, handleDistributeEnd.bind(this));\n  }\n\n  add(el) {\n    this.appendChild(el);\n  }\n}\n\nif (window.TEST_MODE) {\n  Utils.makeGlobal('pb.region.Region', Region);\n}","import Region from 'src/region/region';\nimport Distribute from 'src/service/distribute';\nimport Utils from 'src/utils';\n\nlet doc = null;\nlet template = null;\n\nconst EL_NAME = 'pb-r-bag';\n\n/**\n * Handles event called when the \"Distribute\" option in the context menu is clicked.\n *\n * @param  {!Event} event The event object\n */\nfunction handleDistributeClick(event) {\n  this.distribute();\n  event.stopPropagation();\n}\n\n/**\n * @class A generic collection of items.\n */\nclass Bag extends Region {\n  constructor() {\n    super();\n  }\n\n  createdCallback() {\n    super.createdCallback();\n    this.createShadowRoot().appendChild(Utils.activateTemplate(template, doc));\n\n    this.shadowRoot.querySelector('#distribute')\n        .addEventListener('click', handleDistributeClick.bind(this));\n  }\n\n  /**\n   * Begins the distribute process.\n   */\n  distribute() {\n    Distribute.begin(this);\n  }\n\n  /**\n   * @return {Element} The first child of the element.\n   */\n  next() {\n    return this.children[0];\n  }\n\n  static register(currentDoc, deckTemplate) {\n    if (doc || template) {\n      // Already registered.\n      return;\n    }\n\n    doc = currentDoc;\n    template = deckTemplate;\n    document.registerElement(EL_NAME, {prototype: Bag.prototype});\n  }\n}\n\nexport default Bag = Bag;\n\nUtils.makeGlobal('pb.region.Bag', Bag);\n","import Region from 'src/region/region';\nimport Utils from 'src/utils';\n\nlet doc = null;\nlet template = null;\n\nconst EL_NAME = 'pb-r-deck';\n\n/**\n * Represents a collection of items that can be sorted.\n */\nclass Deck extends Region {\n  constructor() {\n    super();\n  }\n\n  createdCallback() {\n    super.createdCallback();\n    this.createShadowRoot().appendChild(Utils.activateTemplate(template, doc));\n  }\n\n  attachedCallback() {\n    super.attachedCallback();\n    this.shadowRoot\n        .querySelector('#shuffle')\n        .addEventListener('click', this.shuffle.bind(this));\n  }\n\n  /**\n   * Shuffles the children of this element.\n   */\n  shuffle() {\n    let pairs = Utils.toArray(this.children).map(child => [child, Math.random()]);\n    pairs.sort((a, b) => Utils.compare(a[1], b[1]));\n    let shuffled = pairs.map(pair => pair[0]);\n    shuffled.forEach((el => this.appendChild(el)).bind(this));\n  }\n\n  static register(currentDoc, deckTemplate) {\n    if (doc || template) {\n      // Already registered.\n      return;\n    }\n\n    doc = currentDoc;\n    template = deckTemplate;\n    document.registerElement(EL_NAME, {prototype: Deck.prototype});\n  }\n}\n\nexport default Deck = Deck;\n\nUtils.makeGlobal('pb.region.Deck', Deck);\n","import Region from 'src/region/region';\nimport Utils from 'src/utils';\n\nlet doc = null;\nlet template = null;\n\nconst EL_NAME = 'pb-r-rect';\n\nclass Rect extends Region {\n  constructor() {\n    super();\n  }\n\n  createdCallback() {\n    super.createdCallback();\n    this.createShadowRoot().appendChild(Utils.activateTemplate(template, doc));\n  }\n\n  static register(currentDoc, rectTemplate) {\n    if (doc || template) {\n      // Registration has already happened.\n      return;\n    }\n\n    doc = currentDoc;\n    template = rectTemplate;\n    document.registerElement(EL_NAME,  {prototype: Rect.prototype});\n  }\n}\n\nexport default Rect = Rect;\n\nUtils.makeGlobal('pb.region.Rect', Rect);\n","import Distribute from 'src/service/distribute';\nimport DragDrop from 'src/service/dragdrop';\n","import Utils from 'src/utils';\n\nexport default class PbElement extends HTMLElement {\n  createdCallback() {\n    this.isCreated = false;\n  }\n\n  attachedCallback() {\n    this.isCreated = true;\n  }\n}\n\nUtils.makeGlobal('pb.PbElement', PbElement);\n","$traceurRuntime.superConstructor(\n          $__placeholder__0).apply(this, arguments)","import As from 'src/as';\nimport Utils from 'src/utils';\nimport PbElement from 'src/pbelement';\n\nlet doc = null;\nlet templates = null;\n\nconst ATTR_ROW = 'row';\nconst ATTR_COL = 'col';\nconst EL_NAME = 'pb-s-rectgrid';\n\n/**\n * @class A surface that lays out its components in a grid. To use this, add attributes \"row\" and\n *     \"col\" to the element \"pb-s-rectgrid\". These are the number of rows and columns in the grid.\n *\n *     Add the contents of the grid as children of this element. Use \"row\" and \"col\" attributes on\n *     them to indicate their positions in the grid.\n */\nexport default class RectGrid extends PbElement {\n  createdCallback() {\n    super.createdCallback();\n\n    // Create the shadow DOM.\n    this.createShadowRoot()\n        .appendChild(Utils.activateTemplate(templates.main, doc));\n\n    // Initializes the data.\n    let rowCount = As.int($(this).attr(ATTR_ROW));\n    let colCount = As.int($(this).attr(ATTR_COL));\n    let rootEl = this.shadowRoot.querySelector('#content');\n\n    // Add the rows.\n    for (let row = 0; row < rowCount; row++) {\n      rootEl.appendChild(Utils.activateTemplate(templates.row, doc));\n    }\n\n    $(this.shadowRoot.querySelectorAll('#content > div'))\n        .each((row, rowEl) => {\n          for (let col = 0; col < colCount; col++) {\n            let colEl = Utils.activateTemplate(templates.col, doc);\n            $(colEl.querySelector('content'))\n                .attr('select', `[${ATTR_ROW}=\"${row}\"][${ATTR_COL}=\"${col}\"]`)\n                .attr('row', row)\n                .attr('col', col);\n            rowEl.appendChild(colEl);\n          }\n        });\n  }\n\n  attachedCallback() {\n    super.attachedCallback();\n  }\n\n  /**\n   * Returns the element at the given row and column, or null if not found.\n   * @param  {number} row The row index of the element to be returned.\n   * @param  {number} col The col index of the element to be returned.\n   * @return {HTMLElement|null} The HTML element at the given row and col, or null if not\n   *     found.\n   */\n  get(row, col) {\n    let contentEl = this.shadowRoot\n        .querySelector(`content[${ATTR_ROW}=\"${row}\"][${ATTR_COL}=\"${col}\"]`);\n    return contentEl ? contentEl.getDistributedNodes()[0] : null;\n  }\n\n  static register(currentDoc, gridTemplates) {\n    if (doc || templates) {\n      // Register has already happened.\n      return;\n    }\n\n    doc = currentDoc;\n    templates = gridTemplates;\n\n    document.registerElement(EL_NAME, {prototype: RectGrid.prototype});\n  }\n}\n\nUtils.makeGlobal('pb.surface.RectGrid', RectGrid);\n","import Utils from 'src/utils';\n\nlet activeContext = null;\n\n/**\n * Service that manages the context menu in the app.\n */\nlet Context = {\n\n  /**\n   * Sets the given element as the currently active context menu.\n   * @param {Object} active The currently active context menu.\n   */\n  setActive(active) {\n    activeContext = active;\n    $(this).trigger(this.EventType.SWITCHED);\n  },\n\n  /**\n   * @return {Object} The currently active context menu, if any.\n   */\n  getActive() {\n    return activeContext;\n  },\n\n  /**\n   * Types of events that can be fired by the service.\n   *\n   * @enum {string}\n   */\n  EventType: {\n    SWITCHED: 'context-switched'\n  }\n};\n\nexport default Context = Context;\n\nUtils.makeGlobal('pb.service.Context', Context);\n","import Utils from 'src/utils';\nimport ContextService from 'src/service/context';\n\nlet template = null;\nlet doc = null;\n\nlet EL_NAME = \"pb-u-context\";\n\nlet SHOWN_CLASS = \"shown\";\n// TODO: Make subcontext\n\n/**\n * Handles context menu on the parent element.\n *\n * @param {!Event} event The event object.\n */\nfunction handleContextMenu(event) {\n  this.show(event.x, event.y);\n  event.preventDefault();\n}\n\n/**\n * Handles click event in a document.\n *\n * @param {!Event} event The event object\n * @private\n */\nfunction handleClick(event) {\n  if (!this.contains(event.target)) {\n    this.hide();\n  }\n}\n\nfunction handleContextSwitched() {\n  if (ContextService.getActive() !== this) {\n    this.hide();\n  }\n}\n\n/**\n * @class Creates a context menu.\n */\nclass Context extends HTMLElement {\n  constructor() {}\n\n  createdCallback() {\n    this.createShadowRoot()\n        .appendChild(Utils.activateTemplate(template, doc));\n    this.attachedCallback();\n  }\n\n  attachedCallback() {\n    if (this.parentElement) {\n      this.parentElement.addEventListener('contextmenu', handleContextMenu.bind(this));\n    }\n    document.addEventListener('click', handleClick.bind(this));\n    $(ContextService).on(ContextService.EventType.SWITCHED, handleContextSwitched.bind(this));\n  }\n\n  show(mouseX, mouseY) {\n    let rootEl = this.shadowRoot.querySelector('#root');\n    rootEl.classList.add(SHOWN_CLASS);\n\n    // Handle positioning.\n    let x = null;\n    let hAnchor = null;\n    let documentEl = this.ownerDocument.documentElement;\n    if (mouseX + rootEl.clientWidth > documentEl.clientWidth) {\n      hAnchor = 'right';\n      x = documentEl.clientWidth - mouseX;\n    } else {\n      hAnchor = 'left';\n      x = mouseX;\n    }\n\n    let y = null;\n    let vAnchor = null;\n    if (mouseY + rootEl.clientHeight > documentEl.clientHeight) {\n      vAnchor = 'bottom';\n      y = documentEl.clientHeight - mouseY;\n    } else {\n      vAnchor = 'top';\n      y = mouseY;\n    }\n\n    this.style.position = 'fixed';\n\n    // Clear the positions.\n    this.style.top = '';\n    this.style.left = '';\n    this.style.right = '';\n    this.style.bottom = '';\n\n    this.style[hAnchor] = `${x}px`;\n    this.style[vAnchor] = `${y}px`;\n\n    ContextService.setActive(this);\n  }\n\n  /**\n   * Hides the context menu.\n   */\n  hide() {\n    this.shadowRoot.querySelector('#root').classList.remove(SHOWN_CLASS);\n  }\n\n  static register(currentDoc, contextTemplate) {\n    if (doc || template) {\n      // Register has already happened.\n      return;\n    }\n\n    doc = currentDoc;\n    template = contextTemplate;\n\n    document.registerElement(EL_NAME, { prototype: Context.prototype });\n  }\n}\n\nexport default Context = Context;\n\nUtils.makeGlobal('pb.ui.Context', Context);","/**\n * References all the modules.\n */\n\nimport Util from 'src/utils';\n\nimport {} from 'src/component/modules';\nimport {} from 'src/region/modules';\nimport {} from 'src/service/modules';\nimport {} from 'src/surface/modules';\nimport {} from 'src/ui/modules';\n"]}