<html><head><base href=".">

<link rel="import" href="di.html">
<link rel="import" href="service/config.html">

<script>
DI
    .bind('$registry', Registry => new Registry())
    .bind('pb_Bootstrap', (
      $registry,
      opt_Bag,
      opt_Card,
      opt_Deck,
      opt_Hand,
      opt_ui_Preview,
      opt_ui_Previewer,
      opt_Rect,
      opt_ui_Template,
      opt_Token,
      Config,
      Utils) => {
  return {
    run(document) {
      document.addEventListener('DOMContentLoaded', () => {
        $registry.register(document, Config);

        let tags = Utils.
            toArray(document.querySelectorAll(':unresolved')).
            map(el => el.tagName.toLowerCase());
        let tagSet = new Set(tags);
        for (let tag of tagSet) {
          console.warn(`Element ${tag} is unresolved`);
        }
      });
    }
  };
});
</script>
</head><body></body></html>